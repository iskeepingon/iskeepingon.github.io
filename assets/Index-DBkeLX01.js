var gy=Object.defineProperty;var my=(m,t,e)=>t in m?gy(m,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):m[t]=e;var ut=(m,t,e)=>(my(m,typeof t!="symbol"?t+"":t,e),e),Of=(m,t,e)=>{if(!t.has(m))throw TypeError("Cannot "+e)};var a=(m,t,e)=>(Of(m,t,"read from private field"),e?e.call(m):t.get(m)),v=(m,t,e)=>{if(t.has(m))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(m):t.set(m,e)},x=(m,t,e,i)=>(Of(m,t,"write to private field"),i?i.call(m,e):t.set(m,e),e);var Ie=(m,t,e,i)=>({set _(s){x(m,t,s,e)},get _(){return a(m,t,i)}}),S=(m,t,e)=>(Of(m,t,"access private method"),e);import{e as by,g as vy,f as No,_ as yy,r as Bc,o as Ay,h as wy,a as _y,c as Ey,d as Sn,i as xy,j as sm,p as Sy,b as Cy}from"./index-BZuqNDS5.js";var xm={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(m){(function(t,e){m.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:by,function(t,e){var i=[],s=Object.getPrototypeOf,n=i.slice,o=i.flat?function(r){return i.flat.call(r)}:function(r){return i.concat.apply([],r)},l=i.push,c=i.indexOf,d={},f=d.toString,b=d.hasOwnProperty,w=b.toString,C=w.call(Object),E={},T=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},M=function(h){return h!=null&&h===h.window},k=t.document,j={type:!0,src:!0,nonce:!0,noModule:!0};function F(r,h,u){u=u||k;var g,y,A=u.createElement("script");if(A.text=r,h)for(g in j)y=h[g]||h.getAttribute&&h.getAttribute(g),y&&A.setAttribute(g,y);u.head.appendChild(A).parentNode.removeChild(A)}function q(r){return r==null?r+"":typeof r=="object"||typeof r=="function"?d[f.call(r)]||"object":typeof r}var U="3.7.1",W=/HTML$/i,p=function(r,h){return new p.fn.init(r,h)};p.fn=p.prototype={jquery:U,constructor:p,length:0,toArray:function(){return n.call(this)},get:function(r){return r==null?n.call(this):r<0?this[r+this.length]:this[r]},pushStack:function(r){var h=p.merge(this.constructor(),r);return h.prevObject=this,h},each:function(r){return p.each(this,r)},map:function(r){return this.pushStack(p.map(this,function(h,u){return r.call(h,u,h)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(r,h){return(h+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(r,h){return h%2}))},eq:function(r){var h=this.length,u=+r+(r<0?h:0);return this.pushStack(u>=0&&u<h?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var r,h,u,g,y,A,_=arguments[0]||{},P=1,R=arguments.length,I=!1;for(typeof _=="boolean"&&(I=_,_=arguments[P]||{},P++),typeof _!="object"&&!T(_)&&(_={}),P===R&&(_=this,P--);P<R;P++)if((r=arguments[P])!=null)for(h in r)g=r[h],!(h==="__proto__"||_===g)&&(I&&g&&(p.isPlainObject(g)||(y=Array.isArray(g)))?(u=_[h],y&&!Array.isArray(u)?A=[]:!y&&!p.isPlainObject(u)?A={}:A=u,y=!1,_[h]=p.extend(I,A,g)):g!==void 0&&(_[h]=g));return _},p.extend({expando:"jQuery"+(U+Math.random()).replace(/\D/g,""),isReady:!0,error:function(r){throw new Error(r)},noop:function(){},isPlainObject:function(r){var h,u;return!r||f.call(r)!=="[object Object]"?!1:(h=s(r),h?(u=b.call(h,"constructor")&&h.constructor,typeof u=="function"&&w.call(u)===C):!0)},isEmptyObject:function(r){var h;for(h in r)return!1;return!0},globalEval:function(r,h,u){F(r,{nonce:h&&h.nonce},u)},each:function(r,h){var u,g=0;if(it(r))for(u=r.length;g<u&&h.call(r[g],g,r[g])!==!1;g++);else for(g in r)if(h.call(r[g],g,r[g])===!1)break;return r},text:function(r){var h,u="",g=0,y=r.nodeType;if(!y)for(;h=r[g++];)u+=p.text(h);return y===1||y===11?r.textContent:y===9?r.documentElement.textContent:y===3||y===4?r.nodeValue:u},makeArray:function(r,h){var u=h||[];return r!=null&&(it(Object(r))?p.merge(u,typeof r=="string"?[r]:r):l.call(u,r)),u},inArray:function(r,h,u){return h==null?-1:c.call(h,r,u)},isXMLDoc:function(r){var h=r&&r.namespaceURI,u=r&&(r.ownerDocument||r).documentElement;return!W.test(h||u&&u.nodeName||"HTML")},merge:function(r,h){for(var u=+h.length,g=0,y=r.length;g<u;g++)r[y++]=h[g];return r.length=y,r},grep:function(r,h,u){for(var g,y=[],A=0,_=r.length,P=!u;A<_;A++)g=!h(r[A],A),g!==P&&y.push(r[A]);return y},map:function(r,h,u){var g,y,A=0,_=[];if(it(r))for(g=r.length;A<g;A++)y=h(r[A],A,u),y!=null&&_.push(y);else for(A in r)y=h(r[A],A,u),y!=null&&_.push(y);return o(_)},guid:1,support:E}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=i[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(r,h){d["[object "+h+"]"]=h.toLowerCase()});function it(r){var h=!!r&&"length"in r&&r.length,u=q(r);return T(r)||M(r)?!1:u==="array"||h===0||typeof h=="number"&&h>0&&h-1 in r}function K(r,h){return r.nodeName&&r.nodeName.toLowerCase()===h.toLowerCase()}var bt=i.pop,rt=i.sort,Ft=i.splice,et="[\\x20\\t\\r\\n\\f]",St=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g");p.contains=function(r,h){var u=h&&h.parentNode;return r===u||!!(u&&u.nodeType===1&&(r.contains?r.contains(u):r.compareDocumentPosition&&r.compareDocumentPosition(u)&16))};var Dt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ee(r,h){return h?r==="\0"?"ï¿½":r.slice(0,-1)+"\\"+r.charCodeAt(r.length-1).toString(16)+" ":"\\"+r}p.escapeSelector=function(r){return(r+"").replace(Dt,ee)};var tt=k,dt=l;(function(){var r,h,u,g,y,A=dt,_,P,R,I,B,z=p.expando,O=0,V=0,lt=Fc(),At=Fc(),ft=Fc(),ie=Fc(),Ut=function(L,D){return L===D&&(y=!0),0},vi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",yi="(?:\\\\[\\da-fA-F]{1,6}"+et+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",vt="\\["+et+"*("+yi+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+yi+"))|)"+et+"*\\]",vn=":("+yi+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vt+")*)|.*)\\)|)",_t=new RegExp(et+"+","g"),Bt=new RegExp("^"+et+"*,"+et+"*"),Ro=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),Rf=new RegExp(et+"|>"),Ai=new RegExp(vn),Po=new RegExp("^"+yi+"$"),wi={ID:new RegExp("^#("+yi+")"),CLASS:new RegExp("^\\.("+yi+")"),TAG:new RegExp("^("+yi+"|[*])"),ATTR:new RegExp("^"+vt),PSEUDO:new RegExp("^"+vn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+vi+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},Ms=/^(?:input|select|textarea|button)$/i,Ds=/^h\d$/i,Ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Pf=/[+~]/,Gi=new RegExp("\\\\[\\da-fA-F]{1,6}"+et+"?|\\\\([^\\r\\n\\f])","g"),Xi=function(L,D){var N="0x"+L.slice(1)-65536;return D||(N<0?String.fromCharCode(N+65536):String.fromCharCode(N>>10|55296,N&1023|56320))},ly=function(){Is()},hy=Oc(function(L){return L.disabled===!0&&K(L,"fieldset")},{dir:"parentNode",next:"legend"});function cy(){try{return _.activeElement}catch(L){}}try{A.apply(i=n.call(tt.childNodes),tt.childNodes),i[tt.childNodes.length].nodeType}catch(L){A={apply:function(D,N){dt.apply(D,n.call(N))},call:function(D){dt.apply(D,n.call(arguments,1))}}}function Ct(L,D,N,H){var $,G,X,Q,Y,gt,at,ht=D&&D.ownerDocument,mt=D?D.nodeType:9;if(N=N||[],typeof L!="string"||!L||mt!==1&&mt!==9&&mt!==11)return N;if(!H&&(Is(D),D=D||_,R)){if(mt!==11&&(Y=Ve.exec(L)))if($=Y[1]){if(mt===9)if(X=D.getElementById($)){if(X.id===$)return A.call(N,X),N}else return N;else if(ht&&(X=ht.getElementById($))&&Ct.contains(D,X)&&X.id===$)return A.call(N,X),N}else{if(Y[2])return A.apply(N,D.getElementsByTagName(L)),N;if(($=Y[3])&&D.getElementsByClassName)return A.apply(N,D.getElementsByClassName($)),N}if(!ie[L+" "]&&(!I||!I.test(L))){if(at=L,ht=D,mt===1&&(Rf.test(L)||Ro.test(L))){for(ht=Pf.test(L)&&Mf(D.parentNode)||D,(ht!=D||!E.scope)&&((Q=D.getAttribute("id"))?Q=p.escapeSelector(Q):D.setAttribute("id",Q=z)),gt=Mo(L),G=gt.length;G--;)gt[G]=(Q?"#"+Q:":scope")+" "+Nc(gt[G]);at=gt.join(",")}try{return A.apply(N,ht.querySelectorAll(at)),N}catch(st){ie(L,!0)}finally{Q===z&&D.removeAttribute("id")}}}return im(L.replace(St,"$1"),D,N,H)}function Fc(){var L=[];function D(N,H){return L.push(N+" ")>h.cacheLength&&delete D[L.shift()],D[N+" "]=H}return D}function si(L){return L[z]=!0,L}function Gr(L){var D=_.createElement("fieldset");try{return!!L(D)}catch(N){return!1}finally{D.parentNode&&D.parentNode.removeChild(D),D=null}}function uy(L){return function(D){return K(D,"input")&&D.type===L}}function dy(L){return function(D){return(K(D,"input")||K(D,"button"))&&D.type===L}}function tm(L){return function(D){return"form"in D?D.parentNode&&D.disabled===!1?"label"in D?"label"in D.parentNode?D.parentNode.disabled===L:D.disabled===L:D.isDisabled===L||D.isDisabled!==!L&&hy(D)===L:D.disabled===L:"label"in D?D.disabled===L:!1}}function yn(L){return si(function(D){return D=+D,si(function(N,H){for(var $,G=L([],N.length,D),X=G.length;X--;)N[$=G[X]]&&(N[$]=!(H[$]=N[$]))})})}function Mf(L){return L&&typeof L.getElementsByTagName<"u"&&L}function Is(L){var D,N=L?L.ownerDocument||L:tt;return N==_||N.nodeType!==9||!N.documentElement||(_=N,P=_.documentElement,R=!p.isXMLDoc(_),B=P.matches||P.webkitMatchesSelector||P.msMatchesSelector,P.msMatchesSelector&&tt!=_&&(D=_.defaultView)&&D.top!==D&&D.addEventListener("unload",ly),E.getById=Gr(function(H){return P.appendChild(H).id=p.expando,!_.getElementsByName||!_.getElementsByName(p.expando).length}),E.disconnectedMatch=Gr(function(H){return B.call(H,"*")}),E.scope=Gr(function(){return _.querySelectorAll(":scope")}),E.cssHas=Gr(function(){try{return _.querySelector(":has(*,:jqfake)"),!1}catch(H){return!0}}),E.getById?(h.filter.ID=function(H){var $=H.replace(Gi,Xi);return function(G){return G.getAttribute("id")===$}},h.find.ID=function(H,$){if(typeof $.getElementById<"u"&&R){var G=$.getElementById(H);return G?[G]:[]}}):(h.filter.ID=function(H){var $=H.replace(Gi,Xi);return function(G){var X=typeof G.getAttributeNode<"u"&&G.getAttributeNode("id");return X&&X.value===$}},h.find.ID=function(H,$){if(typeof $.getElementById<"u"&&R){var G,X,Q,Y=$.getElementById(H);if(Y){if(G=Y.getAttributeNode("id"),G&&G.value===H)return[Y];for(Q=$.getElementsByName(H),X=0;Y=Q[X++];)if(G=Y.getAttributeNode("id"),G&&G.value===H)return[Y]}return[]}}),h.find.TAG=function(H,$){return typeof $.getElementsByTagName<"u"?$.getElementsByTagName(H):$.querySelectorAll(H)},h.find.CLASS=function(H,$){if(typeof $.getElementsByClassName<"u"&&R)return $.getElementsByClassName(H)},I=[],Gr(function(H){var $;P.appendChild(H).innerHTML="<a id='"+z+"' href='' disabled='disabled'></a><select id='"+z+"-\r\\' disabled='disabled'><option selected=''></option></select>",H.querySelectorAll("[selected]").length||I.push("\\["+et+"*(?:value|"+vi+")"),H.querySelectorAll("[id~="+z+"-]").length||I.push("~="),H.querySelectorAll("a#"+z+"+*").length||I.push(".#.+[+~]"),H.querySelectorAll(":checked").length||I.push(":checked"),$=_.createElement("input"),$.setAttribute("type","hidden"),H.appendChild($).setAttribute("name","D"),P.appendChild(H).disabled=!0,H.querySelectorAll(":disabled").length!==2&&I.push(":enabled",":disabled"),$=_.createElement("input"),$.setAttribute("name",""),H.appendChild($),H.querySelectorAll("[name='']").length||I.push("\\["+et+"*name"+et+"*="+et+"*(?:''|\"\")")}),E.cssHas||I.push(":has"),I=I.length&&new RegExp(I.join("|")),Ut=function(H,$){if(H===$)return y=!0,0;var G=!H.compareDocumentPosition-!$.compareDocumentPosition;return G||(G=(H.ownerDocument||H)==($.ownerDocument||$)?H.compareDocumentPosition($):1,G&1||!E.sortDetached&&$.compareDocumentPosition(H)===G?H===_||H.ownerDocument==tt&&Ct.contains(tt,H)?-1:$===_||$.ownerDocument==tt&&Ct.contains(tt,$)?1:g?c.call(g,H)-c.call(g,$):0:G&4?-1:1)}),_}Ct.matches=function(L,D){return Ct(L,null,null,D)},Ct.matchesSelector=function(L,D){if(Is(L),R&&!ie[D+" "]&&(!I||!I.test(D)))try{var N=B.call(L,D);if(N||E.disconnectedMatch||L.document&&L.document.nodeType!==11)return N}catch(H){ie(D,!0)}return Ct(D,_,null,[L]).length>0},Ct.contains=function(L,D){return(L.ownerDocument||L)!=_&&Is(L),p.contains(L,D)},Ct.attr=function(L,D){(L.ownerDocument||L)!=_&&Is(L);var N=h.attrHandle[D.toLowerCase()],H=N&&b.call(h.attrHandle,D.toLowerCase())?N(L,D,!R):void 0;return H!==void 0?H:L.getAttribute(D)},Ct.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},p.uniqueSort=function(L){var D,N=[],H=0,$=0;if(y=!E.sortStable,g=!E.sortStable&&n.call(L,0),rt.call(L,Ut),y){for(;D=L[$++];)D===L[$]&&(H=N.push($));for(;H--;)Ft.call(L,N[H],1)}return g=null,L},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(n.apply(this)))},h=p.expr={cacheLength:50,createPseudo:si,match:wi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(Gi,Xi),L[3]=(L[3]||L[4]||L[5]||"").replace(Gi,Xi),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||Ct.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&Ct.error(L[0]),L},PSEUDO:function(L){var D,N=!L[6]&&L[2];return wi.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":N&&Ai.test(N)&&(D=Mo(N,!0))&&(D=N.indexOf(")",N.length-D)-N.length)&&(L[0]=L[0].slice(0,D),L[2]=N.slice(0,D)),L.slice(0,3))}},filter:{TAG:function(L){var D=L.replace(Gi,Xi).toLowerCase();return L==="*"?function(){return!0}:function(N){return K(N,D)}},CLASS:function(L){var D=lt[L+" "];return D||(D=new RegExp("(^|"+et+")"+L+"("+et+"|$)"))&&lt(L,function(N){return D.test(typeof N.className=="string"&&N.className||typeof N.getAttribute<"u"&&N.getAttribute("class")||"")})},ATTR:function(L,D,N){return function(H){var $=Ct.attr(H,L);return $==null?D==="!=":D?($+="",D==="="?$===N:D==="!="?$!==N:D==="^="?N&&$.indexOf(N)===0:D==="*="?N&&$.indexOf(N)>-1:D==="$="?N&&$.slice(-N.length)===N:D==="~="?(" "+$.replace(_t," ")+" ").indexOf(N)>-1:D==="|="?$===N||$.slice(0,N.length+1)===N+"-":!1):!0}},CHILD:function(L,D,N,H,$){var G=L.slice(0,3)!=="nth",X=L.slice(-4)!=="last",Q=D==="of-type";return H===1&&$===0?function(Y){return!!Y.parentNode}:function(Y,gt,at){var ht,mt,st,It,Ce,de=G!==X?"nextSibling":"previousSibling",Ge=Y.parentNode,_i=Q&&Y.nodeName.toLowerCase(),Xr=!at&&!Q,be=!1;if(Ge){if(G){for(;de;){for(st=Y;st=st[de];)if(Q?K(st,_i):st.nodeType===1)return!1;Ce=de=L==="only"&&!Ce&&"nextSibling"}return!0}if(Ce=[X?Ge.firstChild:Ge.lastChild],X&&Xr){for(mt=Ge[z]||(Ge[z]={}),ht=mt[L]||[],It=ht[0]===O&&ht[1],be=It&&ht[2],st=It&&Ge.childNodes[It];st=++It&&st&&st[de]||(be=It=0)||Ce.pop();)if(st.nodeType===1&&++be&&st===Y){mt[L]=[O,It,be];break}}else if(Xr&&(mt=Y[z]||(Y[z]={}),ht=mt[L]||[],It=ht[0]===O&&ht[1],be=It),be===!1)for(;(st=++It&&st&&st[de]||(be=It=0)||Ce.pop())&&!((Q?K(st,_i):st.nodeType===1)&&++be&&(Xr&&(mt=st[z]||(st[z]={}),mt[L]=[O,be]),st===Y)););return be-=$,be===H||be%H===0&&be/H>=0}}},PSEUDO:function(L,D){var N,H=h.pseudos[L]||h.setFilters[L.toLowerCase()]||Ct.error("unsupported pseudo: "+L);return H[z]?H(D):H.length>1?(N=[L,L,"",D],h.setFilters.hasOwnProperty(L.toLowerCase())?si(function($,G){for(var X,Q=H($,D),Y=Q.length;Y--;)X=c.call($,Q[Y]),$[X]=!(G[X]=Q[Y])}):function($){return H($,0,N)}):H}},pseudos:{not:si(function(L){var D=[],N=[],H=Nf(L.replace(St,"$1"));return H[z]?si(function($,G,X,Q){for(var Y,gt=H($,null,Q,[]),at=$.length;at--;)(Y=gt[at])&&($[at]=!(G[at]=Y))}):function($,G,X){return D[0]=$,H(D,null,X,N),D[0]=null,!N.pop()}}),has:si(function(L){return function(D){return Ct(L,D).length>0}}),contains:si(function(L){return L=L.replace(Gi,Xi),function(D){return(D.textContent||p.text(D)).indexOf(L)>-1}}),lang:si(function(L){return Po.test(L||"")||Ct.error("unsupported lang: "+L),L=L.replace(Gi,Xi).toLowerCase(),function(D){var N;do if(N=R?D.lang:D.getAttribute("xml:lang")||D.getAttribute("lang"))return N=N.toLowerCase(),N===L||N.indexOf(L+"-")===0;while((D=D.parentNode)&&D.nodeType===1);return!1}}),target:function(L){var D=t.location&&t.location.hash;return D&&D.slice(1)===L.id},root:function(L){return L===P},focus:function(L){return L===cy()&&_.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:tm(!1),disabled:tm(!0),checked:function(L){return K(L,"input")&&!!L.checked||K(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!h.pseudos.empty(L)},header:function(L){return Ds.test(L.nodeName)},input:function(L){return Ms.test(L.nodeName)},button:function(L){return K(L,"input")&&L.type==="button"||K(L,"button")},text:function(L){var D;return K(L,"input")&&L.type==="text"&&((D=L.getAttribute("type"))==null||D.toLowerCase()==="text")},first:yn(function(){return[0]}),last:yn(function(L,D){return[D-1]}),eq:yn(function(L,D,N){return[N<0?N+D:N]}),even:yn(function(L,D){for(var N=0;N<D;N+=2)L.push(N);return L}),odd:yn(function(L,D){for(var N=1;N<D;N+=2)L.push(N);return L}),lt:yn(function(L,D,N){var H;for(N<0?H=N+D:N>D?H=D:H=N;--H>=0;)L.push(H);return L}),gt:yn(function(L,D,N){for(var H=N<0?N+D:N;++H<D;)L.push(H);return L})}},h.pseudos.nth=h.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[r]=uy(r);for(r in{submit:!0,reset:!0})h.pseudos[r]=dy(r);function em(){}em.prototype=h.filters=h.pseudos,h.setFilters=new em;function Mo(L,D){var N,H,$,G,X,Q,Y,gt=At[L+" "];if(gt)return D?0:gt.slice(0);for(X=L,Q=[],Y=h.preFilter;X;){(!N||(H=Bt.exec(X)))&&(H&&(X=X.slice(H[0].length)||X),Q.push($=[])),N=!1,(H=Ro.exec(X))&&(N=H.shift(),$.push({value:N,type:H[0].replace(St," ")}),X=X.slice(N.length));for(G in h.filter)(H=wi[G].exec(X))&&(!Y[G]||(H=Y[G](H)))&&(N=H.shift(),$.push({value:N,type:G,matches:H}),X=X.slice(N.length));if(!N)break}return D?X.length:X?Ct.error(L):At(L,Q).slice(0)}function Nc(L){for(var D=0,N=L.length,H="";D<N;D++)H+=L[D].value;return H}function Oc(L,D,N){var H=D.dir,$=D.next,G=$||H,X=N&&G==="parentNode",Q=V++;return D.first?function(Y,gt,at){for(;Y=Y[H];)if(Y.nodeType===1||X)return L(Y,gt,at);return!1}:function(Y,gt,at){var ht,mt,st=[O,Q];if(at){for(;Y=Y[H];)if((Y.nodeType===1||X)&&L(Y,gt,at))return!0}else for(;Y=Y[H];)if(Y.nodeType===1||X)if(mt=Y[z]||(Y[z]={}),$&&K(Y,$))Y=Y[H]||Y;else{if((ht=mt[G])&&ht[0]===O&&ht[1]===Q)return st[2]=ht[2];if(mt[G]=st,st[2]=L(Y,gt,at))return!0}return!1}}function Df(L){return L.length>1?function(D,N,H){for(var $=L.length;$--;)if(!L[$](D,N,H))return!1;return!0}:L[0]}function fy(L,D,N){for(var H=0,$=D.length;H<$;H++)Ct(L,D[H],N);return N}function Hc(L,D,N,H,$){for(var G,X=[],Q=0,Y=L.length,gt=D!=null;Q<Y;Q++)(G=L[Q])&&(!N||N(G,H,$))&&(X.push(G),gt&&D.push(Q));return X}function If(L,D,N,H,$,G){return H&&!H[z]&&(H=If(H)),$&&!$[z]&&($=If($,G)),si(function(X,Q,Y,gt){var at,ht,mt,st,It=[],Ce=[],de=Q.length,Ge=X||fy(D||"*",Y.nodeType?[Y]:Y,[]),_i=L&&(X||!D)?Hc(Ge,It,L,Y,gt):Ge;if(N?(st=$||(X?L:de||H)?[]:Q,N(_i,st,Y,gt)):st=_i,H)for(at=Hc(st,Ce),H(at,[],Y,gt),ht=at.length;ht--;)(mt=at[ht])&&(st[Ce[ht]]=!(_i[Ce[ht]]=mt));if(X){if($||L){if($){for(at=[],ht=st.length;ht--;)(mt=st[ht])&&at.push(_i[ht]=mt);$(null,st=[],at,gt)}for(ht=st.length;ht--;)(mt=st[ht])&&(at=$?c.call(X,mt):It[ht])>-1&&(X[at]=!(Q[at]=mt))}}else st=Hc(st===Q?st.splice(de,st.length):st),$?$(null,Q,st,gt):A.apply(Q,st)})}function Ff(L){for(var D,N,H,$=L.length,G=h.relative[L[0].type],X=G||h.relative[" "],Q=G?1:0,Y=Oc(function(ht){return ht===D},X,!0),gt=Oc(function(ht){return c.call(D,ht)>-1},X,!0),at=[function(ht,mt,st){var It=!G&&(st||mt!=u)||((D=mt).nodeType?Y(ht,mt,st):gt(ht,mt,st));return D=null,It}];Q<$;Q++)if(N=h.relative[L[Q].type])at=[Oc(Df(at),N)];else{if(N=h.filter[L[Q].type].apply(null,L[Q].matches),N[z]){for(H=++Q;H<$&&!h.relative[L[H].type];H++);return If(Q>1&&Df(at),Q>1&&Nc(L.slice(0,Q-1).concat({value:L[Q-2].type===" "?"*":""})).replace(St,"$1"),N,Q<H&&Ff(L.slice(Q,H)),H<$&&Ff(L=L.slice(H)),H<$&&Nc(L))}at.push(N)}return Df(at)}function py(L,D){var N=D.length>0,H=L.length>0,$=function(G,X,Q,Y,gt){var at,ht,mt,st=0,It="0",Ce=G&&[],de=[],Ge=u,_i=G||H&&h.find.TAG("*",gt),Xr=O+=Ge==null?1:Math.random()||.1,be=_i.length;for(gt&&(u=X==_||X||gt);It!==be&&(at=_i[It])!=null;It++){if(H&&at){for(ht=0,!X&&at.ownerDocument!=_&&(Is(at),Q=!R);mt=L[ht++];)if(mt(at,X||_,Q)){A.call(Y,at);break}gt&&(O=Xr)}N&&((at=!mt&&at)&&st--,G&&Ce.push(at))}if(st+=It,N&&It!==st){for(ht=0;mt=D[ht++];)mt(Ce,de,X,Q);if(G){if(st>0)for(;It--;)Ce[It]||de[It]||(de[It]=bt.call(Y));de=Hc(de)}A.apply(Y,de),gt&&!G&&de.length>0&&st+D.length>1&&p.uniqueSort(Y)}return gt&&(O=Xr,u=Ge),Ce};return N?si($):$}function Nf(L,D){var N,H=[],$=[],G=ft[L+" "];if(!G){for(D||(D=Mo(L)),N=D.length;N--;)G=Ff(D[N]),G[z]?H.push(G):$.push(G);G=ft(L,py($,H)),G.selector=L}return G}function im(L,D,N,H){var $,G,X,Q,Y,gt=typeof L=="function"&&L,at=!H&&Mo(L=gt.selector||L);if(N=N||[],at.length===1){if(G=at[0]=at[0].slice(0),G.length>2&&(X=G[0]).type==="ID"&&D.nodeType===9&&R&&h.relative[G[1].type]){if(D=(h.find.ID(X.matches[0].replace(Gi,Xi),D)||[])[0],D)gt&&(D=D.parentNode);else return N;L=L.slice(G.shift().value.length)}for($=wi.needsContext.test(L)?0:G.length;$--&&(X=G[$],!h.relative[Q=X.type]);)if((Y=h.find[Q])&&(H=Y(X.matches[0].replace(Gi,Xi),Pf.test(G[0].type)&&Mf(D.parentNode)||D))){if(G.splice($,1),L=H.length&&Nc(G),!L)return A.apply(N,H),N;break}}return(gt||Nf(L,at))(H,D,!R,N,!D||Pf.test(L)&&Mf(D.parentNode)||D),N}E.sortStable=z.split("").sort(Ut).join("")===z,Is(),E.sortDetached=Gr(function(L){return L.compareDocumentPosition(_.createElement("fieldset"))&1}),p.find=Ct,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,Ct.compile=Nf,Ct.select=im,Ct.setDocument=Is,Ct.tokenize=Mo,Ct.escape=p.escapeSelector,Ct.getText=p.text,Ct.isXML=p.isXMLDoc,Ct.selectors=p.expr,Ct.support=p.support,Ct.uniqueSort=p.uniqueSort})();var ei=function(r,h,u){for(var g=[],y=u!==void 0;(r=r[h])&&r.nodeType!==9;)if(r.nodeType===1){if(y&&p(r).is(u))break;g.push(r)}return g},pn=function(r,h){for(var u=[];r;r=r.nextSibling)r.nodeType===1&&r!==h&&u.push(r);return u},Wi=p.expr.match.needsContext,ue=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function qt(r,h,u){return T(h)?p.grep(r,function(g,y){return!!h.call(g,y,g)!==u}):h.nodeType?p.grep(r,function(g){return g===h!==u}):typeof h!="string"?p.grep(r,function(g){return c.call(h,g)>-1!==u}):p.filter(h,r,u)}p.filter=function(r,h,u){var g=h[0];return u&&(r=":not("+r+")"),h.length===1&&g.nodeType===1?p.find.matchesSelector(g,r)?[g]:[]:p.find.matches(r,p.grep(h,function(y){return y.nodeType===1}))},p.fn.extend({find:function(r){var h,u,g=this.length,y=this;if(typeof r!="string")return this.pushStack(p(r).filter(function(){for(h=0;h<g;h++)if(p.contains(y[h],this))return!0}));for(u=this.pushStack([]),h=0;h<g;h++)p.find(r,y[h],u);return g>1?p.uniqueSort(u):u},filter:function(r){return this.pushStack(qt(this,r||[],!1))},not:function(r){return this.pushStack(qt(this,r||[],!0))},is:function(r){return!!qt(this,typeof r=="string"&&Wi.test(r)?p(r):r||[],!1).length}});var Ps,Br=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ze=p.fn.init=function(r,h,u){var g,y;if(!r)return this;if(u=u||Ps,typeof r=="string")if(r[0]==="<"&&r[r.length-1]===">"&&r.length>=3?g=[null,r,null]:g=Br.exec(r),g&&(g[1]||!h))if(g[1]){if(h=h instanceof p?h[0]:h,p.merge(this,p.parseHTML(g[1],h&&h.nodeType?h.ownerDocument||h:k,!0)),ue.test(g[1])&&p.isPlainObject(h))for(g in h)T(this[g])?this[g](h[g]):this.attr(g,h[g]);return this}else return y=k.getElementById(g[2]),y&&(this[0]=y,this.length=1),this;else return!h||h.jquery?(h||u).find(r):this.constructor(h).find(r);else{if(r.nodeType)return this[0]=r,this.length=1,this;if(T(r))return u.ready!==void 0?u.ready(r):r(p)}return p.makeArray(r,this)};ze.prototype=p.fn,Ps=p(k);var Ht=/^(?:parents|prev(?:Until|All))/,Tc={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(r){var h=p(r,this),u=h.length;return this.filter(function(){for(var g=0;g<u;g++)if(p.contains(this,h[g]))return!0})},closest:function(r,h){var u,g=0,y=this.length,A=[],_=typeof r!="string"&&p(r);if(!Wi.test(r)){for(;g<y;g++)for(u=this[g];u&&u!==h;u=u.parentNode)if(u.nodeType<11&&(_?_.index(u)>-1:u.nodeType===1&&p.find.matchesSelector(u,r))){A.push(u);break}}return this.pushStack(A.length>1?p.uniqueSort(A):A)},index:function(r){return r?typeof r=="string"?c.call(p(r),this[0]):c.call(this,r.jquery?r[0]:r):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(r,h){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(r,h))))},addBack:function(r){return this.add(r==null?this.prevObject:this.prevObject.filter(r))}});function We(r,h){for(;(r=r[h])&&r.nodeType!==1;);return r}p.each({parent:function(r){var h=r.parentNode;return h&&h.nodeType!==11?h:null},parents:function(r){return ei(r,"parentNode")},parentsUntil:function(r,h,u){return ei(r,"parentNode",u)},next:function(r){return We(r,"nextSibling")},prev:function(r){return We(r,"previousSibling")},nextAll:function(r){return ei(r,"nextSibling")},prevAll:function(r){return ei(r,"previousSibling")},nextUntil:function(r,h,u){return ei(r,"nextSibling",u)},prevUntil:function(r,h,u){return ei(r,"previousSibling",u)},siblings:function(r){return pn((r.parentNode||{}).firstChild,r)},children:function(r){return pn(r.firstChild)},contents:function(r){return r.contentDocument!=null&&s(r.contentDocument)?r.contentDocument:(K(r,"template")&&(r=r.content||r),p.merge([],r.childNodes))}},function(r,h){p.fn[r]=function(u,g){var y=p.map(this,h,u);return r.slice(-5)!=="Until"&&(g=u),g&&typeof g=="string"&&(y=p.filter(g,y)),this.length>1&&(Tc[r]||p.uniqueSort(y),Ht.test(r)&&y.reverse()),this.pushStack(y)}});var De=/[^\x20\t\r\n\f]+/g;function vv(r){var h={};return p.each(r.match(De)||[],function(u,g){h[g]=!0}),h}p.Callbacks=function(r){r=typeof r=="string"?vv(r):p.extend({},r);var h,u,g,y,A=[],_=[],P=-1,R=function(){for(y=y||r.once,g=h=!0;_.length;P=-1)for(u=_.shift();++P<A.length;)A[P].apply(u[0],u[1])===!1&&r.stopOnFalse&&(P=A.length,u=!1);r.memory||(u=!1),h=!1,y&&(u?A=[]:A="")},I={add:function(){return A&&(u&&!h&&(P=A.length-1,_.push(u)),function B(z){p.each(z,function(O,V){T(V)?(!r.unique||!I.has(V))&&A.push(V):V&&V.length&&q(V)!=="string"&&B(V)})}(arguments),u&&!h&&R()),this},remove:function(){return p.each(arguments,function(B,z){for(var O;(O=p.inArray(z,A,O))>-1;)A.splice(O,1),O<=P&&P--}),this},has:function(B){return B?p.inArray(B,A)>-1:A.length>0},empty:function(){return A&&(A=[]),this},disable:function(){return y=_=[],A=u="",this},disabled:function(){return!A},lock:function(){return y=_=[],!u&&!h&&(A=u=""),this},locked:function(){return!!y},fireWith:function(B,z){return y||(z=z||[],z=[B,z.slice?z.slice():z],_.push(z),h||R()),this},fire:function(){return I.fireWith(this,arguments),this},fired:function(){return!!g}};return I};function jr(r){return r}function kc(r){throw r}function _g(r,h,u,g){var y;try{r&&T(y=r.promise)?y.call(r).done(h).fail(u):r&&T(y=r.then)?y.call(r,h,u):h.apply(void 0,[r].slice(g))}catch(A){u.apply(void 0,[A])}}p.extend({Deferred:function(r){var h=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],u="pending",g={state:function(){return u},always:function(){return y.done(arguments).fail(arguments),this},catch:function(A){return g.then(null,A)},pipe:function(){var A=arguments;return p.Deferred(function(_){p.each(h,function(P,R){var I=T(A[R[4]])&&A[R[4]];y[R[1]](function(){var B=I&&I.apply(this,arguments);B&&T(B.promise)?B.promise().progress(_.notify).done(_.resolve).fail(_.reject):_[R[0]+"With"](this,I?[B]:arguments)})}),A=null}).promise()},then:function(A,_,P){var R=0;function I(B,z,O,V){return function(){var lt=this,At=arguments,ft=function(){var Ut,vi;if(!(B<R)){if(Ut=O.apply(lt,At),Ut===z.promise())throw new TypeError("Thenable self-resolution");vi=Ut&&(typeof Ut=="object"||typeof Ut=="function")&&Ut.then,T(vi)?V?vi.call(Ut,I(R,z,jr,V),I(R,z,kc,V)):(R++,vi.call(Ut,I(R,z,jr,V),I(R,z,kc,V),I(R,z,jr,z.notifyWith))):(O!==jr&&(lt=void 0,At=[Ut]),(V||z.resolveWith)(lt,At))}},ie=V?ft:function(){try{ft()}catch(Ut){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Ut,ie.error),B+1>=R&&(O!==kc&&(lt=void 0,At=[Ut]),z.rejectWith(lt,At))}};B?ie():(p.Deferred.getErrorHook?ie.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(ie.error=p.Deferred.getStackHook()),t.setTimeout(ie))}}return p.Deferred(function(B){h[0][3].add(I(0,B,T(P)?P:jr,B.notifyWith)),h[1][3].add(I(0,B,T(A)?A:jr)),h[2][3].add(I(0,B,T(_)?_:kc))}).promise()},promise:function(A){return A!=null?p.extend(A,g):g}},y={};return p.each(h,function(A,_){var P=_[2],R=_[5];g[_[1]]=P.add,R&&P.add(function(){u=R},h[3-A][2].disable,h[3-A][3].disable,h[0][2].lock,h[0][3].lock),P.add(_[3].fire),y[_[0]]=function(){return y[_[0]+"With"](this===y?void 0:this,arguments),this},y[_[0]+"With"]=P.fireWith}),g.promise(y),r&&r.call(y,y),y},when:function(r){var h=arguments.length,u=h,g=Array(u),y=n.call(arguments),A=p.Deferred(),_=function(P){return function(R){g[P]=this,y[P]=arguments.length>1?n.call(arguments):R,--h||A.resolveWith(g,y)}};if(h<=1&&(_g(r,A.done(_(u)).resolve,A.reject,!h),A.state()==="pending"||T(y[u]&&y[u].then)))return A.then();for(;u--;)_g(y[u],_(u),A.reject);return A.promise()}});var yv=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(r,h){t.console&&t.console.warn&&r&&yv.test(r.name)&&t.console.warn("jQuery.Deferred exception: "+r.message,r.stack,h)},p.readyException=function(r){t.setTimeout(function(){throw r})};var gf=p.Deferred();p.fn.ready=function(r){return gf.then(r).catch(function(h){p.readyException(h)}),this},p.extend({isReady:!1,readyWait:1,ready:function(r){(r===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(r!==!0&&--p.readyWait>0)&&gf.resolveWith(k,[p]))}}),p.ready.then=gf.then;function Lc(){k.removeEventListener("DOMContentLoaded",Lc),t.removeEventListener("load",Lc),p.ready()}k.readyState==="complete"||k.readyState!=="loading"&&!k.documentElement.doScroll?t.setTimeout(p.ready):(k.addEventListener("DOMContentLoaded",Lc),t.addEventListener("load",Lc));var Ui=function(r,h,u,g,y,A,_){var P=0,R=r.length,I=u==null;if(q(u)==="object"){y=!0;for(P in u)Ui(r,h,P,u[P],!0,A,_)}else if(g!==void 0&&(y=!0,T(g)||(_=!0),I&&(_?(h.call(r,g),h=null):(I=h,h=function(B,z,O){return I.call(p(B),O)})),h))for(;P<R;P++)h(r[P],u,_?g:g.call(r[P],P,h(r[P],u)));return y?r:I?h.call(r):R?h(r[0],u):A},Av=/^-ms-/,wv=/-([a-z])/g;function _v(r,h){return h.toUpperCase()}function bi(r){return r.replace(Av,"ms-").replace(wv,_v)}var _o=function(r){return r.nodeType===1||r.nodeType===9||!+r.nodeType};function Eo(){this.expando=p.expando+Eo.uid++}Eo.uid=1,Eo.prototype={cache:function(r){var h=r[this.expando];return h||(h={},_o(r)&&(r.nodeType?r[this.expando]=h:Object.defineProperty(r,this.expando,{value:h,configurable:!0}))),h},set:function(r,h,u){var g,y=this.cache(r);if(typeof h=="string")y[bi(h)]=u;else for(g in h)y[bi(g)]=h[g];return y},get:function(r,h){return h===void 0?this.cache(r):r[this.expando]&&r[this.expando][bi(h)]},access:function(r,h,u){return h===void 0||h&&typeof h=="string"&&u===void 0?this.get(r,h):(this.set(r,h,u),u!==void 0?u:h)},remove:function(r,h){var u,g=r[this.expando];if(g!==void 0){if(h!==void 0)for(Array.isArray(h)?h=h.map(bi):(h=bi(h),h=h in g?[h]:h.match(De)||[]),u=h.length;u--;)delete g[h[u]];(h===void 0||p.isEmptyObject(g))&&(r.nodeType?r[this.expando]=void 0:delete r[this.expando])}},hasData:function(r){var h=r[this.expando];return h!==void 0&&!p.isEmptyObject(h)}};var Z=new Eo,Ee=new Eo,Ev=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xv=/[A-Z]/g;function Sv(r){return r==="true"?!0:r==="false"?!1:r==="null"?null:r===+r+""?+r:Ev.test(r)?JSON.parse(r):r}function Eg(r,h,u){var g;if(u===void 0&&r.nodeType===1)if(g="data-"+h.replace(xv,"-$&").toLowerCase(),u=r.getAttribute(g),typeof u=="string"){try{u=Sv(u)}catch(y){}Ee.set(r,h,u)}else u=void 0;return u}p.extend({hasData:function(r){return Ee.hasData(r)||Z.hasData(r)},data:function(r,h,u){return Ee.access(r,h,u)},removeData:function(r,h){Ee.remove(r,h)},_data:function(r,h,u){return Z.access(r,h,u)},_removeData:function(r,h){Z.remove(r,h)}}),p.fn.extend({data:function(r,h){var u,g,y,A=this[0],_=A&&A.attributes;if(r===void 0){if(this.length&&(y=Ee.get(A),A.nodeType===1&&!Z.get(A,"hasDataAttrs"))){for(u=_.length;u--;)_[u]&&(g=_[u].name,g.indexOf("data-")===0&&(g=bi(g.slice(5)),Eg(A,g,y[g])));Z.set(A,"hasDataAttrs",!0)}return y}return typeof r=="object"?this.each(function(){Ee.set(this,r)}):Ui(this,function(P){var R;if(A&&P===void 0)return R=Ee.get(A,r),R!==void 0||(R=Eg(A,r),R!==void 0)?R:void 0;this.each(function(){Ee.set(this,r,P)})},null,h,arguments.length>1,null,!0)},removeData:function(r){return this.each(function(){Ee.remove(this,r)})}}),p.extend({queue:function(r,h,u){var g;if(r)return h=(h||"fx")+"queue",g=Z.get(r,h),u&&(!g||Array.isArray(u)?g=Z.access(r,h,p.makeArray(u)):g.push(u)),g||[]},dequeue:function(r,h){h=h||"fx";var u=p.queue(r,h),g=u.length,y=u.shift(),A=p._queueHooks(r,h),_=function(){p.dequeue(r,h)};y==="inprogress"&&(y=u.shift(),g--),y&&(h==="fx"&&u.unshift("inprogress"),delete A.stop,y.call(r,_,A)),!g&&A&&A.empty.fire()},_queueHooks:function(r,h){var u=h+"queueHooks";return Z.get(r,u)||Z.access(r,u,{empty:p.Callbacks("once memory").add(function(){Z.remove(r,[h+"queue",u])})})}}),p.fn.extend({queue:function(r,h){var u=2;return typeof r!="string"&&(h=r,r="fx",u--),arguments.length<u?p.queue(this[0],r):h===void 0?this:this.each(function(){var g=p.queue(this,r,h);p._queueHooks(this,r),r==="fx"&&g[0]!=="inprogress"&&p.dequeue(this,r)})},dequeue:function(r){return this.each(function(){p.dequeue(this,r)})},clearQueue:function(r){return this.queue(r||"fx",[])},promise:function(r,h){var u,g=1,y=p.Deferred(),A=this,_=this.length,P=function(){--g||y.resolveWith(A,[A])};for(typeof r!="string"&&(h=r,r=void 0),r=r||"fx";_--;)u=Z.get(A[_],r+"queueHooks"),u&&u.empty&&(g++,u.empty.add(P));return P(),y.promise(h)}});var xg=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xo=new RegExp("^(?:([+-])=|)("+xg+")([a-z%]*)$","i"),Vi=["Top","Right","Bottom","Left"],gn=k.documentElement,qr=function(r){return p.contains(r.ownerDocument,r)},Cv={composed:!0};gn.getRootNode&&(qr=function(r){return p.contains(r.ownerDocument,r)||r.getRootNode(Cv)===r.ownerDocument});var Rc=function(r,h){return r=h||r,r.style.display==="none"||r.style.display===""&&qr(r)&&p.css(r,"display")==="none"};function Sg(r,h,u,g){var y,A,_=20,P=g?function(){return g.cur()}:function(){return p.css(r,h,"")},R=P(),I=u&&u[3]||(p.cssNumber[h]?"":"px"),B=r.nodeType&&(p.cssNumber[h]||I!=="px"&&+R)&&xo.exec(p.css(r,h));if(B&&B[3]!==I){for(R=R/2,I=I||B[3],B=+R||1;_--;)p.style(r,h,B+I),(1-A)*(1-(A=P()/R||.5))<=0&&(_=0),B=B/A;B=B*2,p.style(r,h,B+I),u=u||[]}return u&&(B=+B||+R||0,y=u[1]?B+(u[1]+1)*u[2]:+u[2],g&&(g.unit=I,g.start=B,g.end=y)),y}var Cg={};function Tv(r){var h,u=r.ownerDocument,g=r.nodeName,y=Cg[g];return y||(h=u.body.appendChild(u.createElement(g)),y=p.css(h,"display"),h.parentNode.removeChild(h),y==="none"&&(y="block"),Cg[g]=y,y)}function $r(r,h){for(var u,g,y=[],A=0,_=r.length;A<_;A++)g=r[A],g.style&&(u=g.style.display,h?(u==="none"&&(y[A]=Z.get(g,"display")||null,y[A]||(g.style.display="")),g.style.display===""&&Rc(g)&&(y[A]=Tv(g))):u!=="none"&&(y[A]="none",Z.set(g,"display",u)));for(A=0;A<_;A++)y[A]!=null&&(r[A].style.display=y[A]);return r}p.fn.extend({show:function(){return $r(this,!0)},hide:function(){return $r(this)},toggle:function(r){return typeof r=="boolean"?r?this.show():this.hide():this.each(function(){Rc(this)?p(this).show():p(this).hide()})}});var So=/^(?:checkbox|radio)$/i,Tg=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,kg=/^$|^module$|\/(?:java|ecma)script/i;(function(){var r=k.createDocumentFragment(),h=r.appendChild(k.createElement("div")),u=k.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),h.appendChild(u),E.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",E.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",E.option=!!h.lastChild})();var Ue={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ue.tbody=Ue.tfoot=Ue.colgroup=Ue.caption=Ue.thead,Ue.th=Ue.td,E.option||(Ue.optgroup=Ue.option=[1,"<select multiple='multiple'>","</select>"]);function xe(r,h){var u;return typeof r.getElementsByTagName<"u"?u=r.getElementsByTagName(h||"*"):typeof r.querySelectorAll<"u"?u=r.querySelectorAll(h||"*"):u=[],h===void 0||h&&K(r,h)?p.merge([r],u):u}function mf(r,h){for(var u=0,g=r.length;u<g;u++)Z.set(r[u],"globalEval",!h||Z.get(h[u],"globalEval"))}var kv=/<|&#?\w+;/;function Lg(r,h,u,g,y){for(var A,_,P,R,I,B,z=h.createDocumentFragment(),O=[],V=0,lt=r.length;V<lt;V++)if(A=r[V],A||A===0)if(q(A)==="object")p.merge(O,A.nodeType?[A]:A);else if(!kv.test(A))O.push(h.createTextNode(A));else{for(_=_||z.appendChild(h.createElement("div")),P=(Tg.exec(A)||["",""])[1].toLowerCase(),R=Ue[P]||Ue._default,_.innerHTML=R[1]+p.htmlPrefilter(A)+R[2],B=R[0];B--;)_=_.lastChild;p.merge(O,_.childNodes),_=z.firstChild,_.textContent=""}for(z.textContent="",V=0;A=O[V++];){if(g&&p.inArray(A,g)>-1){y&&y.push(A);continue}if(I=qr(A),_=xe(z.appendChild(A),"script"),I&&mf(_),u)for(B=0;A=_[B++];)kg.test(A.type||"")&&u.push(A)}return z}var Rg=/^([^.]*)(?:\.(.+)|)/;function zr(){return!0}function Wr(){return!1}function bf(r,h,u,g,y,A){var _,P;if(typeof h=="object"){typeof u!="string"&&(g=g||u,u=void 0);for(P in h)bf(r,P,u,g,h[P],A);return r}if(g==null&&y==null?(y=u,g=u=void 0):y==null&&(typeof u=="string"?(y=g,g=void 0):(y=g,g=u,u=void 0)),y===!1)y=Wr;else if(!y)return r;return A===1&&(_=y,y=function(R){return p().off(R),_.apply(this,arguments)},y.guid=_.guid||(_.guid=p.guid++)),r.each(function(){p.event.add(this,h,y,g,u)})}p.event={global:{},add:function(r,h,u,g,y){var A,_,P,R,I,B,z,O,V,lt,At,ft=Z.get(r);if(_o(r))for(u.handler&&(A=u,u=A.handler,y=A.selector),y&&p.find.matchesSelector(gn,y),u.guid||(u.guid=p.guid++),(R=ft.events)||(R=ft.events=Object.create(null)),(_=ft.handle)||(_=ft.handle=function(ie){return typeof p<"u"&&p.event.triggered!==ie.type?p.event.dispatch.apply(r,arguments):void 0}),h=(h||"").match(De)||[""],I=h.length;I--;)P=Rg.exec(h[I])||[],V=At=P[1],lt=(P[2]||"").split(".").sort(),V&&(z=p.event.special[V]||{},V=(y?z.delegateType:z.bindType)||V,z=p.event.special[V]||{},B=p.extend({type:V,origType:At,data:g,handler:u,guid:u.guid,selector:y,needsContext:y&&p.expr.match.needsContext.test(y),namespace:lt.join(".")},A),(O=R[V])||(O=R[V]=[],O.delegateCount=0,(!z.setup||z.setup.call(r,g,lt,_)===!1)&&r.addEventListener&&r.addEventListener(V,_)),z.add&&(z.add.call(r,B),B.handler.guid||(B.handler.guid=u.guid)),y?O.splice(O.delegateCount++,0,B):O.push(B),p.event.global[V]=!0)},remove:function(r,h,u,g,y){var A,_,P,R,I,B,z,O,V,lt,At,ft=Z.hasData(r)&&Z.get(r);if(!(!ft||!(R=ft.events))){for(h=(h||"").match(De)||[""],I=h.length;I--;){if(P=Rg.exec(h[I])||[],V=At=P[1],lt=(P[2]||"").split(".").sort(),!V){for(V in R)p.event.remove(r,V+h[I],u,g,!0);continue}for(z=p.event.special[V]||{},V=(g?z.delegateType:z.bindType)||V,O=R[V]||[],P=P[2]&&new RegExp("(^|\\.)"+lt.join("\\.(?:.*\\.|)")+"(\\.|$)"),_=A=O.length;A--;)B=O[A],(y||At===B.origType)&&(!u||u.guid===B.guid)&&(!P||P.test(B.namespace))&&(!g||g===B.selector||g==="**"&&B.selector)&&(O.splice(A,1),B.selector&&O.delegateCount--,z.remove&&z.remove.call(r,B));_&&!O.length&&((!z.teardown||z.teardown.call(r,lt,ft.handle)===!1)&&p.removeEvent(r,V,ft.handle),delete R[V])}p.isEmptyObject(R)&&Z.remove(r,"handle events")}},dispatch:function(r){var h,u,g,y,A,_,P=new Array(arguments.length),R=p.event.fix(r),I=(Z.get(this,"events")||Object.create(null))[R.type]||[],B=p.event.special[R.type]||{};for(P[0]=R,h=1;h<arguments.length;h++)P[h]=arguments[h];if(R.delegateTarget=this,!(B.preDispatch&&B.preDispatch.call(this,R)===!1)){for(_=p.event.handlers.call(this,R,I),h=0;(y=_[h++])&&!R.isPropagationStopped();)for(R.currentTarget=y.elem,u=0;(A=y.handlers[u++])&&!R.isImmediatePropagationStopped();)(!R.rnamespace||A.namespace===!1||R.rnamespace.test(A.namespace))&&(R.handleObj=A,R.data=A.data,g=((p.event.special[A.origType]||{}).handle||A.handler).apply(y.elem,P),g!==void 0&&(R.result=g)===!1&&(R.preventDefault(),R.stopPropagation()));return B.postDispatch&&B.postDispatch.call(this,R),R.result}},handlers:function(r,h){var u,g,y,A,_,P=[],R=h.delegateCount,I=r.target;if(R&&I.nodeType&&!(r.type==="click"&&r.button>=1)){for(;I!==this;I=I.parentNode||this)if(I.nodeType===1&&!(r.type==="click"&&I.disabled===!0)){for(A=[],_={},u=0;u<R;u++)g=h[u],y=g.selector+" ",_[y]===void 0&&(_[y]=g.needsContext?p(y,this).index(I)>-1:p.find(y,this,null,[I]).length),_[y]&&A.push(g);A.length&&P.push({elem:I,handlers:A})}}return I=this,R<h.length&&P.push({elem:I,handlers:h.slice(R)}),P},addProp:function(r,h){Object.defineProperty(p.Event.prototype,r,{enumerable:!0,configurable:!0,get:T(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[r]},set:function(u){Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(r){return r[p.expando]?r:new p.Event(r)},special:{load:{noBubble:!0},click:{setup:function(r){var h=this||r;return So.test(h.type)&&h.click&&K(h,"input")&&Pc(h,"click",!0),!1},trigger:function(r){var h=this||r;return So.test(h.type)&&h.click&&K(h,"input")&&Pc(h,"click"),!0},_default:function(r){var h=r.target;return So.test(h.type)&&h.click&&K(h,"input")&&Z.get(h,"click")||K(h,"a")}},beforeunload:{postDispatch:function(r){r.result!==void 0&&r.originalEvent&&(r.originalEvent.returnValue=r.result)}}}};function Pc(r,h,u){if(!u){Z.get(r,h)===void 0&&p.event.add(r,h,zr);return}Z.set(r,h,!1),p.event.add(r,h,{namespace:!1,handler:function(g){var y,A=Z.get(this,h);if(g.isTrigger&1&&this[h]){if(A)(p.event.special[h]||{}).delegateType&&g.stopPropagation();else if(A=n.call(arguments),Z.set(this,h,A),this[h](),y=Z.get(this,h),Z.set(this,h,!1),A!==y)return g.stopImmediatePropagation(),g.preventDefault(),y}else A&&(Z.set(this,h,p.event.trigger(A[0],A.slice(1),this)),g.stopPropagation(),g.isImmediatePropagationStopped=zr)}})}p.removeEvent=function(r,h,u){r.removeEventListener&&r.removeEventListener(h,u)},p.Event=function(r,h){if(!(this instanceof p.Event))return new p.Event(r,h);r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented||r.defaultPrevented===void 0&&r.returnValue===!1?zr:Wr,this.target=r.target&&r.target.nodeType===3?r.target.parentNode:r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget):this.type=r,h&&p.extend(this,h),this.timeStamp=r&&r.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Wr,isPropagationStopped:Wr,isImmediatePropagationStopped:Wr,isSimulated:!1,preventDefault:function(){var r=this.originalEvent;this.isDefaultPrevented=zr,r&&!this.isSimulated&&r.preventDefault()},stopPropagation:function(){var r=this.originalEvent;this.isPropagationStopped=zr,r&&!this.isSimulated&&r.stopPropagation()},stopImmediatePropagation:function(){var r=this.originalEvent;this.isImmediatePropagationStopped=zr,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(r,h){function u(g){if(k.documentMode){var y=Z.get(this,"handle"),A=p.event.fix(g);A.type=g.type==="focusin"?"focus":"blur",A.isSimulated=!0,y(g),A.target===A.currentTarget&&y(A)}else p.event.simulate(h,g.target,p.event.fix(g))}p.event.special[r]={setup:function(){var g;if(Pc(this,r,!0),k.documentMode)g=Z.get(this,h),g||this.addEventListener(h,u),Z.set(this,h,(g||0)+1);else return!1},trigger:function(){return Pc(this,r),!0},teardown:function(){var g;if(k.documentMode)g=Z.get(this,h)-1,g?Z.set(this,h,g):(this.removeEventListener(h,u),Z.remove(this,h));else return!1},_default:function(g){return Z.get(g.target,r)},delegateType:h},p.event.special[h]={setup:function(){var g=this.ownerDocument||this.document||this,y=k.documentMode?this:g,A=Z.get(y,h);A||(k.documentMode?this.addEventListener(h,u):g.addEventListener(r,u,!0)),Z.set(y,h,(A||0)+1)},teardown:function(){var g=this.ownerDocument||this.document||this,y=k.documentMode?this:g,A=Z.get(y,h)-1;A?Z.set(y,h,A):(k.documentMode?this.removeEventListener(h,u):g.removeEventListener(r,u,!0),Z.remove(y,h))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(r,h){p.event.special[r]={delegateType:h,bindType:h,handle:function(u){var g,y=this,A=u.relatedTarget,_=u.handleObj;return(!A||A!==y&&!p.contains(y,A))&&(u.type=_.origType,g=_.handler.apply(this,arguments),u.type=h),g}}}),p.fn.extend({on:function(r,h,u,g){return bf(this,r,h,u,g)},one:function(r,h,u,g){return bf(this,r,h,u,g,1)},off:function(r,h,u){var g,y;if(r&&r.preventDefault&&r.handleObj)return g=r.handleObj,p(r.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler),this;if(typeof r=="object"){for(y in r)this.off(y,h,r[y]);return this}return(h===!1||typeof h=="function")&&(u=h,h=void 0),u===!1&&(u=Wr),this.each(function(){p.event.remove(this,r,u,h)})}});var Lv=/<script|<style|<link/i,Rv=/checked\s*(?:[^=]|=\s*.checked.)/i,Pv=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pg(r,h){return K(r,"table")&&K(h.nodeType!==11?h:h.firstChild,"tr")&&p(r).children("tbody")[0]||r}function Mv(r){return r.type=(r.getAttribute("type")!==null)+"/"+r.type,r}function Dv(r){return(r.type||"").slice(0,5)==="true/"?r.type=r.type.slice(5):r.removeAttribute("type"),r}function Mg(r,h){var u,g,y,A,_,P,R;if(h.nodeType===1){if(Z.hasData(r)&&(A=Z.get(r),R=A.events,R)){Z.remove(h,"handle events");for(y in R)for(u=0,g=R[y].length;u<g;u++)p.event.add(h,y,R[y][u])}Ee.hasData(r)&&(_=Ee.access(r),P=p.extend({},_),Ee.set(h,P))}}function Iv(r,h){var u=h.nodeName.toLowerCase();u==="input"&&So.test(r.type)?h.checked=r.checked:(u==="input"||u==="textarea")&&(h.defaultValue=r.defaultValue)}function Ur(r,h,u,g){h=o(h);var y,A,_,P,R,I,B=0,z=r.length,O=z-1,V=h[0],lt=T(V);if(lt||z>1&&typeof V=="string"&&!E.checkClone&&Rv.test(V))return r.each(function(At){var ft=r.eq(At);lt&&(h[0]=V.call(this,At,ft.html())),Ur(ft,h,u,g)});if(z&&(y=Lg(h,r[0].ownerDocument,!1,r,g),A=y.firstChild,y.childNodes.length===1&&(y=A),A||g)){for(_=p.map(xe(y,"script"),Mv),P=_.length;B<z;B++)R=y,B!==O&&(R=p.clone(R,!0,!0),P&&p.merge(_,xe(R,"script"))),u.call(r[B],R,B);if(P)for(I=_[_.length-1].ownerDocument,p.map(_,Dv),B=0;B<P;B++)R=_[B],kg.test(R.type||"")&&!Z.access(R,"globalEval")&&p.contains(I,R)&&(R.src&&(R.type||"").toLowerCase()!=="module"?p._evalUrl&&!R.noModule&&p._evalUrl(R.src,{nonce:R.nonce||R.getAttribute("nonce")},I):F(R.textContent.replace(Pv,""),R,I))}return r}function Dg(r,h,u){for(var g,y=h?p.filter(h,r):r,A=0;(g=y[A])!=null;A++)!u&&g.nodeType===1&&p.cleanData(xe(g)),g.parentNode&&(u&&qr(g)&&mf(xe(g,"script")),g.parentNode.removeChild(g));return r}p.extend({htmlPrefilter:function(r){return r},clone:function(r,h,u){var g,y,A,_,P=r.cloneNode(!0),R=qr(r);if(!E.noCloneChecked&&(r.nodeType===1||r.nodeType===11)&&!p.isXMLDoc(r))for(_=xe(P),A=xe(r),g=0,y=A.length;g<y;g++)Iv(A[g],_[g]);if(h)if(u)for(A=A||xe(r),_=_||xe(P),g=0,y=A.length;g<y;g++)Mg(A[g],_[g]);else Mg(r,P);return _=xe(P,"script"),_.length>0&&mf(_,!R&&xe(r,"script")),P},cleanData:function(r){for(var h,u,g,y=p.event.special,A=0;(u=r[A])!==void 0;A++)if(_o(u)){if(h=u[Z.expando]){if(h.events)for(g in h.events)y[g]?p.event.remove(u,g):p.removeEvent(u,g,h.handle);u[Z.expando]=void 0}u[Ee.expando]&&(u[Ee.expando]=void 0)}}}),p.fn.extend({detach:function(r){return Dg(this,r,!0)},remove:function(r){return Dg(this,r)},text:function(r){return Ui(this,function(h){return h===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=h)})},null,r,arguments.length)},append:function(){return Ur(this,arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=Pg(this,r);h.appendChild(r)}})},prepend:function(){return Ur(this,arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var h=Pg(this,r);h.insertBefore(r,h.firstChild)}})},before:function(){return Ur(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this)})},after:function(){return Ur(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling)})},empty:function(){for(var r,h=0;(r=this[h])!=null;h++)r.nodeType===1&&(p.cleanData(xe(r,!1)),r.textContent="");return this},clone:function(r,h){return r=r==null?!1:r,h=h==null?r:h,this.map(function(){return p.clone(this,r,h)})},html:function(r){return Ui(this,function(h){var u=this[0]||{},g=0,y=this.length;if(h===void 0&&u.nodeType===1)return u.innerHTML;if(typeof h=="string"&&!Lv.test(h)&&!Ue[(Tg.exec(h)||["",""])[1].toLowerCase()]){h=p.htmlPrefilter(h);try{for(;g<y;g++)u=this[g]||{},u.nodeType===1&&(p.cleanData(xe(u,!1)),u.innerHTML=h);u=0}catch(A){}}u&&this.empty().append(h)},null,r,arguments.length)},replaceWith:function(){var r=[];return Ur(this,arguments,function(h){var u=this.parentNode;p.inArray(this,r)<0&&(p.cleanData(xe(this)),u&&u.replaceChild(h,this))},r)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(r,h){p.fn[r]=function(u){for(var g,y=[],A=p(u),_=A.length-1,P=0;P<=_;P++)g=P===_?this:this.clone(!0),p(A[P])[h](g),l.apply(y,g.get());return this.pushStack(y)}});var vf=new RegExp("^("+xg+")(?!px)[a-z%]+$","i"),yf=/^--/,Mc=function(r){var h=r.ownerDocument.defaultView;return(!h||!h.opener)&&(h=t),h.getComputedStyle(r)},Ig=function(r,h,u){var g,y,A={};for(y in h)A[y]=r.style[y],r.style[y]=h[y];g=u.call(r);for(y in h)r.style[y]=A[y];return g},Fv=new RegExp(Vi.join("|"),"i");(function(){function r(){if(I){R.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",I.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gn.appendChild(R).appendChild(I);var B=t.getComputedStyle(I);u=B.top!=="1%",P=h(B.marginLeft)===12,I.style.right="60%",A=h(B.right)===36,g=h(B.width)===36,I.style.position="absolute",y=h(I.offsetWidth/3)===12,gn.removeChild(R),I=null}}function h(B){return Math.round(parseFloat(B))}var u,g,y,A,_,P,R=k.createElement("div"),I=k.createElement("div");I.style&&(I.style.backgroundClip="content-box",I.cloneNode(!0).style.backgroundClip="",E.clearCloneStyle=I.style.backgroundClip==="content-box",p.extend(E,{boxSizingReliable:function(){return r(),g},pixelBoxStyles:function(){return r(),A},pixelPosition:function(){return r(),u},reliableMarginLeft:function(){return r(),P},scrollboxSize:function(){return r(),y},reliableTrDimensions:function(){var B,z,O,V;return _==null&&(B=k.createElement("table"),z=k.createElement("tr"),O=k.createElement("div"),B.style.cssText="position:absolute;left:-11111px;border-collapse:separate",z.style.cssText="box-sizing:content-box;border:1px solid",z.style.height="1px",O.style.height="9px",O.style.display="block",gn.appendChild(B).appendChild(z).appendChild(O),V=t.getComputedStyle(z),_=parseInt(V.height,10)+parseInt(V.borderTopWidth,10)+parseInt(V.borderBottomWidth,10)===z.offsetHeight,gn.removeChild(B)),_}}))})();function Co(r,h,u){var g,y,A,_,P=yf.test(h),R=r.style;return u=u||Mc(r),u&&(_=u.getPropertyValue(h)||u[h],P&&_&&(_=_.replace(St,"$1")||void 0),_===""&&!qr(r)&&(_=p.style(r,h)),!E.pixelBoxStyles()&&vf.test(_)&&Fv.test(h)&&(g=R.width,y=R.minWidth,A=R.maxWidth,R.minWidth=R.maxWidth=R.width=_,_=u.width,R.width=g,R.minWidth=y,R.maxWidth=A)),_!==void 0?_+"":_}function Fg(r,h){return{get:function(){if(r()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var Ng=["Webkit","Moz","ms"],Og=k.createElement("div").style,Hg={};function Nv(r){for(var h=r[0].toUpperCase()+r.slice(1),u=Ng.length;u--;)if(r=Ng[u]+h,r in Og)return r}function Af(r){var h=p.cssProps[r]||Hg[r];return h||(r in Og?r:Hg[r]=Nv(r)||r)}var Ov=/^(none|table(?!-c[ea]).+)/,Hv={position:"absolute",visibility:"hidden",display:"block"},Bg={letterSpacing:"0",fontWeight:"400"};function jg(r,h,u){var g=xo.exec(h);return g?Math.max(0,g[2]-(u||0))+(g[3]||"px"):h}function wf(r,h,u,g,y,A){var _=h==="width"?1:0,P=0,R=0,I=0;if(u===(g?"border":"content"))return 0;for(;_<4;_+=2)u==="margin"&&(I+=p.css(r,u+Vi[_],!0,y)),g?(u==="content"&&(R-=p.css(r,"padding"+Vi[_],!0,y)),u!=="margin"&&(R-=p.css(r,"border"+Vi[_]+"Width",!0,y))):(R+=p.css(r,"padding"+Vi[_],!0,y),u!=="padding"?R+=p.css(r,"border"+Vi[_]+"Width",!0,y):P+=p.css(r,"border"+Vi[_]+"Width",!0,y));return!g&&A>=0&&(R+=Math.max(0,Math.ceil(r["offset"+h[0].toUpperCase()+h.slice(1)]-A-R-P-.5))||0),R+I}function qg(r,h,u){var g=Mc(r),y=!E.boxSizingReliable()||u,A=y&&p.css(r,"boxSizing",!1,g)==="border-box",_=A,P=Co(r,h,g),R="offset"+h[0].toUpperCase()+h.slice(1);if(vf.test(P)){if(!u)return P;P="auto"}return(!E.boxSizingReliable()&&A||!E.reliableTrDimensions()&&K(r,"tr")||P==="auto"||!parseFloat(P)&&p.css(r,"display",!1,g)==="inline")&&r.getClientRects().length&&(A=p.css(r,"boxSizing",!1,g)==="border-box",_=R in r,_&&(P=r[R])),P=parseFloat(P)||0,P+wf(r,h,u||(A?"border":"content"),_,g,P)+"px"}p.extend({cssHooks:{opacity:{get:function(r,h){if(h){var u=Co(r,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(r,h,u,g){if(!(!r||r.nodeType===3||r.nodeType===8||!r.style)){var y,A,_,P=bi(h),R=yf.test(h),I=r.style;if(R||(h=Af(P)),_=p.cssHooks[h]||p.cssHooks[P],u!==void 0){if(A=typeof u,A==="string"&&(y=xo.exec(u))&&y[1]&&(u=Sg(r,h,y),A="number"),u==null||u!==u)return;A==="number"&&!R&&(u+=y&&y[3]||(p.cssNumber[P]?"":"px")),!E.clearCloneStyle&&u===""&&h.indexOf("background")===0&&(I[h]="inherit"),(!_||!("set"in _)||(u=_.set(r,u,g))!==void 0)&&(R?I.setProperty(h,u):I[h]=u)}else return _&&"get"in _&&(y=_.get(r,!1,g))!==void 0?y:I[h]}},css:function(r,h,u,g){var y,A,_,P=bi(h),R=yf.test(h);return R||(h=Af(P)),_=p.cssHooks[h]||p.cssHooks[P],_&&"get"in _&&(y=_.get(r,!0,u)),y===void 0&&(y=Co(r,h,g)),y==="normal"&&h in Bg&&(y=Bg[h]),u===""||u?(A=parseFloat(y),u===!0||isFinite(A)?A||0:y):y}}),p.each(["height","width"],function(r,h){p.cssHooks[h]={get:function(u,g,y){if(g)return Ov.test(p.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Ig(u,Hv,function(){return qg(u,h,y)}):qg(u,h,y)},set:function(u,g,y){var A,_=Mc(u),P=!E.scrollboxSize()&&_.position==="absolute",R=P||y,I=R&&p.css(u,"boxSizing",!1,_)==="border-box",B=y?wf(u,h,y,I,_):0;return I&&P&&(B-=Math.ceil(u["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(_[h])-wf(u,h,"border",!1,_)-.5)),B&&(A=xo.exec(g))&&(A[3]||"px")!=="px"&&(u.style[h]=g,g=p.css(u,h)),jg(u,g,B)}}}),p.cssHooks.marginLeft=Fg(E.reliableMarginLeft,function(r,h){if(h)return(parseFloat(Co(r,"marginLeft"))||r.getBoundingClientRect().left-Ig(r,{marginLeft:0},function(){return r.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(r,h){p.cssHooks[r+h]={expand:function(u){for(var g=0,y={},A=typeof u=="string"?u.split(" "):[u];g<4;g++)y[r+Vi[g]+h]=A[g]||A[g-2]||A[0];return y}},r!=="margin"&&(p.cssHooks[r+h].set=jg)}),p.fn.extend({css:function(r,h){return Ui(this,function(u,g,y){var A,_,P={},R=0;if(Array.isArray(g)){for(A=Mc(u),_=g.length;R<_;R++)P[g[R]]=p.css(u,g[R],!1,A);return P}return y!==void 0?p.style(u,g,y):p.css(u,g)},r,h,arguments.length>1)}});function Se(r,h,u,g,y){return new Se.prototype.init(r,h,u,g,y)}p.Tween=Se,Se.prototype={constructor:Se,init:function(r,h,u,g,y,A){this.elem=r,this.prop=u,this.easing=y||p.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=g,this.unit=A||(p.cssNumber[u]?"":"px")},cur:function(){var r=Se.propHooks[this.prop];return r&&r.get?r.get(this):Se.propHooks._default.get(this)},run:function(r){var h,u=Se.propHooks[this.prop];return this.options.duration?this.pos=h=p.easing[this.easing](r,this.options.duration*r,0,1,this.options.duration):this.pos=h=r,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):Se.propHooks._default.set(this),this}},Se.prototype.init.prototype=Se.prototype,Se.propHooks={_default:{get:function(r){var h;return r.elem.nodeType!==1||r.elem[r.prop]!=null&&r.elem.style[r.prop]==null?r.elem[r.prop]:(h=p.css(r.elem,r.prop,""),!h||h==="auto"?0:h)},set:function(r){p.fx.step[r.prop]?p.fx.step[r.prop](r):r.elem.nodeType===1&&(p.cssHooks[r.prop]||r.elem.style[Af(r.prop)]!=null)?p.style(r.elem,r.prop,r.now+r.unit):r.elem[r.prop]=r.now}}},Se.propHooks.scrollTop=Se.propHooks.scrollLeft={set:function(r){r.elem.nodeType&&r.elem.parentNode&&(r.elem[r.prop]=r.now)}},p.easing={linear:function(r){return r},swing:function(r){return .5-Math.cos(r*Math.PI)/2},_default:"swing"},p.fx=Se.prototype.init,p.fx.step={};var Vr,Dc,Bv=/^(?:toggle|show|hide)$/,jv=/queueHooks$/;function _f(){Dc&&(k.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(_f):t.setTimeout(_f,p.fx.interval),p.fx.tick())}function $g(){return t.setTimeout(function(){Vr=void 0}),Vr=Date.now()}function Ic(r,h){var u,g=0,y={height:r};for(h=h?1:0;g<4;g+=2-h)u=Vi[g],y["margin"+u]=y["padding"+u]=r;return h&&(y.opacity=y.width=r),y}function zg(r,h,u){for(var g,y=(ii.tweeners[h]||[]).concat(ii.tweeners["*"]),A=0,_=y.length;A<_;A++)if(g=y[A].call(u,h,r))return g}function qv(r,h,u){var g,y,A,_,P,R,I,B,z="width"in h||"height"in h,O=this,V={},lt=r.style,At=r.nodeType&&Rc(r),ft=Z.get(r,"fxshow");u.queue||(_=p._queueHooks(r,"fx"),_.unqueued==null&&(_.unqueued=0,P=_.empty.fire,_.empty.fire=function(){_.unqueued||P()}),_.unqueued++,O.always(function(){O.always(function(){_.unqueued--,p.queue(r,"fx").length||_.empty.fire()})}));for(g in h)if(y=h[g],Bv.test(y)){if(delete h[g],A=A||y==="toggle",y===(At?"hide":"show"))if(y==="show"&&ft&&ft[g]!==void 0)At=!0;else continue;V[g]=ft&&ft[g]||p.style(r,g)}if(R=!p.isEmptyObject(h),!(!R&&p.isEmptyObject(V))){z&&r.nodeType===1&&(u.overflow=[lt.overflow,lt.overflowX,lt.overflowY],I=ft&&ft.display,I==null&&(I=Z.get(r,"display")),B=p.css(r,"display"),B==="none"&&(I?B=I:($r([r],!0),I=r.style.display||I,B=p.css(r,"display"),$r([r]))),(B==="inline"||B==="inline-block"&&I!=null)&&p.css(r,"float")==="none"&&(R||(O.done(function(){lt.display=I}),I==null&&(B=lt.display,I=B==="none"?"":B)),lt.display="inline-block")),u.overflow&&(lt.overflow="hidden",O.always(function(){lt.overflow=u.overflow[0],lt.overflowX=u.overflow[1],lt.overflowY=u.overflow[2]})),R=!1;for(g in V)R||(ft?"hidden"in ft&&(At=ft.hidden):ft=Z.access(r,"fxshow",{display:I}),A&&(ft.hidden=!At),At&&$r([r],!0),O.done(function(){At||$r([r]),Z.remove(r,"fxshow");for(g in V)p.style(r,g,V[g])})),R=zg(At?ft[g]:0,g,O),g in ft||(ft[g]=R.start,At&&(R.end=R.start,R.start=0))}}function $v(r,h){var u,g,y,A,_;for(u in r)if(g=bi(u),y=h[g],A=r[u],Array.isArray(A)&&(y=A[1],A=r[u]=A[0]),u!==g&&(r[g]=A,delete r[u]),_=p.cssHooks[g],_&&"expand"in _){A=_.expand(A),delete r[g];for(u in A)u in r||(r[u]=A[u],h[u]=y)}else h[g]=y}function ii(r,h,u){var g,y,A=0,_=ii.prefilters.length,P=p.Deferred().always(function(){delete R.elem}),R=function(){if(y)return!1;for(var z=Vr||$g(),O=Math.max(0,I.startTime+I.duration-z),V=O/I.duration||0,lt=1-V,At=0,ft=I.tweens.length;At<ft;At++)I.tweens[At].run(lt);return P.notifyWith(r,[I,lt,O]),lt<1&&ft?O:(ft||P.notifyWith(r,[I,1,0]),P.resolveWith(r,[I]),!1)},I=P.promise({elem:r,props:p.extend({},h),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},u),originalProperties:h,originalOptions:u,startTime:Vr||$g(),duration:u.duration,tweens:[],createTween:function(z,O){var V=p.Tween(r,I.opts,z,O,I.opts.specialEasing[z]||I.opts.easing);return I.tweens.push(V),V},stop:function(z){var O=0,V=z?I.tweens.length:0;if(y)return this;for(y=!0;O<V;O++)I.tweens[O].run(1);return z?(P.notifyWith(r,[I,1,0]),P.resolveWith(r,[I,z])):P.rejectWith(r,[I,z]),this}}),B=I.props;for($v(B,I.opts.specialEasing);A<_;A++)if(g=ii.prefilters[A].call(I,r,B,I.opts),g)return T(g.stop)&&(p._queueHooks(I.elem,I.opts.queue).stop=g.stop.bind(g)),g;return p.map(B,zg,I),T(I.opts.start)&&I.opts.start.call(r,I),I.progress(I.opts.progress).done(I.opts.done,I.opts.complete).fail(I.opts.fail).always(I.opts.always),p.fx.timer(p.extend(R,{elem:r,anim:I,queue:I.opts.queue})),I}p.Animation=p.extend(ii,{tweeners:{"*":[function(r,h){var u=this.createTween(r,h);return Sg(u.elem,r,xo.exec(h),u),u}]},tweener:function(r,h){T(r)?(h=r,r=["*"]):r=r.match(De);for(var u,g=0,y=r.length;g<y;g++)u=r[g],ii.tweeners[u]=ii.tweeners[u]||[],ii.tweeners[u].unshift(h)},prefilters:[qv],prefilter:function(r,h){h?ii.prefilters.unshift(r):ii.prefilters.push(r)}}),p.speed=function(r,h,u){var g=r&&typeof r=="object"?p.extend({},r):{complete:u||!u&&h||T(r)&&r,duration:r,easing:u&&h||h&&!T(h)&&h};return p.fx.off?g.duration=0:typeof g.duration!="number"&&(g.duration in p.fx.speeds?g.duration=p.fx.speeds[g.duration]:g.duration=p.fx.speeds._default),(g.queue==null||g.queue===!0)&&(g.queue="fx"),g.old=g.complete,g.complete=function(){T(g.old)&&g.old.call(this),g.queue&&p.dequeue(this,g.queue)},g},p.fn.extend({fadeTo:function(r,h,u,g){return this.filter(Rc).css("opacity",0).show().end().animate({opacity:h},r,u,g)},animate:function(r,h,u,g){var y=p.isEmptyObject(r),A=p.speed(h,u,g),_=function(){var P=ii(this,p.extend({},r),A);(y||Z.get(this,"finish"))&&P.stop(!0)};return _.finish=_,y||A.queue===!1?this.each(_):this.queue(A.queue,_)},stop:function(r,h,u){var g=function(y){var A=y.stop;delete y.stop,A(u)};return typeof r!="string"&&(u=h,h=r,r=void 0),h&&this.queue(r||"fx",[]),this.each(function(){var y=!0,A=r!=null&&r+"queueHooks",_=p.timers,P=Z.get(this);if(A)P[A]&&P[A].stop&&g(P[A]);else for(A in P)P[A]&&P[A].stop&&jv.test(A)&&g(P[A]);for(A=_.length;A--;)_[A].elem===this&&(r==null||_[A].queue===r)&&(_[A].anim.stop(u),y=!1,_.splice(A,1));(y||!u)&&p.dequeue(this,r)})},finish:function(r){return r!==!1&&(r=r||"fx"),this.each(function(){var h,u=Z.get(this),g=u[r+"queue"],y=u[r+"queueHooks"],A=p.timers,_=g?g.length:0;for(u.finish=!0,p.queue(this,r,[]),y&&y.stop&&y.stop.call(this,!0),h=A.length;h--;)A[h].elem===this&&A[h].queue===r&&(A[h].anim.stop(!0),A.splice(h,1));for(h=0;h<_;h++)g[h]&&g[h].finish&&g[h].finish.call(this);delete u.finish})}}),p.each(["toggle","show","hide"],function(r,h){var u=p.fn[h];p.fn[h]=function(g,y,A){return g==null||typeof g=="boolean"?u.apply(this,arguments):this.animate(Ic(h,!0),g,y,A)}}),p.each({slideDown:Ic("show"),slideUp:Ic("hide"),slideToggle:Ic("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(r,h){p.fn[r]=function(u,g,y){return this.animate(h,u,g,y)}}),p.timers=[],p.fx.tick=function(){var r,h=0,u=p.timers;for(Vr=Date.now();h<u.length;h++)r=u[h],!r()&&u[h]===r&&u.splice(h--,1);u.length||p.fx.stop(),Vr=void 0},p.fx.timer=function(r){p.timers.push(r),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Dc||(Dc=!0,_f())},p.fx.stop=function(){Dc=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(r,h){return r=p.fx&&p.fx.speeds[r]||r,h=h||"fx",this.queue(h,function(u,g){var y=t.setTimeout(u,r);g.stop=function(){t.clearTimeout(y)}})},function(){var r=k.createElement("input"),h=k.createElement("select"),u=h.appendChild(k.createElement("option"));r.type="checkbox",E.checkOn=r.value!=="",E.optSelected=u.selected,r=k.createElement("input"),r.value="t",r.type="radio",E.radioValue=r.value==="t"}();var Wg,To=p.expr.attrHandle;p.fn.extend({attr:function(r,h){return Ui(this,p.attr,r,h,arguments.length>1)},removeAttr:function(r){return this.each(function(){p.removeAttr(this,r)})}}),p.extend({attr:function(r,h,u){var g,y,A=r.nodeType;if(!(A===3||A===8||A===2)){if(typeof r.getAttribute>"u")return p.prop(r,h,u);if((A!==1||!p.isXMLDoc(r))&&(y=p.attrHooks[h.toLowerCase()]||(p.expr.match.bool.test(h)?Wg:void 0)),u!==void 0){if(u===null){p.removeAttr(r,h);return}return y&&"set"in y&&(g=y.set(r,u,h))!==void 0?g:(r.setAttribute(h,u+""),u)}return y&&"get"in y&&(g=y.get(r,h))!==null?g:(g=p.find.attr(r,h),g==null?void 0:g)}},attrHooks:{type:{set:function(r,h){if(!E.radioValue&&h==="radio"&&K(r,"input")){var u=r.value;return r.setAttribute("type",h),u&&(r.value=u),h}}}},removeAttr:function(r,h){var u,g=0,y=h&&h.match(De);if(y&&r.nodeType===1)for(;u=y[g++];)r.removeAttribute(u)}}),Wg={set:function(r,h,u){return h===!1?p.removeAttr(r,u):r.setAttribute(u,u),u}},p.each(p.expr.match.bool.source.match(/\w+/g),function(r,h){var u=To[h]||p.find.attr;To[h]=function(g,y,A){var _,P,R=y.toLowerCase();return A||(P=To[R],To[R]=_,_=u(g,y,A)!=null?R:null,To[R]=P),_}});var zv=/^(?:input|select|textarea|button)$/i,Wv=/^(?:a|area)$/i;p.fn.extend({prop:function(r,h){return Ui(this,p.prop,r,h,arguments.length>1)},removeProp:function(r){return this.each(function(){delete this[p.propFix[r]||r]})}}),p.extend({prop:function(r,h,u){var g,y,A=r.nodeType;if(!(A===3||A===8||A===2))return(A!==1||!p.isXMLDoc(r))&&(h=p.propFix[h]||h,y=p.propHooks[h]),u!==void 0?y&&"set"in y&&(g=y.set(r,u,h))!==void 0?g:r[h]=u:y&&"get"in y&&(g=y.get(r,h))!==null?g:r[h]},propHooks:{tabIndex:{get:function(r){var h=p.find.attr(r,"tabindex");return h?parseInt(h,10):zv.test(r.nodeName)||Wv.test(r.nodeName)&&r.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),E.optSelected||(p.propHooks.selected={get:function(r){var h=r.parentNode;return h&&h.parentNode&&h.parentNode.selectedIndex,null},set:function(r){var h=r.parentNode;h&&(h.selectedIndex,h.parentNode&&h.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function mn(r){var h=r.match(De)||[];return h.join(" ")}function bn(r){return r.getAttribute&&r.getAttribute("class")||""}function Ef(r){return Array.isArray(r)?r:typeof r=="string"?r.match(De)||[]:[]}p.fn.extend({addClass:function(r){var h,u,g,y,A,_;return T(r)?this.each(function(P){p(this).addClass(r.call(this,P,bn(this)))}):(h=Ef(r),h.length?this.each(function(){if(g=bn(this),u=this.nodeType===1&&" "+mn(g)+" ",u){for(A=0;A<h.length;A++)y=h[A],u.indexOf(" "+y+" ")<0&&(u+=y+" ");_=mn(u),g!==_&&this.setAttribute("class",_)}}):this)},removeClass:function(r){var h,u,g,y,A,_;return T(r)?this.each(function(P){p(this).removeClass(r.call(this,P,bn(this)))}):arguments.length?(h=Ef(r),h.length?this.each(function(){if(g=bn(this),u=this.nodeType===1&&" "+mn(g)+" ",u){for(A=0;A<h.length;A++)for(y=h[A];u.indexOf(" "+y+" ")>-1;)u=u.replace(" "+y+" "," ");_=mn(u),g!==_&&this.setAttribute("class",_)}}):this):this.attr("class","")},toggleClass:function(r,h){var u,g,y,A,_=typeof r,P=_==="string"||Array.isArray(r);return T(r)?this.each(function(R){p(this).toggleClass(r.call(this,R,bn(this),h),h)}):typeof h=="boolean"&&P?h?this.addClass(r):this.removeClass(r):(u=Ef(r),this.each(function(){if(P)for(A=p(this),y=0;y<u.length;y++)g=u[y],A.hasClass(g)?A.removeClass(g):A.addClass(g);else(r===void 0||_==="boolean")&&(g=bn(this),g&&Z.set(this,"__className__",g),this.setAttribute&&this.setAttribute("class",g||r===!1?"":Z.get(this,"__className__")||""))}))},hasClass:function(r){var h,u,g=0;for(h=" "+r+" ";u=this[g++];)if(u.nodeType===1&&(" "+mn(bn(u))+" ").indexOf(h)>-1)return!0;return!1}});var Uv=/\r/g;p.fn.extend({val:function(r){var h,u,g,y=this[0];return arguments.length?(g=T(r),this.each(function(A){var _;this.nodeType===1&&(g?_=r.call(this,A,p(this).val()):_=r,_==null?_="":typeof _=="number"?_+="":Array.isArray(_)&&(_=p.map(_,function(P){return P==null?"":P+""})),h=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!h||!("set"in h)||h.set(this,_,"value")===void 0)&&(this.value=_))})):y?(h=p.valHooks[y.type]||p.valHooks[y.nodeName.toLowerCase()],h&&"get"in h&&(u=h.get(y,"value"))!==void 0?u:(u=y.value,typeof u=="string"?u.replace(Uv,""):u==null?"":u)):void 0}}),p.extend({valHooks:{option:{get:function(r){var h=p.find.attr(r,"value");return h!=null?h:mn(p.text(r))}},select:{get:function(r){var h,u,g,y=r.options,A=r.selectedIndex,_=r.type==="select-one",P=_?null:[],R=_?A+1:y.length;for(A<0?g=R:g=_?A:0;g<R;g++)if(u=y[g],(u.selected||g===A)&&!u.disabled&&(!u.parentNode.disabled||!K(u.parentNode,"optgroup"))){if(h=p(u).val(),_)return h;P.push(h)}return P},set:function(r,h){for(var u,g,y=r.options,A=p.makeArray(h),_=y.length;_--;)g=y[_],(g.selected=p.inArray(p.valHooks.option.get(g),A)>-1)&&(u=!0);return u||(r.selectedIndex=-1),A}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(r,h){if(Array.isArray(h))return r.checked=p.inArray(p(r).val(),h)>-1}},E.checkOn||(p.valHooks[this].get=function(r){return r.getAttribute("value")===null?"on":r.value})});var ko=t.location,Ug={guid:Date.now()},xf=/\?/;p.parseXML=function(r){var h,u;if(!r||typeof r!="string")return null;try{h=new t.DOMParser().parseFromString(r,"text/xml")}catch(g){}return u=h&&h.getElementsByTagName("parsererror")[0],(!h||u)&&p.error("Invalid XML: "+(u?p.map(u.childNodes,function(g){return g.textContent}).join("\n"):r)),h};var Vg=/^(?:focusinfocus|focusoutblur)$/,Gg=function(r){r.stopPropagation()};p.extend(p.event,{trigger:function(r,h,u,g){var y,A,_,P,R,I,B,z,O=[u||k],V=b.call(r,"type")?r.type:r,lt=b.call(r,"namespace")?r.namespace.split("."):[];if(A=z=_=u=u||k,!(u.nodeType===3||u.nodeType===8)&&!Vg.test(V+p.event.triggered)&&(V.indexOf(".")>-1&&(lt=V.split("."),V=lt.shift(),lt.sort()),R=V.indexOf(":")<0&&"on"+V,r=r[p.expando]?r:new p.Event(V,typeof r=="object"&&r),r.isTrigger=g?2:3,r.namespace=lt.join("."),r.rnamespace=r.namespace?new RegExp("(^|\\.)"+lt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=void 0,r.target||(r.target=u),h=h==null?[r]:p.makeArray(h,[r]),B=p.event.special[V]||{},!(!g&&B.trigger&&B.trigger.apply(u,h)===!1))){if(!g&&!B.noBubble&&!M(u)){for(P=B.delegateType||V,Vg.test(P+V)||(A=A.parentNode);A;A=A.parentNode)O.push(A),_=A;_===(u.ownerDocument||k)&&O.push(_.defaultView||_.parentWindow||t)}for(y=0;(A=O[y++])&&!r.isPropagationStopped();)z=A,r.type=y>1?P:B.bindType||V,I=(Z.get(A,"events")||Object.create(null))[r.type]&&Z.get(A,"handle"),I&&I.apply(A,h),I=R&&A[R],I&&I.apply&&_o(A)&&(r.result=I.apply(A,h),r.result===!1&&r.preventDefault());return r.type=V,!g&&!r.isDefaultPrevented()&&(!B._default||B._default.apply(O.pop(),h)===!1)&&_o(u)&&R&&T(u[V])&&!M(u)&&(_=u[R],_&&(u[R]=null),p.event.triggered=V,r.isPropagationStopped()&&z.addEventListener(V,Gg),u[V](),r.isPropagationStopped()&&z.removeEventListener(V,Gg),p.event.triggered=void 0,_&&(u[R]=_)),r.result}},simulate:function(r,h,u){var g=p.extend(new p.Event,u,{type:r,isSimulated:!0});p.event.trigger(g,null,h)}}),p.fn.extend({trigger:function(r,h){return this.each(function(){p.event.trigger(r,h,this)})},triggerHandler:function(r,h){var u=this[0];if(u)return p.event.trigger(r,h,u,!0)}});var Vv=/\[\]$/,Xg=/\r?\n/g,Gv=/^(?:submit|button|image|reset|file)$/i,Xv=/^(?:input|select|textarea|keygen)/i;function Sf(r,h,u,g){var y;if(Array.isArray(h))p.each(h,function(A,_){u||Vv.test(r)?g(r,_):Sf(r+"["+(typeof _=="object"&&_!=null?A:"")+"]",_,u,g)});else if(!u&&q(h)==="object")for(y in h)Sf(r+"["+y+"]",h[y],u,g);else g(r,h)}p.param=function(r,h){var u,g=[],y=function(A,_){var P=T(_)?_():_;g[g.length]=encodeURIComponent(A)+"="+encodeURIComponent(P==null?"":P)};if(r==null)return"";if(Array.isArray(r)||r.jquery&&!p.isPlainObject(r))p.each(r,function(){y(this.name,this.value)});else for(u in r)Sf(u,r[u],h,y);return g.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var r=p.prop(this,"elements");return r?p.makeArray(r):this}).filter(function(){var r=this.type;return this.name&&!p(this).is(":disabled")&&Xv.test(this.nodeName)&&!Gv.test(r)&&(this.checked||!So.test(r))}).map(function(r,h){var u=p(this).val();return u==null?null:Array.isArray(u)?p.map(u,function(g){return{name:h.name,value:g.replace(Xg,"\r\n")}}):{name:h.name,value:u.replace(Xg,"\r\n")}}).get()}});var Yv=/%20/g,Kv=/#.*$/,Qv=/([?&])_=[^&]*/,Jv=/^(.*?):[ \t]*([^\r\n]*)$/mg,Zv=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ty=/^(?:GET|HEAD)$/,ey=/^\/\//,Yg={},Cf={},Kg="*/".concat("*"),Tf=k.createElement("a");Tf.href=ko.href;function Qg(r){return function(h,u){typeof h!="string"&&(u=h,h="*");var g,y=0,A=h.toLowerCase().match(De)||[];if(T(u))for(;g=A[y++];)g[0]==="+"?(g=g.slice(1)||"*",(r[g]=r[g]||[]).unshift(u)):(r[g]=r[g]||[]).push(u)}}function Jg(r,h,u,g){var y={},A=r===Cf;function _(P){var R;return y[P]=!0,p.each(r[P]||[],function(I,B){var z=B(h,u,g);if(typeof z=="string"&&!A&&!y[z])return h.dataTypes.unshift(z),_(z),!1;if(A)return!(R=z)}),R}return _(h.dataTypes[0])||!y["*"]&&_("*")}function kf(r,h){var u,g,y=p.ajaxSettings.flatOptions||{};for(u in h)h[u]!==void 0&&((y[u]?r:g||(g={}))[u]=h[u]);return g&&p.extend(!0,r,g),r}function iy(r,h,u){for(var g,y,A,_,P=r.contents,R=r.dataTypes;R[0]==="*";)R.shift(),g===void 0&&(g=r.mimeType||h.getResponseHeader("Content-Type"));if(g){for(y in P)if(P[y]&&P[y].test(g)){R.unshift(y);break}}if(R[0]in u)A=R[0];else{for(y in u){if(!R[0]||r.converters[y+" "+R[0]]){A=y;break}_||(_=y)}A=A||_}if(A)return A!==R[0]&&R.unshift(A),u[A]}function sy(r,h,u,g){var y,A,_,P,R,I={},B=r.dataTypes.slice();if(B[1])for(_ in r.converters)I[_.toLowerCase()]=r.converters[_];for(A=B.shift();A;)if(r.responseFields[A]&&(u[r.responseFields[A]]=h),!R&&g&&r.dataFilter&&(h=r.dataFilter(h,r.dataType)),R=A,A=B.shift(),A){if(A==="*")A=R;else if(R!=="*"&&R!==A){if(_=I[R+" "+A]||I["* "+A],!_){for(y in I)if(P=y.split(" "),P[1]===A&&(_=I[R+" "+P[0]]||I["* "+P[0]],_)){_===!0?_=I[y]:I[y]!==!0&&(A=P[0],B.unshift(P[1]));break}}if(_!==!0)if(_&&r.throws)h=_(h);else try{h=_(h)}catch(z){return{state:"parsererror",error:_?z:"No conversion from "+R+" to "+A}}}}return{state:"success",data:h}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ko.href,type:"GET",isLocal:Zv.test(ko.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kg,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(r,h){return h?kf(kf(r,p.ajaxSettings),h):kf(p.ajaxSettings,r)},ajaxPrefilter:Qg(Yg),ajaxTransport:Qg(Cf),ajax:function(r,h){typeof r=="object"&&(h=r,r=void 0),h=h||{};var u,g,y,A,_,P,R,I,B,z,O=p.ajaxSetup({},h),V=O.context||O,lt=O.context&&(V.nodeType||V.jquery)?p(V):p.event,At=p.Deferred(),ft=p.Callbacks("once memory"),ie=O.statusCode||{},Ut={},vi={},yi="canceled",vt={readyState:0,getResponseHeader:function(_t){var Bt;if(R){if(!A)for(A={};Bt=Jv.exec(y);)A[Bt[1].toLowerCase()+" "]=(A[Bt[1].toLowerCase()+" "]||[]).concat(Bt[2]);Bt=A[_t.toLowerCase()+" "]}return Bt==null?null:Bt.join(", ")},getAllResponseHeaders:function(){return R?y:null},setRequestHeader:function(_t,Bt){return R==null&&(_t=vi[_t.toLowerCase()]=vi[_t.toLowerCase()]||_t,Ut[_t]=Bt),this},overrideMimeType:function(_t){return R==null&&(O.mimeType=_t),this},statusCode:function(_t){var Bt;if(_t)if(R)vt.always(_t[vt.status]);else for(Bt in _t)ie[Bt]=[ie[Bt],_t[Bt]];return this},abort:function(_t){var Bt=_t||yi;return u&&u.abort(Bt),vn(0,Bt),this}};if(At.promise(vt),O.url=((r||O.url||ko.href)+"").replace(ey,ko.protocol+"//"),O.type=h.method||h.type||O.method||O.type,O.dataTypes=(O.dataType||"*").toLowerCase().match(De)||[""],O.crossDomain==null){P=k.createElement("a");try{P.href=O.url,P.href=P.href,O.crossDomain=Tf.protocol+"//"+Tf.host!=P.protocol+"//"+P.host}catch(_t){O.crossDomain=!0}}if(O.data&&O.processData&&typeof O.data!="string"&&(O.data=p.param(O.data,O.traditional)),Jg(Yg,O,h,vt),R)return vt;I=p.event&&O.global,I&&p.active++===0&&p.event.trigger("ajaxStart"),O.type=O.type.toUpperCase(),O.hasContent=!ty.test(O.type),g=O.url.replace(Kv,""),O.hasContent?O.data&&O.processData&&(O.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(O.data=O.data.replace(Yv,"+")):(z=O.url.slice(g.length),O.data&&(O.processData||typeof O.data=="string")&&(g+=(xf.test(g)?"&":"?")+O.data,delete O.data),O.cache===!1&&(g=g.replace(Qv,"$1"),z=(xf.test(g)?"&":"?")+"_="+Ug.guid+++z),O.url=g+z),O.ifModified&&(p.lastModified[g]&&vt.setRequestHeader("If-Modified-Since",p.lastModified[g]),p.etag[g]&&vt.setRequestHeader("If-None-Match",p.etag[g])),(O.data&&O.hasContent&&O.contentType!==!1||h.contentType)&&vt.setRequestHeader("Content-Type",O.contentType),vt.setRequestHeader("Accept",O.dataTypes[0]&&O.accepts[O.dataTypes[0]]?O.accepts[O.dataTypes[0]]+(O.dataTypes[0]!=="*"?", "+Kg+"; q=0.01":""):O.accepts["*"]);for(B in O.headers)vt.setRequestHeader(B,O.headers[B]);if(O.beforeSend&&(O.beforeSend.call(V,vt,O)===!1||R))return vt.abort();if(yi="abort",ft.add(O.complete),vt.done(O.success),vt.fail(O.error),u=Jg(Cf,O,h,vt),!u)vn(-1,"No Transport");else{if(vt.readyState=1,I&&lt.trigger("ajaxSend",[vt,O]),R)return vt;O.async&&O.timeout>0&&(_=t.setTimeout(function(){vt.abort("timeout")},O.timeout));try{R=!1,u.send(Ut,vn)}catch(_t){if(R)throw _t;vn(-1,_t)}}function vn(_t,Bt,Ro,Rf){var Ai,Po,wi,Ms,Ds,Ve=Bt;R||(R=!0,_&&t.clearTimeout(_),u=void 0,y=Rf||"",vt.readyState=_t>0?4:0,Ai=_t>=200&&_t<300||_t===304,Ro&&(Ms=iy(O,vt,Ro)),!Ai&&p.inArray("script",O.dataTypes)>-1&&p.inArray("json",O.dataTypes)<0&&(O.converters["text script"]=function(){}),Ms=sy(O,Ms,vt,Ai),Ai?(O.ifModified&&(Ds=vt.getResponseHeader("Last-Modified"),Ds&&(p.lastModified[g]=Ds),Ds=vt.getResponseHeader("etag"),Ds&&(p.etag[g]=Ds)),_t===204||O.type==="HEAD"?Ve="nocontent":_t===304?Ve="notmodified":(Ve=Ms.state,Po=Ms.data,wi=Ms.error,Ai=!wi)):(wi=Ve,(_t||!Ve)&&(Ve="error",_t<0&&(_t=0))),vt.status=_t,vt.statusText=(Bt||Ve)+"",Ai?At.resolveWith(V,[Po,Ve,vt]):At.rejectWith(V,[vt,Ve,wi]),vt.statusCode(ie),ie=void 0,I&&lt.trigger(Ai?"ajaxSuccess":"ajaxError",[vt,O,Ai?Po:wi]),ft.fireWith(V,[vt,Ve]),I&&(lt.trigger("ajaxComplete",[vt,O]),--p.active||p.event.trigger("ajaxStop")))}return vt},getJSON:function(r,h,u){return p.get(r,h,u,"json")},getScript:function(r,h){return p.get(r,void 0,h,"script")}}),p.each(["get","post"],function(r,h){p[h]=function(u,g,y,A){return T(g)&&(A=A||y,y=g,g=void 0),p.ajax(p.extend({url:u,type:h,dataType:A,data:g,success:y},p.isPlainObject(u)&&u))}}),p.ajaxPrefilter(function(r){var h;for(h in r.headers)h.toLowerCase()==="content-type"&&(r.contentType=r.headers[h]||"")}),p._evalUrl=function(r,h,u){return p.ajax({url:r,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(g){p.globalEval(g,h,u)}})},p.fn.extend({wrapAll:function(r){var h;return this[0]&&(T(r)&&(r=r.call(this[0])),h=p(r,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(r){return T(r)?this.each(function(h){p(this).wrapInner(r.call(this,h))}):this.each(function(){var h=p(this),u=h.contents();u.length?u.wrapAll(r):h.append(r)})},wrap:function(r){var h=T(r);return this.each(function(u){p(this).wrapAll(h?r.call(this,u):r)})},unwrap:function(r){return this.parent(r).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(r){return!p.expr.pseudos.visible(r)},p.expr.pseudos.visible=function(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(r){}};var ny={0:200,1223:204},Lo=p.ajaxSettings.xhr();E.cors=!!Lo&&"withCredentials"in Lo,E.ajax=Lo=!!Lo,p.ajaxTransport(function(r){var h,u;if(E.cors||Lo&&!r.crossDomain)return{send:function(g,y){var A,_=r.xhr();if(_.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(A in r.xhrFields)_[A]=r.xhrFields[A];r.mimeType&&_.overrideMimeType&&_.overrideMimeType(r.mimeType),!r.crossDomain&&!g["X-Requested-With"]&&(g["X-Requested-With"]="XMLHttpRequest");for(A in g)_.setRequestHeader(A,g[A]);h=function(P){return function(){h&&(h=u=_.onload=_.onerror=_.onabort=_.ontimeout=_.onreadystatechange=null,P==="abort"?_.abort():P==="error"?typeof _.status!="number"?y(0,"error"):y(_.status,_.statusText):y(ny[_.status]||_.status,_.statusText,(_.responseType||"text")!=="text"||typeof _.responseText!="string"?{binary:_.response}:{text:_.responseText},_.getAllResponseHeaders()))}},_.onload=h(),u=_.onerror=_.ontimeout=h("error"),_.onabort!==void 0?_.onabort=u:_.onreadystatechange=function(){_.readyState===4&&t.setTimeout(function(){h&&u()})},h=h("abort");try{_.send(r.hasContent&&r.data||null)}catch(P){if(h)throw P}},abort:function(){h&&h()}}}),p.ajaxPrefilter(function(r){r.crossDomain&&(r.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(r){return p.globalEval(r),r}}}),p.ajaxPrefilter("script",function(r){r.cache===void 0&&(r.cache=!1),r.crossDomain&&(r.type="GET")}),p.ajaxTransport("script",function(r){if(r.crossDomain||r.scriptAttrs){var h,u;return{send:function(g,y){h=p("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",u=function(A){h.remove(),u=null,A&&y(A.type==="error"?404:200,A.type)}),k.head.appendChild(h[0])},abort:function(){u&&u()}}}});var Zg=[],Lf=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var r=Zg.pop()||p.expando+"_"+Ug.guid++;return this[r]=!0,r}}),p.ajaxPrefilter("json jsonp",function(r,h,u){var g,y,A,_=r.jsonp!==!1&&(Lf.test(r.url)?"url":typeof r.data=="string"&&(r.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Lf.test(r.data)&&"data");if(_||r.dataTypes[0]==="jsonp")return g=r.jsonpCallback=T(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,_?r[_]=r[_].replace(Lf,"$1"+g):r.jsonp!==!1&&(r.url+=(xf.test(r.url)?"&":"?")+r.jsonp+"="+g),r.converters["script json"]=function(){return A||p.error(g+" was not called"),A[0]},r.dataTypes[0]="json",y=t[g],t[g]=function(){A=arguments},u.always(function(){y===void 0?p(t).removeProp(g):t[g]=y,r[g]&&(r.jsonpCallback=h.jsonpCallback,Zg.push(g)),A&&T(y)&&y(A[0]),A=y=void 0}),"script"}),E.createHTMLDocument=function(){var r=k.implementation.createHTMLDocument("").body;return r.innerHTML="<form></form><form></form>",r.childNodes.length===2}(),p.parseHTML=function(r,h,u){if(typeof r!="string")return[];typeof h=="boolean"&&(u=h,h=!1);var g,y,A;return h||(E.createHTMLDocument?(h=k.implementation.createHTMLDocument(""),g=h.createElement("base"),g.href=k.location.href,h.head.appendChild(g)):h=k),y=ue.exec(r),A=!u&&[],y?[h.createElement(y[1])]:(y=Lg([r],h,A),A&&A.length&&p(A).remove(),p.merge([],y.childNodes))},p.fn.load=function(r,h,u){var g,y,A,_=this,P=r.indexOf(" ");return P>-1&&(g=mn(r.slice(P)),r=r.slice(0,P)),T(h)?(u=h,h=void 0):h&&typeof h=="object"&&(y="POST"),_.length>0&&p.ajax({url:r,type:y||"GET",dataType:"html",data:h}).done(function(R){A=arguments,_.html(g?p("<div>").append(p.parseHTML(R)).find(g):R)}).always(u&&function(R,I){_.each(function(){u.apply(this,A||[R.responseText,I,R])})}),this},p.expr.pseudos.animated=function(r){return p.grep(p.timers,function(h){return r===h.elem}).length},p.offset={setOffset:function(r,h,u){var g,y,A,_,P,R,I,B=p.css(r,"position"),z=p(r),O={};B==="static"&&(r.style.position="relative"),P=z.offset(),A=p.css(r,"top"),R=p.css(r,"left"),I=(B==="absolute"||B==="fixed")&&(A+R).indexOf("auto")>-1,I?(g=z.position(),_=g.top,y=g.left):(_=parseFloat(A)||0,y=parseFloat(R)||0),T(h)&&(h=h.call(r,u,p.extend({},P))),h.top!=null&&(O.top=h.top-P.top+_),h.left!=null&&(O.left=h.left-P.left+y),"using"in h?h.using.call(r,O):z.css(O)}},p.fn.extend({offset:function(r){if(arguments.length)return r===void 0?this:this.each(function(y){p.offset.setOffset(this,r,y)});var h,u,g=this[0];if(g)return g.getClientRects().length?(h=g.getBoundingClientRect(),u=g.ownerDocument.defaultView,{top:h.top+u.pageYOffset,left:h.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var r,h,u,g=this[0],y={top:0,left:0};if(p.css(g,"position")==="fixed")h=g.getBoundingClientRect();else{for(h=this.offset(),u=g.ownerDocument,r=g.offsetParent||u.documentElement;r&&(r===u.body||r===u.documentElement)&&p.css(r,"position")==="static";)r=r.parentNode;r&&r!==g&&r.nodeType===1&&(y=p(r).offset(),y.top+=p.css(r,"borderTopWidth",!0),y.left+=p.css(r,"borderLeftWidth",!0))}return{top:h.top-y.top-p.css(g,"marginTop",!0),left:h.left-y.left-p.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent;r&&p.css(r,"position")==="static";)r=r.offsetParent;return r||gn})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,h){var u=h==="pageYOffset";p.fn[r]=function(g){return Ui(this,function(y,A,_){var P;if(M(y)?P=y:y.nodeType===9&&(P=y.defaultView),_===void 0)return P?P[h]:y[A];P?P.scrollTo(u?P.pageXOffset:_,u?_:P.pageYOffset):y[A]=_},r,g,arguments.length)}}),p.each(["top","left"],function(r,h){p.cssHooks[h]=Fg(E.pixelPosition,function(u,g){if(g)return g=Co(u,h),vf.test(g)?p(u).position()[h]+"px":g})}),p.each({Height:"height",Width:"width"},function(r,h){p.each({padding:"inner"+r,content:h,"":"outer"+r},function(u,g){p.fn[g]=function(y,A){var _=arguments.length&&(u||typeof y!="boolean"),P=u||(y===!0||A===!0?"margin":"border");return Ui(this,function(R,I,B){var z;return M(R)?g.indexOf("outer")===0?R["inner"+r]:R.document.documentElement["client"+r]:R.nodeType===9?(z=R.documentElement,Math.max(R.body["scroll"+r],z["scroll"+r],R.body["offset"+r],z["offset"+r],z["client"+r])):B===void 0?p.css(R,I,P):p.style(R,I,B,P)},h,_?y:void 0,_)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(r,h){p.fn[h]=function(u){return this.on(h,u)}}),p.fn.extend({bind:function(r,h,u){return this.on(r,null,h,u)},unbind:function(r,h){return this.off(r,null,h)},delegate:function(r,h,u,g){return this.on(h,r,u,g)},undelegate:function(r,h,u){return arguments.length===1?this.off(r,"**"):this.off(h,r||"**",u)},hover:function(r,h){return this.on("mouseenter",r).on("mouseleave",h||r)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(r,h){p.fn[h]=function(u,g){return arguments.length>0?this.on(h,null,u,g):this.trigger(h)}});var ry=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(r,h){var u,g,y;if(typeof h=="string"&&(u=r[h],h=r,r=u),!!T(r))return g=n.call(arguments,2),y=function(){return r.apply(h||this,g.concat(n.call(arguments)))},y.guid=r.guid=r.guid||p.guid++,y},p.holdReady=function(r){r?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=K,p.isFunction=T,p.isWindow=M,p.camelCase=bi,p.type=q,p.now=Date.now,p.isNumeric=function(r){var h=p.type(r);return(h==="number"||h==="string")&&!isNaN(r-parseFloat(r))},p.trim=function(r){return r==null?"":(r+"").replace(ry,"$1")};var ay=t.jQuery,oy=t.$;return p.noConflict=function(r){return t.$===p&&(t.$=oy),r&&t.jQuery===p&&(t.jQuery=ay),p},typeof e>"u"&&(t.jQuery=t.$=p),p})})(xm);var Ty=xm.exports;const nm=vy(Ty);var Jo={};Jo.d=(m,t)=>{for(var e in t)Jo.o(t,e)&&!Jo.o(m,e)&&Object.defineProperty(m,e,{enumerable:!0,get:t[e]})};Jo.o=(m,t)=>Object.prototype.hasOwnProperty.call(m,t);var ot=globalThis.pdfjsLib={};Jo.d(ot,{AbortException:()=>Or,AnnotationEditorLayer:()=>eg,AnnotationEditorParamsType:()=>ct,AnnotationEditorType:()=>wt,AnnotationEditorUIManager:()=>Ir,AnnotationLayer:()=>S0,AnnotationMode:()=>Hs,CMapCompressionType:()=>Uf,ColorPicker:()=>Au,DOMSVGFactory:()=>cg,DrawLayer:()=>rg,FeatureTest:()=>Pe,GlobalWorkerOptions:()=>Ls,ImageKind:()=>Uc,InvalidPDFException:()=>Cm,MissingPDFException:()=>Nr,OPS:()=>ri,Outliner:()=>Np,PDFDataRangeTransport:()=>vb,PDFDateString:()=>Dm,PDFWorker:()=>sa,PasswordResponses:()=>Py,PermissionFlag:()=>Ry,PixelsPerInch:()=>dn,RenderingCancelledException:()=>ug,TextLayer:()=>wo,UnexpectedResponseException:()=>of,Util:()=>J,VerbosityLevel:()=>nf,XfaLayer:()=>Ab,build:()=>r0,createValidAbsoluteUrl:()=>Fy,fetchData:()=>ff,getDocument:()=>KA,getFilenameFromUrl:()=>Uy,getPdfFilenameFromUrl:()=>Vy,getXfaPageViewport:()=>Gy,isDataScheme:()=>dg,isPdfFile:()=>fg,noContextMenu:()=>Me,normalizeUnicode:()=>qy,renderTextLayer:()=>qA,setLayerDimensions:()=>Dr,shadow:()=>xt,updateTextLayer:()=>$A,version:()=>n0});const me=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Sm=[1,0,0,1,0,0],Wf=[.001,0,0,.001,0,0],ky=1e7,Hf=1.35,ti={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Hs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ly="pdfjs_internal_editor_",wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Ry={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},fe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Uc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Do={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nf={ERRORS:0,WARNINGS:1,INFOS:5},Uf={NONE:0,BINARY:1},ri={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Py={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rf=nf.WARNINGS;function My(m){Number.isInteger(m)&&(rf=m)}function Dy(){return rf}function af(m){rf>=nf.INFOS&&console.log("Info: ".concat(m))}function pt(m){rf>=nf.WARNINGS&&console.log("Warning: ".concat(m))}function Rt(m){throw new Error(m)}function Qt(m,t){m||Rt(t)}function Iy(m){switch(m==null?void 0:m.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Fy(m,t=null,e=null){if(!m)return null;try{if(e&&typeof m=="string"){if(e.addDefaultProtocol&&m.startsWith("www.")){const s=m.match(/\./g);(s==null?void 0:s.length)>=2&&(m="http://".concat(m))}if(e.tryConvertEncoding)try{m=jy(m)}catch(s){}}const i=t?new URL(m,t):new URL(m);if(Iy(i))return i}catch(i){}return null}function xt(m,t,e,i=!1){return Object.defineProperty(m,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const fn=function(){function t(e,i){this.constructor===t&&Rt("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class Vf extends fn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gf extends fn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Cm extends fn{constructor(t){super(t,"InvalidPDFException")}}class Nr extends fn{constructor(t){super(t,"MissingPDFException")}}class of extends fn{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Ny extends fn{constructor(t){super(t,"FormatError")}}class Or extends fn{constructor(t){super(t,"AbortException")}}function Tm(m){(typeof m!="object"||(m==null?void 0:m.length)===void 0)&&Rt("Invalid argument for bytesToString");const t=m.length,e=8192;if(t<e)return String.fromCharCode.apply(null,m);const i=[];for(let s=0;s<t;s+=e){const n=Math.min(s+e,t),o=m.subarray(s,n);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function lf(m){typeof m!="string"&&Rt("Invalid argument for stringToBytes");const t=m.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=m.charCodeAt(i)&255;return e}function Oy(m){return String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,m&255)}function lg(m){const t=Object.create(null);for(const[e,i]of m)t[e]=i;return t}function Hy(){const m=new Uint8Array(4);return m[0]=1,new Uint32Array(m.buffer,0,1)[0]===1}function By(){try{return new Function(""),!0}catch(m){return!1}}class Pe{static get isLittleEndian(){return xt(this,"isLittleEndian",Hy())}static get isEvalSupported(){return xt(this,"isEvalSupported",By())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?xt(this,"platform",{isMac:navigator.platform.includes("Mac")}):xt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return xt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Bf=Array.from(Array(256).keys(),m=>m.toString(16).padStart(2,"0"));var na,Vc,il,Xf;class J{static makeHexColor(t,e,i){return"#".concat(Bf[t]).concat(Bf[e]).concat(Bf[i])}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[i,s]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,n=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[s,n]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),n=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],n[0],o[0]),Math.min(i[1],s[1],n[1],o[1]),Math.max(i[0],s[0],n[0],o[0]),Math.max(i[1],s[1],n[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],l=(i+o)/2,c=Math.sqrt((i+o)**2-4*(i*o-n*s))/2,d=l+c||1,f=l-c||1;return[Math.sqrt(d),Math.sqrt(f)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>o?null:[i,n,s,o]}static bezierBoundingBox(t,e,i,s,n,o,l,c,d){return d?(d[0]=Math.min(d[0],t,l),d[1]=Math.min(d[1],e,c),d[2]=Math.max(d[2],t,l),d[3]=Math.max(d[3],e,c)):d=[Math.min(t,l),Math.min(e,c),Math.max(t,l),Math.max(e,c)],S(this,il,Xf).call(this,t,i,n,l,e,s,o,c,3*(-t+3*(i-n)+l),6*(t-2*i+n),3*(i-t),d),S(this,il,Xf).call(this,t,i,n,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),d),d}}na=new WeakSet,Vc=function(t,e,i,s,n,o,l,c,d,f){if(d<=0||d>=1)return;const b=1-d,w=d*d,C=w*d,E=b*(b*(b*t+3*d*e)+3*w*i)+C*s,T=b*(b*(b*n+3*d*o)+3*w*l)+C*c;f[0]=Math.min(f[0],E),f[1]=Math.min(f[1],T),f[2]=Math.max(f[2],E),f[3]=Math.max(f[3],T)},il=new WeakSet,Xf=function(t,e,i,s,n,o,l,c,d,f,b,w){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&S(this,na,Vc).call(this,t,e,i,s,n,o,l,c,-b/f,w);return}const C=f**2-4*b*d;if(C<0)return;const E=Math.sqrt(C),T=2*d;S(this,na,Vc).call(this,t,e,i,s,n,o,l,c,(-f+E)/T,w),S(this,na,Vc).call(this,t,e,i,s,n,o,l,c,(-f-E)/T,w)},v(J,na),v(J,il);function jy(m){return decodeURIComponent(escape(m))}let jf=null,rm=null;function qy(m){return jf||(jf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rm=new Map([["ï¬","Å¿t"]])),m.replaceAll(jf,(t,e,i)=>e?e.normalize("NFKC"):rm.get(i))}function $y(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const m=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(m);else for(let t=0;t<32;t++)m[t]=Math.floor(Math.random()*255);return Tm(m)}const km="pdfjs_internal_id_",Yi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class hf{constructor(){this.constructor===hf&&Rt("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(t=!1){}}class cf{constructor(){this.constructor===cf&&Rt("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Rt("Abstract method `_createCanvas` called.")}}class uf{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===uf&&Rt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?Uf.BINARY:Uf.NONE;return this._fetchData(e,i).catch(s=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(e))})}_fetchData(t,e){Rt("Abstract method `_fetchData` called.")}}class df{constructor({baseUrl:t=null}){this.constructor===df&&Rt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e="".concat(this.baseUrl).concat(t);return this._fetchData(e).catch(i=>{throw new Error("Unable to load font data at: ".concat(e))})}_fetchData(t){Rt("Abstract method `_fetchData` called.")}}class hg{constructor(){this.constructor===hg&&Rt("Cannot initialize BaseSVGFactory.")}create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width","".concat(t,"px")),s.setAttribute("height","".concat(e,"px"))),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox","0 0 ".concat(t," ").concat(e)),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Rt("Abstract method `_createSVG` called.")}}const Qi="http://www.w3.org/2000/svg",En=class En{};ut(En,"CSS",96),ut(En,"PDF",72),ut(En,"PDF_TO_CSS_UNITS",En.CSS/En.PDF);let dn=En;var Cn,xi,is,ke,_u,Tn,Jt,pe,Bs,Yr,js,Kr,ra,Gc,Eu,Lm,sl,Yf,qs,Qr,kn,Oo,Ln,Ho,nl,Kf,Rn,Bo;class zy extends hf{constructor({docId:e,ownerDocument:i=globalThis.document}={}){super();v(this,Jt);v(this,Bs);v(this,js);v(this,ra);v(this,Eu);v(this,sl);v(this,qs);v(this,kn);v(this,Ln);v(this,nl);v(this,Rn);v(this,Cn,void 0);v(this,xi,void 0);v(this,is,void 0);v(this,ke,void 0);v(this,_u,void 0);v(this,Tn,0);x(this,is,e),x(this,ke,i)}addFilter(e){if(!e)return"none";let i=a(this,Jt,pe).get(e);if(i)return i;const[s,n,o]=S(this,ra,Gc).call(this,e),l=e.length===1?s:"".concat(s).concat(n).concat(o);if(i=a(this,Jt,pe).get(l),i)return a(this,Jt,pe).set(e,i),i;const c="g_".concat(a(this,is),"_transfer_map_").concat(Ie(this,Tn)._++),d="url(#".concat(c,")");a(this,Jt,pe).set(e,d),a(this,Jt,pe).set(l,d);const f=S(this,qs,Qr).call(this,c);return S(this,Ln,Ho).call(this,s,n,o,f),d}addHCMFilter(e,i){var E;const s="".concat(e,"-").concat(i),n="base";let o=a(this,Bs,Yr).get(n);if((o==null?void 0:o.key)===s||(o?((E=o.filter)==null||E.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,Bs,Yr).set(n,o)),!e||!i))return o.url;const l=S(this,Rn,Bo).call(this,e);e=J.makeHexColor(...l);const c=S(this,Rn,Bo).call(this,i);if(i=J.makeHexColor(...c),a(this,js,Kr).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const d=new Array(256);for(let T=0;T<=255;T++){const M=T/255;d[T]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const f=d.join(","),b="g_".concat(a(this,is),"_hcm_filter"),w=o.filter=S(this,qs,Qr).call(this,b);S(this,Ln,Ho).call(this,f,f,f,w),S(this,sl,Yf).call(this,w);const C=(T,M)=>{const k=l[T]/255,j=c[T]/255,F=new Array(M+1);for(let q=0;q<=M;q++)F[q]=k+q/M*(j-k);return F.join(",")};return S(this,Ln,Ho).call(this,C(0,5),C(1,5),C(2,5),w),o.url="url(#".concat(b,")"),o.url}addAlphaFilter(e){let i=a(this,Jt,pe).get(e);if(i)return i;const[s]=S(this,ra,Gc).call(this,[e]),n="alpha_".concat(s);if(i=a(this,Jt,pe).get(n),i)return a(this,Jt,pe).set(e,i),i;const o="g_".concat(a(this,is),"_alpha_map_").concat(Ie(this,Tn)._++),l="url(#".concat(o,")");a(this,Jt,pe).set(e,l),a(this,Jt,pe).set(n,l);const c=S(this,qs,Qr).call(this,o);return S(this,nl,Kf).call(this,s,c),l}addLuminosityFilter(e){let i=a(this,Jt,pe).get(e||"luminosity");if(i)return i;let s,n;if(e?([s]=S(this,ra,Gc).call(this,[e]),n="luminosity_".concat(s)):n="luminosity",i=a(this,Jt,pe).get(n),i)return a(this,Jt,pe).set(e,i),i;const o="g_".concat(a(this,is),"_luminosity_map_").concat(Ie(this,Tn)._++),l="url(#".concat(o,")");a(this,Jt,pe).set(e,l),a(this,Jt,pe).set(n,l);const c=S(this,qs,Qr).call(this,o);return S(this,Eu,Lm).call(this,c),e&&S(this,nl,Kf).call(this,s,c),l}addHighlightHCMFilter(e,i,s,n,o){var j;const l="".concat(i,"-").concat(s,"-").concat(n,"-").concat(o);let c=a(this,Bs,Yr).get(e);if((c==null?void 0:c.key)===l||(c?((j=c.filter)==null||j.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,Bs,Yr).set(e,c)),!i||!s))return c.url;const[d,f]=[i,s].map(S(this,Rn,Bo).bind(this));let b=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[C,E]=[n,o].map(S(this,Rn,Bo).bind(this));w<b&&([b,w,C,E]=[w,b,E,C]),a(this,js,Kr).style.color="";const T=(F,q,U)=>{const W=new Array(256),p=(w-b)/U,it=F/255,K=(q-F)/(255*U);let bt=0;for(let rt=0;rt<=U;rt++){const Ft=Math.round(b+rt*p),et=it+rt*K;for(let St=bt;St<=Ft;St++)W[St]=et;bt=Ft+1}for(let rt=bt;rt<256;rt++)W[rt]=W[bt-1];return W.join(",")},M="g_".concat(a(this,is),"_hcm_").concat(e,"_filter"),k=c.filter=S(this,qs,Qr).call(this,M);return S(this,sl,Yf).call(this,k),S(this,Ln,Ho).call(this,T(C[0],E[0],5),T(C[1],E[1],5),T(C[2],E[2],5),k),c.url="url(#".concat(M,")"),c.url}destroy(e=!1){e&&a(this,Bs,Yr).size!==0||(a(this,xi)&&(a(this,xi).parentNode.parentNode.remove(),x(this,xi,null)),a(this,Cn)&&(a(this,Cn).clear(),x(this,Cn,null)),x(this,Tn,0))}}Cn=new WeakMap,xi=new WeakMap,is=new WeakMap,ke=new WeakMap,_u=new WeakMap,Tn=new WeakMap,Jt=new WeakSet,pe=function(){return a(this,Cn)||x(this,Cn,new Map)},Bs=new WeakSet,Yr=function(){return a(this,_u)||x(this,_u,new Map)},js=new WeakSet,Kr=function(){if(!a(this,xi)){const e=a(this,ke).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,ke).createElementNS(Qi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),x(this,xi,a(this,ke).createElementNS(Qi,"defs")),e.append(s),s.append(a(this,xi)),a(this,ke).body.append(e)}return a(this,xi)},ra=new WeakSet,Gc=function(e){if(e.length===1){const d=e[0],f=new Array(256);for(let w=0;w<256;w++)f[w]=d[w]/255;const b=f.join(",");return[b,b,b]}const[i,s,n]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,l[d]=s[d]/255,c[d]=n[d]/255;return[o.join(","),l.join(","),c.join(",")]},Eu=new WeakSet,Lm=function(e){const i=a(this,ke).createElementNS(Qi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},sl=new WeakSet,Yf=function(e){const i=a(this,ke).createElementNS(Qi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},qs=new WeakSet,Qr=function(e){const i=a(this,ke).createElementNS(Qi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,js,Kr).append(i),i},kn=new WeakSet,Oo=function(e,i,s){const n=a(this,ke).createElementNS(Qi,i);n.setAttribute("type","discrete"),n.setAttribute("tableValues",s),e.append(n)},Ln=new WeakSet,Ho=function(e,i,s,n){const o=a(this,ke).createElementNS(Qi,"feComponentTransfer");n.append(o),S(this,kn,Oo).call(this,o,"feFuncR",e),S(this,kn,Oo).call(this,o,"feFuncG",i),S(this,kn,Oo).call(this,o,"feFuncB",s)},nl=new WeakSet,Kf=function(e,i){const s=a(this,ke).createElementNS(Qi,"feComponentTransfer");i.append(s),S(this,kn,Oo).call(this,s,"feFuncA",e)},Rn=new WeakSet,Bo=function(e){return a(this,js,Kr).style.color=e,pg(getComputedStyle(a(this,js,Kr)).getPropertyValue("color"))};class Wy extends cf{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function ff(m,t="text"){if(jo(m,document.baseURI)){const e=await fetch(m);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",m,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Rm extends uf{_fetchData(t,e){return ff(t,this.isCompressed?"arraybuffer":"text").then(i=>({cMapData:i instanceof ArrayBuffer?new Uint8Array(i):lf(i),compressionType:e}))}}class Pm extends df{_fetchData(t){return ff(t,"arraybuffer").then(e=>new Uint8Array(e))}}class cg extends hg{_createSVG(t){return document.createElementNS(Qi,t)}}class Ec{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:n=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,f,b,w;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,f=0,b=0,w=1;break;case 90:d=0,f=1,b=1,w=0;break;case 270:d=0,f=-1,b=-1,w=0;break;case 0:d=1,f=0,b=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(b=-b,w=-w);let C,E,T,M;d===0?(C=Math.abs(c-t[1])*e+s,E=Math.abs(l-t[0])*e+n,T=(t[3]-t[1])*e,M=(t[2]-t[0])*e):(C=Math.abs(l-t[0])*e+s,E=Math.abs(c-t[1])*e+n,T=(t[2]-t[0])*e,M=(t[3]-t[1])*e),this.transform=[d*e,f*e,b*e,w*e,C-d*e*l-b*e*c,E-f*e*l-w*e*c],this.width=T,this.height=M}get rawDims(){const{viewBox:t}=this;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}={}){return new Ec({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){return J.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=J.applyTransform([t[0],t[1]],this.transform),i=J.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return J.applyInverseTransform([t,e],this.transform)}}class ug extends fn{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function dg(m){const t=m.length;let e=0;for(;e<t&&m[e].trim()==="";)e++;return m.substring(e,e+5).toLowerCase()==="data:"}function fg(m){return typeof m=="string"&&/\.pdf$/i.test(m)}function Uy(m){return[m]=m.split(/[#?]/,1),m.substring(m.lastIndexOf("/")+1)}function Vy(m,t="document.pdf"){if(typeof m!="string")return t;if(dg(m))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(m);let n=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(n&&(n=n[0],n.includes("%")))try{n=i.exec(decodeURIComponent(n))[0]}catch(o){}return n||t}class am{constructor(){ut(this,"started",Object.create(null));ut(this,"times",[])}time(t){t in this.started&&pt("Timer is already running for ".concat(t)),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt("Timer has not been started for ".concat(t)),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push("".concat(i.padEnd(e)," ").concat(n-s,"ms\n"));return t.join("")}}function jo(m,t){try{const{protocol:e}=t?new URL(m,t):new URL(m);return e==="http:"||e==="https:"}catch(e){return!1}}function Me(m){m.preventDefault()}function Mm(m){console.log("Deprecated API usage: "+m)}let om;class Dm{static toDateObject(t){if(!t||typeof t!="string")return null;om||(om=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=om.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const d=e[7]||"Z";let f=parseInt(e[8],10);f=f>=0&&f<=23?f:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,d==="-"?(o+=f,l+=b):d==="+"&&(o-=f,l-=b),new Date(Date.UTC(i,s,n,o,l,c))}}function Gy(m,{scale:t=1,rotation:e=0}){const{width:i,height:s}=m.attributes.style,n=[0,0,parseInt(i),parseInt(s)];return new Ec({viewBox:n,scale:t,rotation:e})}function pg(m){if(m.startsWith("#")){const t=parseInt(m.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return m.startsWith("rgb(")?m.slice(4,-1).split(",").map(t=>parseInt(t)):m.startsWith("rgba(")?m.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt('Not a valid color format: "'.concat(m,'"')),[0,0,0])}function Xy(m){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of m.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;m.set(e,pg(i))}t.remove()}function Ot(m){const{a:t,b:e,c:i,d:s,e:n,f:o}=m.getTransform();return[t,e,i,s,n,o]}function Ki(m){const{a:t,b:e,c:i,d:s,e:n,f:o}=m.getTransform().invertSelf();return[t,e,i,s,n,o]}function Dr(m,t,e=!1,i=!0){if(t instanceof Ec){const{pageWidth:s,pageHeight:n}=t.rawDims,{style:o}=m,l=Pe.isCSSRoundSupported,c="var(--scale-factor) * ".concat(s,"px"),d="var(--scale-factor) * ".concat(n,"px"),f=l?"round(".concat(c,", 1px)"):"calc(".concat(c,")"),b=l?"round(".concat(d,", 1px)"):"calc(".concat(d,")");!e||t.rotation%180===0?(o.width=f,o.height=b):(o.width=b,o.height=f)}i&&m.setAttribute("data-main-rotation",t.rotation)}var Pn,Mn,Si,Dn,xu,Im,Su,Fm,Cu,Nm,aa,Xc,Tu,Om,rl,Jf;const ku=class ku{constructor(t){v(this,Su);v(this,Cu);v(this,aa);v(this,Tu);v(this,rl);v(this,Pn,null);v(this,Mn,null);v(this,Si,void 0);v(this,Dn,null);x(this,Si,t)}render(){const t=x(this,Pn,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Me),t.addEventListener("pointerdown",S(ku,xu,Im));const e=x(this,Dn,document.createElement("div"));e.className="buttons",t.append(e);const i=a(this,Si).toolbarPosition;if(i){const{style:s}=t,n=a(this,Si)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd="".concat(100*n,"%"),s.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return S(this,Tu,Om).call(this),t}hide(){var t;a(this,Pn).classList.add("hidden"),(t=a(this,Mn))==null||t.hideDropdown()}show(){a(this,Pn).classList.remove("hidden")}addAltTextButton(t){S(this,aa,Xc).call(this,t),a(this,Dn).prepend(t,a(this,rl,Jf))}addColorPicker(t){x(this,Mn,t);const e=t.renderButton();S(this,aa,Xc).call(this,e),a(this,Dn).prepend(e,a(this,rl,Jf))}remove(){var t;a(this,Pn).remove(),(t=a(this,Mn))==null||t.destroy(),x(this,Mn,null)}};Pn=new WeakMap,Mn=new WeakMap,Si=new WeakMap,Dn=new WeakMap,xu=new WeakSet,Im=function(t){t.stopPropagation()},Su=new WeakSet,Fm=function(t){a(this,Si)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},Cu=new WeakSet,Nm=function(t){a(this,Si)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},aa=new WeakSet,Xc=function(t){t.addEventListener("focusin",S(this,Su,Fm).bind(this),{capture:!0}),t.addEventListener("focusout",S(this,Cu,Nm).bind(this),{capture:!0}),t.addEventListener("contextmenu",Me)},Tu=new WeakSet,Om=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(a(this,Si).editorType,"-button")),S(this,aa,Xc).call(this,t),t.addEventListener("click",e=>{a(this,Si)._uiManager.delete()}),a(this,Dn).append(t)},rl=new WeakSet,Jf=function(){const t=document.createElement("div");return t.className="divider",t},v(ku,xu);let Qf=ku;var al,In,ol,Lu,Hm,Ru,Bm,Pu,jm;class Yy{constructor(t){v(this,Lu);v(this,Ru);v(this,Pu);v(this,al,null);v(this,In,null);v(this,ol,void 0);x(this,ol,t)}show(t,e,i){const[s,n]=S(this,Ru,Bm).call(this,e,i),{style:o}=a(this,In)||x(this,In,S(this,Lu,Hm).call(this));t.append(a(this,In)),o.insetInlineEnd="".concat(100*s,"%"),o.top="calc(".concat(100*n,"% + var(--editor-toolbar-vert-offset))")}hide(){a(this,In).remove()}}al=new WeakMap,In=new WeakMap,ol=new WeakMap,Lu=new WeakSet,Hm=function(){const t=x(this,In,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Me);const e=x(this,al,document.createElement("div"));return e.className="buttons",t.append(e),S(this,Pu,jm).call(this),t},Ru=new WeakSet,Bm=function(t,e){let i=0,s=0;for(const n of t){const o=n.y+n.height;if(o<i)continue;const l=n.x+(e?n.width:0);if(o>i){s=l,i=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,i]},Pu=new WeakSet,jm=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),t.addEventListener("contextmenu",Me),t.addEventListener("click",()=>{a(this,ol).highlightSelection("floating_button")}),a(this,al).append(t)};function mu(m,t,e){for(const i of e)t.addEventListener(i,m[i].bind(m))}function Ky(m){return Math.round(Math.min(255,Math.max(1,255*m))).toString(16).padStart(2,"0")}var Mu;class Qy{constructor(){v(this,Mu,0)}get id(){return"".concat(Ly).concat(Ie(this,Mu)._++)}}Mu=new WeakMap;var ll,Du,Ke,hl,tp;const yg=class yg{constructor(){v(this,hl);v(this,ll,$y());v(this,Du,0);v(this,Ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d"),s=new Image;s.src=t;const n=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",n)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return S(this,hl,tp).call(this,"".concat(e,"_").concat(i,"_").concat(s,"_").concat(n),t)}async getFromUrl(t){return S(this,hl,tp).call(this,t,t)}async getFromId(t){a(this,Ke)||x(this,Ke,new Map);const e=a(this,Ke).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=a(this,Ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){a(this,Ke)||x(this,Ke,new Map);const e=a(this,Ke).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith("image_".concat(a(this,ll),"_"))}};ll=new WeakMap,Du=new WeakMap,Ke=new WeakMap,hl=new WeakSet,tp=async function(t,e){a(this,Ke)||x(this,Ke,new Map);let i=a(this,Ke).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:"image_".concat(a(this,ll),"_").concat(Ie(this,Du)._++),refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await ff(e,"blob")):s=i.file=e,s.type==="image/svg+xml"){const n=yg._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((d,f)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,d()},o.onload=async()=>{const b=i.svgUrl=o.result;l.src=await n?"".concat(b,"#svgView(preserveAspectRatio(none))"):b},l.onerror=o.onerror=f});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){console.error(s),i=null}return a(this,Ke).set(t,i),i&&a(this,Ke).set(i.id,i),i};let Zf=yg;var Zt,$s,cl,te;class Jy{constructor(t=128){v(this,Zt,[]);v(this,$s,!1);v(this,cl,void 0);v(this,te,-1);x(this,cl,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:n=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,$s))return;const c={cmd:t,undo:e,post:i,type:n};if(a(this,te)===-1){a(this,Zt).length>0&&(a(this,Zt).length=0),x(this,te,0),a(this,Zt).push(c);return}if(o&&a(this,Zt)[a(this,te)].type===n){l&&(c.undo=a(this,Zt)[a(this,te)].undo),a(this,Zt)[a(this,te)]=c;return}const d=a(this,te)+1;d===a(this,cl)?a(this,Zt).splice(0,1):(x(this,te,d),d<a(this,Zt).length&&a(this,Zt).splice(d)),a(this,Zt).push(c)}undo(){if(a(this,te)===-1)return;x(this,$s,!0);const{undo:t,post:e}=a(this,Zt)[a(this,te)];t(),e==null||e(),x(this,$s,!1),x(this,te,a(this,te)-1)}redo(){if(a(this,te)<a(this,Zt).length-1){x(this,te,a(this,te)+1),x(this,$s,!0);const{cmd:t,post:e}=a(this,Zt)[a(this,te)];t(),e==null||e(),x(this,$s,!1)}}hasSomethingToUndo(){return a(this,te)!==-1}hasSomethingToRedo(){return a(this,te)<a(this,Zt).length-1}destroy(){x(this,Zt,null)}}Zt=new WeakMap,$s=new WeakMap,cl=new WeakMap,te=new WeakMap;var Iu,qm;class xc{constructor(t){v(this,Iu);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Pe.platform;for(const[i,s,n={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:n}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:n}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(S(this,Iu,qm).call(this,e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(s.bind(t,...o,e)(),n||(e.stopPropagation(),e.preventDefault()))}}Iu=new WeakSet,qm=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Fu=class Fu{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Xy(t),xt(this,"_colors",t)}convert(t){const e=pg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((n,o)=>n===e[o]))return Fu._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?J.makeHexColor(...e):t}};ut(Fu,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ep=Fu;var Oe,Gt,ne,oa,ss,la,ai,ha,Fn,Ci,ns,Nn,ul,dl,Ti,ca,zs,ki,Nu,Ws,fl,On,pl,ua,re,Tt,rs,Hn,gl,ml,bl,vl,yl,Al,wl,_l,El,xl,Sl,Cl,Tl,kl,Us,Li,as,Ll,da,Yc,Ou,$m,Hu,zm,fa,Kc,Bu,Wm,ju,Um,qu,Vm,Rl,ip,Pl,sp,Ml,np,Dl,rp,Il,ap,ae,ve,Ri,Fs,$u,Gm,zu,Xm,Fl,op,Wu,Ym,Bn,qo,Nl,lp;const ea=class ea{constructor(t,e,i,s,n,o,l,c,d){v(this,da);v(this,Ou);v(this,Hu);v(this,fa);v(this,Bu);v(this,ju);v(this,qu);v(this,Rl);v(this,Pl);v(this,Ml);v(this,Dl);v(this,Il);v(this,ae);v(this,Ri);v(this,$u);v(this,zu);v(this,Fl);v(this,Wu);v(this,Bn);v(this,Nl);v(this,Oe,null);v(this,Gt,new Map);v(this,ne,new Map);v(this,oa,null);v(this,ss,null);v(this,la,null);v(this,ai,new Jy);v(this,ha,0);v(this,Fn,new Set);v(this,Ci,null);v(this,ns,null);v(this,Nn,new Set);v(this,ul,!1);v(this,dl,null);v(this,Ti,null);v(this,ca,null);v(this,zs,!1);v(this,ki,null);v(this,Nu,new Qy);v(this,Ws,!1);v(this,fl,!1);v(this,On,null);v(this,pl,null);v(this,ua,null);v(this,re,wt.NONE);v(this,Tt,new Set);v(this,rs,null);v(this,Hn,null);v(this,gl,null);v(this,ml,this.blur.bind(this));v(this,bl,this.focus.bind(this));v(this,vl,this.copy.bind(this));v(this,yl,this.cut.bind(this));v(this,Al,this.paste.bind(this));v(this,wl,this.keydown.bind(this));v(this,_l,this.keyup.bind(this));v(this,El,this.onEditingAction.bind(this));v(this,xl,this.onPageChanging.bind(this));v(this,Sl,this.onScaleChanging.bind(this));v(this,Cl,S(this,Hu,zm).bind(this));v(this,Tl,this.onRotationChanging.bind(this));v(this,kl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});v(this,Us,[0,0]);v(this,Li,null);v(this,as,null);v(this,Ll,null);x(this,as,t),x(this,Ll,e),x(this,oa,i),this._eventBus=s,this._eventBus._on("editingaction",a(this,El)),this._eventBus._on("pagechanging",a(this,xl)),this._eventBus._on("scalechanging",a(this,Sl)),this._eventBus._on("rotationchanging",a(this,Tl)),S(this,Bu,Wm).call(this),S(this,Pl,sp).call(this),x(this,ss,n.annotationStorage),x(this,dl,n.filterFactory),x(this,Hn,o),x(this,ca,l||null),x(this,ul,c),x(this,ua,d||null),this.viewParameters={realScale:dn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=ea.prototype,e=o=>a(o,as).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new xc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,as).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,as).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}destroy(){var t,e;S(this,Ml,np).call(this),S(this,Rl,ip).call(this),this._eventBus._off("editingaction",a(this,El)),this._eventBus._off("pagechanging",a(this,xl)),this._eventBus._off("scalechanging",a(this,Sl)),this._eventBus._off("rotationchanging",a(this,Tl));for(const i of a(this,ne).values())i.destroy();a(this,ne).clear(),a(this,Gt).clear(),a(this,Nn).clear(),x(this,Oe,null),a(this,Tt).clear(),a(this,ai).destroy(),(t=a(this,oa))==null||t.destroy(),(e=a(this,ki))==null||e.hide(),x(this,ki,null),a(this,Ti)&&(clearTimeout(a(this,Ti)),x(this,Ti,null)),a(this,Li)&&(clearTimeout(a(this,Li)),x(this,Li,null)),S(this,ju,Um).call(this)}async mlGuess(t){var e;return((e=a(this,ua))==null?void 0:e.guess(t))||null}get hasMLManager(){return!!a(this,ua)}get hcmFilter(){return xt(this,"hcmFilter",a(this,Hn)?a(this,dl).addHCMFilter(a(this,Hn).foreground,a(this,Hn).background):"none")}get direction(){return xt(this,"direction",getComputedStyle(a(this,as)).direction)}get highlightColors(){return xt(this,"highlightColors",a(this,ca)?new Map(a(this,ca).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){x(this,pl,t)}editAltText(t){var e;(e=a(this,oa))==null||e.editAltText(this,t)}onPageChanging({pageNumber:t}){x(this,ha,t-1)}focusMainContainer(){a(this,as).focus()}findParent(t,e){for(const i of a(this,ne).values()){const{x:s,y:n,width:o,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=n&&e<=n+l)return i}return null}disableUserSelect(t=!1){a(this,Ll).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Nn).add(t)}removeShouldRescale(t){a(this,Nn).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*dn.PDF_TO_CSS_UNITS;for(const e of a(this,Nn))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:o}=e,l=e.toString(),d=S(this,da,Yc).call(this,e).closest(".textLayer"),f=this.getSelectionBoxes(d);if(f){e.empty(),a(this,re)===wt.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:wt.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const b of a(this,ne).values())if(b.hasTextLayer(d)){b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:o,text:l});break}}}addToAnnotationStorage(t){!t.isEmpty()&&a(this,ss)&&!a(this,ss).has(t.id)&&a(this,ss).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,zs)&&(x(this,zs,!1),S(this,fa,Kc).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Tt))if(e.div.contains(t)){x(this,On,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,On))return;const[t,e]=a(this,On);x(this,On,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus()}addEditListeners(){S(this,Pl,sp).call(this),S(this,Dl,rp).call(this)}removeEditListeners(){S(this,Ml,np).call(this),S(this,Il,ap).call(this)}copy(t){var i;if(t.preventDefault(),(i=a(this,Oe))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,Tt)){const n=s.serialize(!0);n&&e.push(n)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const n of e.items)for(const o of a(this,ns))if(o.isHandlingMimeForPasting(n.type)){o.paste(n,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){pt('paste: "'.concat(n.message,'".'));return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const n=[];for(const c of i){const d=s.deserialize(c);if(!d)return;n.push(d)}const o=()=>{for(const c of n)S(this,Fl,op).call(this,c);S(this,Nl,lp).call(this,n)},l=()=>{for(const c of n)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(n){pt('paste: "'.concat(n.message,'".'))}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,re)!==wt.NONE&&!this.isEditorHandlingKeyboard&&ea._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,zs)&&(x(this,zs,!1),S(this,fa,Kc).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(S(this,qu,Vm).call(this),S(this,Dl,rp).call(this),S(this,ae,ve).call(this,{isEditing:a(this,re)!==wt.NONE,isEmpty:S(this,Bn,qo).call(this),hasSomethingToUndo:a(this,ai).hasSomethingToUndo(),hasSomethingToRedo:a(this,ai).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,Rl,ip).call(this),S(this,Il,ap).call(this),S(this,ae,ve).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,ns)){x(this,ns,t);for(const e of a(this,ns))S(this,Ri,Fs).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Nu).id}get currentLayer(){return a(this,ne).get(a(this,ha))}getLayer(t){return a(this,ne).get(t)}get currentPageIndex(){return a(this,ha)}addLayer(t){a(this,ne).set(t.pageIndex,t),a(this,Ws)?t.enable():t.disable()}removeLayer(t){a(this,ne).delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(a(this,re)!==t){if(x(this,re,t),t===wt.NONE){this.setEditingState(!1),S(this,zu,Xm).call(this);return}this.setEditingState(!0),S(this,$u,Gm).call(this),this.unselectAll();for(const s of a(this,ne).values())s.updateMode(t);if(!e&&i){this.addNewEditorFromKeyboard();return}if(e){for(const s of a(this,Gt).values())if(s.annotationElementId===e){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,re)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,ns)){switch(t){case ct.CREATE:this.currentLayer.addNewEditor();return;case ct.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,pl))==null||i.updateColor(e);break;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,gl)||x(this,gl,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of a(this,Tt))s.updateParams(t,e);for(const s of a(this,ns))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var n,o;for(const l of a(this,Gt).values())l.editorType===t&&l.show(e);((o=(n=a(this,gl))==null?void 0:n.get(ct.HIGHLIGHT_SHOW_ALL))!=null?o:!0)!==e&&S(this,Ri,Fs).call(this,[[ct.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,fl)!==t){x(this,fl,t);for(const e of a(this,ne).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,Gt).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,Gt).get(t)}addEditor(t){a(this,Gt).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,Ti)&&clearTimeout(a(this,Ti)),x(this,Ti,setTimeout(()=>{this.focusMainContainer(),x(this,Ti,null)},0))),a(this,Gt).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,Fn).has(t.annotationElementId))&&((e=a(this,ss))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,Fn).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Fn).has(t)}removeDeletedAnnotationElement(t){a(this,Fn).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Oe)!==t&&(x(this,Oe,t),t&&S(this,Ri,Fs).call(this,t.propertiesToUpdate))}updateUI(t){a(this,Wu,Ym)===t&&S(this,Ri,Fs).call(this,t.propertiesToUpdate)}toggleSelected(t){if(a(this,Tt).has(t)){a(this,Tt).delete(t),t.unselect(),S(this,ae,ve).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Tt).add(t),t.select(),S(this,Ri,Fs).call(this,t.propertiesToUpdate),S(this,ae,ve).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of a(this,Tt))e!==t&&e.unselect();a(this,Tt).clear(),a(this,Tt).add(t),t.select(),S(this,Ri,Fs).call(this,t.propertiesToUpdate),S(this,ae,ve).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Tt).has(t)}get firstSelectedEditor(){return a(this,Tt).values().next().value}unselect(t){t.unselect(),a(this,Tt).delete(t),S(this,ae,ve).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Tt).size!==0}get isEnterHandled(){return a(this,Tt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){a(this,ai).undo(),S(this,ae,ve).call(this,{hasSomethingToUndo:a(this,ai).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,Bn,qo).call(this)})}redo(){a(this,ai).redo(),S(this,ae,ve).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ai).hasSomethingToRedo(),isEmpty:S(this,Bn,qo).call(this)})}addCommands(t){a(this,ai).add(t),S(this,ae,ve).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,Bn,qo).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...a(this,Tt)],e=()=>{for(const s of t)s.remove()},i=()=>{for(const s of t)S(this,Fl,op).call(this,s)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Oe))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Oe)||this.hasSelection}selectAll(){for(const t of a(this,Tt))t.commit();S(this,Nl,lp).call(this,a(this,Gt).values())}unselectAll(){if(!(a(this,Oe)&&(a(this,Oe).commitOrRemove(),a(this,re)!==wt.NONE))&&this.hasSelection){for(const t of a(this,Tt))t.unselect();a(this,Tt).clear(),S(this,ae,ve).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Us)[0]+=t,a(this,Us)[1]+=e;const[s,n]=a(this,Us),o=[...a(this,Tt)],l=1e3;a(this,Li)&&clearTimeout(a(this,Li)),x(this,Li,setTimeout(()=>{x(this,Li,null),a(this,Us)[0]=a(this,Us)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Gt).has(c.id)&&c.translateInPage(s,n)},undo:()=>{for(const c of o)a(this,Gt).has(c.id)&&c.translateInPage(-s,-n)},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Ci,new Map);for(const t of a(this,Tt))a(this,Ci).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Ci))return!1;this.disableUserSelect(!1);const t=a(this,Ci);x(this,Ci,null);let e=!1;for(const[{x:s,y:n,pageIndex:o},l]of t)l.newX=s,l.newY=n,l.newPageIndex=o,e||(e=s!==l.savedX||n!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(s,n,o,l)=>{if(a(this,Gt).has(s.id)){const c=a(this,ne).get(l);c?s._setParentAndPosition(c,n,o):(s.pageIndex=l,s.x=n,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:n,newY:o,newPageIndex:l}]of t)i(s,n,o,l)},undo:()=>{for(const[s,{savedX:n,savedY:o,savedPageIndex:l}]of t)i(s,n,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Ci))for(const i of a(this,Ci).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Tt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Oe)===t}getActive(){return a(this,Oe)}getMode(){return a(this,re)}get imageManager(){return xt(this,"imageManager",new Zf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,f=e.rangeCount;d<f;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(d,f,b,w)=>({x:(f-s)/o,y:1-(d+b-i)/n,width:w/o,height:b/n});break;case"180":l=(d,f,b,w)=>({x:1-(d+b-i)/n,y:1-(f+w-s)/o,width:b/n,height:w/o});break;case"270":l=(d,f,b,w)=>({x:1-(f+w-s)/o,y:(d-i)/n,width:w/o,height:b/n});break;default:l=(d,f,b,w)=>({x:(d-i)/n,y:(f-s)/o,width:b/n,height:w/o});break}const c=[];for(let d=0,f=e.rangeCount;d<f;d++){const b=e.getRangeAt(d);if(!b.collapsed)for(const{x:w,y:C,width:E,height:T}of b.getClientRects())E===0||T===0||c.push(l(w,C,E,T))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,la)||x(this,la,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,la))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,la))==null?void 0:s.get(t.data.id);if(!e)return;const i=a(this,ss).getRawValue(e);i&&(a(this,re)===wt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};Oe=new WeakMap,Gt=new WeakMap,ne=new WeakMap,oa=new WeakMap,ss=new WeakMap,la=new WeakMap,ai=new WeakMap,ha=new WeakMap,Fn=new WeakMap,Ci=new WeakMap,ns=new WeakMap,Nn=new WeakMap,ul=new WeakMap,dl=new WeakMap,Ti=new WeakMap,ca=new WeakMap,zs=new WeakMap,ki=new WeakMap,Nu=new WeakMap,Ws=new WeakMap,fl=new WeakMap,On=new WeakMap,pl=new WeakMap,ua=new WeakMap,re=new WeakMap,Tt=new WeakMap,rs=new WeakMap,Hn=new WeakMap,gl=new WeakMap,ml=new WeakMap,bl=new WeakMap,vl=new WeakMap,yl=new WeakMap,Al=new WeakMap,wl=new WeakMap,_l=new WeakMap,El=new WeakMap,xl=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,kl=new WeakMap,Us=new WeakMap,Li=new WeakMap,as=new WeakMap,Ll=new WeakMap,da=new WeakSet,Yc=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Ou=new WeakSet,$m=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=S(this,da,Yc).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,ki)||x(this,ki,new Yy(this)),a(this,ki).show(i,s,this.direction==="ltr"))},Hu=new WeakSet,zm=function(){var n,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,rs)&&((n=a(this,ki))==null||n.hide(),x(this,rs,null),S(this,ae,ve).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,rs))return;if(!S(this,da,Yc).call(this,t).closest(".textLayer")){a(this,rs)&&((o=a(this,ki))==null||o.hide(),x(this,rs,null),S(this,ae,ve).call(this,{hasSelectedText:!1}));return}if((l=a(this,ki))==null||l.hide(),x(this,rs,e),S(this,ae,ve).call(this,{hasSelectedText:!0}),!(a(this,re)!==wt.HIGHLIGHT&&a(this,re)!==wt.NONE)&&(a(this,re)===wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,zs,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=d=>{d.type==="pointerup"&&d.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),d.type==="pointerup"&&S(this,fa,Kc).call(this,"main_toolbar"))};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}},fa=new WeakSet,Kc=function(t=""){a(this,re)===wt.HIGHLIGHT?this.highlightSelection(t):a(this,ul)&&S(this,Ou,$m).call(this)},Bu=new WeakSet,Wm=function(){document.addEventListener("selectionchange",a(this,Cl))},ju=new WeakSet,Um=function(){document.removeEventListener("selectionchange",a(this,Cl))},qu=new WeakSet,Vm=function(){window.addEventListener("focus",a(this,bl)),window.addEventListener("blur",a(this,ml))},Rl=new WeakSet,ip=function(){window.removeEventListener("focus",a(this,bl)),window.removeEventListener("blur",a(this,ml))},Pl=new WeakSet,sp=function(){window.addEventListener("keydown",a(this,wl)),window.addEventListener("keyup",a(this,_l))},Ml=new WeakSet,np=function(){window.removeEventListener("keydown",a(this,wl)),window.removeEventListener("keyup",a(this,_l))},Dl=new WeakSet,rp=function(){document.addEventListener("copy",a(this,vl)),document.addEventListener("cut",a(this,yl)),document.addEventListener("paste",a(this,Al))},Il=new WeakSet,ap=function(){document.removeEventListener("copy",a(this,vl)),document.removeEventListener("cut",a(this,yl)),document.removeEventListener("paste",a(this,Al))},ae=new WeakSet,ve=function(t){Object.entries(t).some(([i,s])=>a(this,kl)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,kl),t)}),a(this,re)===wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,Ri,Fs).call(this,[[ct.HIGHLIGHT_FREE,!0]]))},Ri=new WeakSet,Fs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},$u=new WeakSet,Gm=function(){if(!a(this,Ws)){x(this,Ws,!0);for(const t of a(this,ne).values())t.enable();for(const t of a(this,Gt).values())t.enable()}},zu=new WeakSet,Xm=function(){if(this.unselectAll(),a(this,Ws)){x(this,Ws,!1);for(const t of a(this,ne).values())t.disable();for(const t of a(this,Gt).values())t.disable()}},Fl=new WeakSet,op=function(t){const e=a(this,ne).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Wu=new WeakSet,Ym=function(){let t=null;for(t of a(this,Tt));return t},Bn=new WeakSet,qo=function(){if(a(this,Gt).size===0)return!0;if(a(this,Gt).size===1)for(const t of a(this,Gt).values())return t.isEmpty();return!1},Nl=new WeakSet,lp=function(t){for(const e of a(this,Tt))e.unselect();a(this,Tt).clear();for(const e of t)e.isEmpty()||(a(this,Tt).add(e),e.select());S(this,ae,ve).call(this,{hasSelectedEditor:this.hasSelection})},ut(ea,"TRANSLATE_SMALL",1),ut(ea,"TRANSLATE_BIG",10);let Ir=ea;var os,ls,oi,hs,li,pa,cs,Ol,hp;const Ji=class Ji{constructor(t){v(this,Ol);v(this,os,"");v(this,ls,!1);v(this,oi,null);v(this,hs,null);v(this,li,null);v(this,pa,!1);v(this,cs,null);x(this,cs,t)}static initialize(t){Ji._l10nPromise||(Ji._l10nPromise=t)}async render(){const t=x(this,oi,document.createElement("button"));t.className="altText";const e=await Ji._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",Me),t.addEventListener("pointerdown",s=>s.stopPropagation());const i=s=>{s.preventDefault(),a(this,cs)._uiManager.editAltText(a(this,cs))};return t.addEventListener("click",i,{capture:!0}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(x(this,pa,!0),i(s))}),await S(this,Ol,hp).call(this),t}finish(){a(this,oi)&&(a(this,oi).focus({focusVisible:a(this,pa)}),x(this,pa,!1))}isEmpty(){return!a(this,os)&&!a(this,ls)}get data(){return{altText:a(this,os),decorative:a(this,ls)}}set data({altText:t,decorative:e}){a(this,os)===t&&a(this,ls)===e||(x(this,os,t),x(this,ls,e),S(this,Ol,hp).call(this))}toggle(t=!1){a(this,oi)&&(!t&&a(this,li)&&(clearTimeout(a(this,li)),x(this,li,null)),a(this,oi).disabled=!t)}destroy(){var t;(t=a(this,oi))==null||t.remove(),x(this,oi,null),x(this,hs,null)}};os=new WeakMap,ls=new WeakMap,oi=new WeakMap,hs=new WeakMap,li=new WeakMap,pa=new WeakMap,cs=new WeakMap,Ol=new WeakSet,hp=async function(){var s;const t=a(this,oi);if(!t)return;if(!a(this,os)&&!a(this,ls)){t.classList.remove("done"),(s=a(this,hs))==null||s.remove();return}t.classList.add("done"),Ji._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(n=>{t.setAttribute("aria-label",n)});let e=a(this,hs);if(!e){x(this,hs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const n=e.id="alt-text-tooltip-".concat(a(this,cs).id);t.setAttribute("aria-describedby",n);const o=100;t.addEventListener("mouseenter",()=>{x(this,li,setTimeout(()=>{x(this,li,null),a(this,hs).classList.add("show"),a(this,cs)._reportTelemetry({action:"alt_text_tooltip"})},o))}),t.addEventListener("mouseleave",()=>{var l;a(this,li)&&(clearTimeout(a(this,li)),x(this,li,null)),(l=a(this,hs))==null||l.classList.remove("show")})}e.innerText=a(this,ls)?await Ji._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):a(this,os),e.parentNode||t.append(e);const i=a(this,cs).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},ut(Ji,"_l10nPromise",null);let bu=Ji;var hi,ye,ga,jn,oe,qn,ma,ba,ge,Hl,$n,Vs,Bl,zn,us,Pi,va,ya,Qe,jl,Uu,ql,cp,$l,up,zl,dp,Vu,Km,Gu,Qm,Wl,fp,Ul,pp,Vl,gp,Xu,Jm,Yu,Zm,Ku,tb,Qu,eb,Gl,mp,Wn,$o;const Pt=class Pt{constructor(t){v(this,ql);v(this,zl);v(this,Vu);v(this,Gu);v(this,Wl);v(this,Ul);v(this,Vl);v(this,Xu);v(this,Yu);v(this,Ku);v(this,Qu);v(this,Gl);v(this,Wn);v(this,hi,null);v(this,ye,null);v(this,ga,!1);v(this,jn,!1);v(this,oe,null);v(this,qn,null);v(this,ma,this.focusin.bind(this));v(this,ba,this.focusout.bind(this));v(this,ge,null);v(this,Hl,"");v(this,$n,!1);v(this,Vs,null);v(this,Bl,!1);v(this,zn,!1);v(this,us,!1);v(this,Pi,null);v(this,va,0);v(this,ya,0);v(this,Qe,null);ut(this,"_initialOptions",Object.create(null));ut(this,"_isVisible",!0);ut(this,"_uiManager",null);ut(this,"_focusEventsAllowed",!0);ut(this,"_l10nPromise",null);v(this,jl,!1);v(this,Uu,Pt._zIndex++);this.constructor===Pt&&Rt("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Pt.prototype._resizeWithKeyboard,e=Ir.TRANSLATE_SMALL,i=Ir.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new xc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Pt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Zy({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Pt._l10nPromise||(Pt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(n=>[n,t.get(n.replaceAll(/([A-Z])/g,o=>"-".concat(o.toLowerCase())))]))),i!=null&&i.strings)for(const n of i.strings)Pt._l10nPromise.set(n,t.get(n));if(Pt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Pt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,jl)}set _isDraggable(t){var e;x(this,jl,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Uu)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):S(this,Wn,$o).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,$n)?x(this,$n,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest("#".concat(this.id))||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/o,this.fixAndSetPosition()}translate(t,e){S(this,ql,cp).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Vs)||x(this,Vs,[this.x,this.y]),S(this,ql,cp).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,Vs)||x(this,Vs,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:o}=this;const[l,c]=this.getBaseTranslation();n+=l,o+=c,this.div.style.left="".concat((100*n).toFixed(2),"%"),this.div.style.top="".concat((100*o).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!a(this,Vs)&&(a(this,Vs)[0]!==this.x||a(this,Vs)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Pt,s=i/t,n=i/e;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:s,y:n,width:o,height:l}=this;if(o*=e,l*=i,s*=e,n*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-o,s)),n=Math.max(0,Math.min(i-l,n));break;case 90:s=Math.max(0,Math.min(e-l,s)),n=Math.min(i,Math.max(o,n));break;case 180:s=Math.min(e,Math.max(o,s)),n=Math.min(i,Math.max(l,n));break;case 270:s=Math.min(e,Math.max(l,s)),n=Math.max(0,Math.min(i-o,n));break}this.x=s/=e,this.y=n/=i;const[c,d]=this.getBaseTranslation();s+=c,n+=d;const{style:f}=this.div;f.left="".concat((100*s).toFixed(2),"%"),f.top="".concat((100*n).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,e){var i;return S(i=Pt,$l,up).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return S(i=Pt,$l,up).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,n=i*t;return Pe.isCSSRoundSupported?[Math.round(s),Math.round(n)]:[s,n]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width="".concat((100*t/i).toFixed(2),"%"),a(this,jn)||(this.div.style.height="".concat((100*e/s).toFixed(2),"%"))}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),n=!a(this,jn)&&e.endsWith("%");if(s&&n)return;const[o,l]=this.parentDimensions;s||(t.width="".concat((100*parseFloat(i)/o).toFixed(2),"%")),!a(this,jn)&&!n&&(t.height="".concat((100*parseFloat(e)/l).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=a(this,ye))==null||t.finish()}async addEditToolbar(){return a(this,ge)||a(this,zn)?a(this,ge):(x(this,ge,new Qf(this)),this.div.append(a(this,ge).render()),a(this,ye)&&a(this,ge).addAltTextButton(await a(this,ye).render()),a(this,ge))}removeEditToolbar(){var t;a(this,ge)&&(a(this,ge).remove(),x(this,ge,null),(t=a(this,ye))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,ye)||(bu.initialize(Pt._l10nPromise),x(this,ye,new bu(this)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,ye))==null?void 0:t.data}set altTextData(t){a(this,ye)&&(a(this,ye).data=t)}hasAltText(){var t;return!((t=a(this,ye))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,ga)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",a(this,ma)),this.div.addEventListener("focusout",a(this,ba));const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*e/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/e).toFixed(2),"%"));const[i,s]=this.getInitialTranslation();return this.translate(i,s),mu(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,$n,!0),this._isDraggable){S(this,Xu,Jm).call(this,t);return}S(this,Vl,gp).call(this,t)}moveInDOM(){a(this,Pi)&&clearTimeout(a(this,Pi)),x(this,Pi,setTimeout(()=>{var t;x(this,Pi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const s=this.parentScale,[n,o]=this.pageDimensions,[l,c]=this.pageTranslation,d=t/s,f=e/s,b=this.x*n,w=this.y*o,C=this.width*n,E=this.height*o;switch(i){case 0:return[b+d+l,o-w-f-E+c,b+d+C+l,o-w-f+c];case 90:return[b+f+l,o-w+d+c,b+f+E+l,o-w+d+C+c];case 180:return[b-d-C+l,o-w+f+c,b-d+l,o-w+f+E+c];case 270:return[b-f-E+l,o-w-d-C+c,b-f+l,o-w-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,o]=t,l=n-i,c=o-s;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-s,c,l];case 180:return[n,e-s,l,c];case 270:return[n,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,zn,!0)}disableEditMode(){x(this,zn,!1)}isInEditMode(){return a(this,zn)}shouldGetKeyboardEvents(){return a(this,us)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;(t=this.div)==null||t.addEventListener("focusin",a(this,ma)),(e=this.div)==null||e.addEventListener("focusout",a(this,ba))}rotate(t){}serialize(t=!1,e=null){Rt("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation;const[n,o]=s.pageDimensions,[l,c,d,f]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/n,s.y=c/o,s.width=d/n,s.height=f/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",a(this,ma)),this.div.removeEventListener("focusout",a(this,ba)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Pi)&&(clearTimeout(a(this,Pi)),x(this,Pi,null)),S(this,Wn,$o).call(this),this.removeEditToolbar(),a(this,Qe)){for(const t of a(this,Qe).values())clearTimeout(t);x(this,Qe,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,Vu,Km).call(this),a(this,oe).classList.remove("hidden"),mu(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,qn,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,oe).children;if(!a(this,hi)){x(this,hi,Array.from(e));const o=S(this,Yu,Zm).bind(this),l=S(this,Ku,tb).bind(this);for(const c of a(this,hi)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o),c.addEventListener("blur",l),c.addEventListener("focus",S(this,Qu,eb).bind(this,d)),Pt._l10nPromise.get("pdfjs-editor-resizer-label-".concat(d)).then(f=>c.setAttribute("aria-label",f))}}const i=a(this,hi)[0];let s=0;for(const o of e){if(o===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(a(this,hi).length/4);if(n!==s){if(n<s)for(let l=0;l<s-n;l++)a(this,oe).append(a(this,oe).firstChild);else if(n>s)for(let l=0;l<n-s;l++)a(this,oe).firstChild.before(a(this,oe).lastChild);let o=0;for(const l of e){const d=a(this,hi)[o++].getAttribute("data-resizer-name");Pt._l10nPromise.get("pdfjs-editor-resizer-label-".concat(d)).then(f=>l.setAttribute("aria-label",f))}}S(this,Gl,mp).call(this,0),x(this,us,!0),a(this,oe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,us)&&S(this,Ul,pp).call(this,a(this,Hl),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){S(this,Wn,$o).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!a(this,ge)){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=a(this,ge))==null||s.show())});return}(e=a(this,ge))==null||e.show()}unselect(){var t,e,i,s;(t=a(this,oe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=a(this,ge))==null||s.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,Bl)}set isEditing(t){x(this,Bl,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,jn,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Qe)||x(this,Qe,new Map);const{action:i}=t;let s=a(this,Qe).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,Qe).delete(i),a(this,Qe).size===0&&x(this,Qe,null)},Pt._telemetryTimeout),a(this,Qe).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,ga,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,ga,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};hi=new WeakMap,ye=new WeakMap,ga=new WeakMap,jn=new WeakMap,oe=new WeakMap,qn=new WeakMap,ma=new WeakMap,ba=new WeakMap,ge=new WeakMap,Hl=new WeakMap,$n=new WeakMap,Vs=new WeakMap,Bl=new WeakMap,zn=new WeakMap,us=new WeakMap,Pi=new WeakMap,va=new WeakMap,ya=new WeakMap,Qe=new WeakMap,jl=new WeakMap,Uu=new WeakMap,ql=new WeakSet,cp=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()},$l=new WeakSet,up=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},zl=new WeakSet,dp=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},Vu=new WeakSet,Km=function(){if(a(this,oe))return;x(this,oe,document.createElement("div")),a(this,oe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of t){const i=document.createElement("div");a(this,oe).append(i),i.classList.add("resizer",e),i.setAttribute("data-resizer-name",e),i.addEventListener("pointerdown",S(this,Gu,Qm).bind(this,e)),i.addEventListener("contextmenu",Me),i.tabIndex=-1}this.div.prepend(a(this,oe))},Gu=new WeakSet,Qm=function(t,e){var E;e.preventDefault();const{isMac:i}=Pe.platform;if(e.button!==0||e.ctrlKey&&i)return;(E=a(this,ye))==null||E.toggle(!1);const s=S(this,Ul,pp).bind(this,t),n=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,o),window.addEventListener("contextmenu",Me);const l=this.x,c=this.y,d=this.width,f=this.height,b=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const C=()=>{var T;this.parent.togglePointerEvents(!0),(T=a(this,ye))==null||T.toggle(!0),this._isDraggable=n,window.removeEventListener("pointerup",C),window.removeEventListener("blur",C),window.removeEventListener("pointermove",s,o),window.removeEventListener("contextmenu",Me),this.parent.div.style.cursor=b,this.div.style.cursor=w,S(this,Wl,fp).call(this,l,c,d,f)};window.addEventListener("pointerup",C),window.addEventListener("blur",C)},Wl=new WeakSet,fp=function(t,e,i,s){const n=this.x,o=this.y,l=this.width,c=this.height;n===t&&o===e&&l===i&&c===s||this.addCommands({cmd:()=>{this.width=l,this.height=c,this.x=n,this.y=o;const[d,f]=this.parentDimensions;this.setDims(d*l,f*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[d,f]=this.parentDimensions;this.setDims(d*i,f*s),this.fixAndSetPosition()},mustExec:!0})},Ul=new WeakSet,pp=function(t,e){const[i,s]=this.parentDimensions,n=this.x,o=this.y,l=this.width,c=this.height,d=Pt.MIN_SIZE/i,f=Pt.MIN_SIZE/s,b=tt=>Math.round(tt*1e4)/1e4,w=S(this,zl,dp).call(this,this.rotation),C=(tt,dt)=>[w[0]*tt+w[2]*dt,w[1]*tt+w[3]*dt],E=S(this,zl,dp).call(this,360-this.rotation),T=(tt,dt)=>[E[0]*tt+E[2]*dt,E[1]*tt+E[3]*dt];let M,k,j=!1,F=!1;switch(t){case"topLeft":j=!0,M=(tt,dt)=>[0,0],k=(tt,dt)=>[tt,dt];break;case"topMiddle":M=(tt,dt)=>[tt/2,0],k=(tt,dt)=>[tt/2,dt];break;case"topRight":j=!0,M=(tt,dt)=>[tt,0],k=(tt,dt)=>[0,dt];break;case"middleRight":F=!0,M=(tt,dt)=>[tt,dt/2],k=(tt,dt)=>[0,dt/2];break;case"bottomRight":j=!0,M=(tt,dt)=>[tt,dt],k=(tt,dt)=>[0,0];break;case"bottomMiddle":M=(tt,dt)=>[tt/2,dt],k=(tt,dt)=>[tt/2,0];break;case"bottomLeft":j=!0,M=(tt,dt)=>[0,dt],k=(tt,dt)=>[tt,0];break;case"middleLeft":F=!0,M=(tt,dt)=>[0,dt/2],k=(tt,dt)=>[tt,dt/2];break}const q=M(l,c),U=k(l,c);let W=C(...U);const p=b(n+W[0]),it=b(o+W[1]);let K=1,bt=1,[rt,Ft]=this.screenToPageTranslation(e.movementX,e.movementY);if([rt,Ft]=T(rt/i,Ft/s),j){const tt=Math.hypot(l,c);K=bt=Math.max(Math.min(Math.hypot(U[0]-q[0]-rt,U[1]-q[1]-Ft)/tt,1/l,1/c),d/l,f/c)}else F?K=Math.max(d,Math.min(1,Math.abs(U[0]-q[0]-rt)))/l:bt=Math.max(f,Math.min(1,Math.abs(U[1]-q[1]-Ft)))/c;const et=b(l*K),St=b(c*bt);W=C(...k(et,St));const Dt=p-W[0],ee=it-W[1];this.width=et,this.height=St,this.x=Dt,this.y=ee,this.setDims(i*et,s*St),this.fixAndSetPosition()},Vl=new WeakSet,gp=function(t){const{isMac:e}=Pe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Xu=new WeakSet,Jm=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,s;e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0},x(this,va,t.clientX),x(this,ya,t.clientY),s=o=>{const{clientX:l,clientY:c}=o,[d,f]=this.screenToPageTranslation(l-a(this,va),c-a(this,ya));x(this,va,l),x(this,ya,c),this._uiManager.dragSelectedEditors(d,f)},window.addEventListener("pointermove",s,i));const n=()=>{window.removeEventListener("pointerup",n),window.removeEventListener("blur",n),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),x(this,$n,!1),this._uiManager.endDragSession()||S(this,Vl,gp).call(this,t)};window.addEventListener("pointerup",n),window.addEventListener("blur",n)},Yu=new WeakSet,Zm=function(t){Pt._resizerKeyboardManager.exec(this,t)},Ku=new WeakSet,tb=function(t){var e;a(this,us)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,oe)&&S(this,Wn,$o).call(this)},Qu=new WeakSet,eb=function(t){x(this,Hl,a(this,us)?t:"")},Gl=new WeakSet,mp=function(t){if(a(this,hi))for(const e of a(this,hi))e.tabIndex=t},Wn=new WeakSet,$o=function(){if(x(this,us,!1),S(this,Gl,mp).call(this,-1),a(this,qn)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=a(this,qn);S(this,Wl,fp).call(this,t,e,i,s),x(this,qn,null)}},v(Pt,$l),ut(Pt,"_borderLineWidth",-1),ut(Pt,"_colorManager",new ep),ut(Pt,"_zIndex",1),ut(Pt,"_telemetryTimeout",1e3);let kt=Pt;class Zy extends kt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const lm=3285377520,Xe=4294901760,Ei=65535;class ib{constructor(t){this.h1=t?t&4294967295:lm,this.h2=t?t&4294967295:lm}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let T=0,M=t.length;T<M;T++){const k=t.charCodeAt(T);k<=255?e[i++]=k:(e[i++]=k>>>8,e[i++]=k&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,n=i-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,d=this.h1,f=this.h2;const b=3432918353,w=461845907,C=b&Ei,E=w&Ei;for(let T=0;T<s;T++)T&1?(l=o[T],l=l*b&Xe|l*C&Ei,l=l<<15|l>>>17,l=l*w&Xe|l*E&Ei,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[T],c=c*b&Xe|c*C&Ei,c=c<<15|c>>>17,c=c*w&Xe|c*E&Ei,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,n){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*b&Xe|l*C&Ei,l=l<<15|l>>>17,l=l*w&Xe|l*E&Ei,s&1?d^=l:f^=l}this.h1=d,this.h2=f}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Xe|t*36045&Ei,e=e*4283543511&Xe|((e<<16|t>>>16)*2950163797&Xe)>>>16,t^=e>>>1,t=t*444984403&Xe|t*60499&Ei,e=e*3301882366&Xe|((e<<16|t>>>16)*3120437893&Xe)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const bp=Object.freeze({map:null,hash:"",transfer:void 0});var Un,le,Ju,sb;class gg{constructor(){v(this,Ju);v(this,Un,!1);v(this,le,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,le).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,le).get(t)}remove(t){if(a(this,le).delete(t),a(this,le).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,le).values())if(e instanceof kt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,le).get(t);let s=!1;if(i!==void 0)for(const[n,o]of Object.entries(e))i[n]!==o&&(s=!0,i[n]=o);else s=!0,a(this,le).set(t,e);s&&S(this,Ju,sb).call(this),e instanceof kt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,le).has(t)}getAll(){return a(this,le).size>0?lg(a(this,le)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,le).size}resetModified(){a(this,Un)&&(x(this,Un,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new nb(this)}get serializable(){if(a(this,le).size===0)return bp;const t=new Map,e=new ib,i=[],s=Object.create(null);let n=!1;for(const[o,l]of a(this,le)){const c=l instanceof kt?l.serialize(!1,s):l;c&&(t.set(o,c),e.update("".concat(o,":").concat(JSON.stringify(c))),n||(n=!!c.bitmap))}if(n)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:bp}get editorStats(){var i;let t=null;const e=new Map;for(const s of a(this,le).values()){if(!(s instanceof kt))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:o}=n;e.has(o)||e.set(o,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const l=t[o]||(t[o]=new Map);for(const[c,d]of Object.entries(n)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const b=(i=f.get(d))!=null?i:0;f.set(d,b+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}}Un=new WeakMap,le=new WeakMap,Ju=new WeakSet,sb=function(){a(this,Un)||(x(this,Un,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xl;class nb extends gg{constructor(e){super();v(this,Xl,void 0);const{map:i,hash:s,transfer:n}=e.serializable,o=structuredClone(i,n?{transfer:n}:null);x(this,Xl,{map:o,hash:s,transfer:n})}get print(){Rt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Xl)}}Xl=new WeakMap;var Aa;class tA{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){v(this,Aa,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Aa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,Aa).has(t.loadedName))){if(Qt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:n}=t,o=new FontFace(i,s,n);this.addNativeFontFace(o);try{await o.load(),a(this,Aa).add(i),e==null||e(t)}catch(l){pt("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o)}return}Rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw pt("Failed to load font '".concat(i.family,"': '").concat(s,"'.")),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(me||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),xt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Qt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const n=i.shift();setTimeout(n.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(q,U){return q.charCodeAt(U)<<24|q.charCodeAt(U+1)<<16|q.charCodeAt(U+2)<<8|q.charCodeAt(U+3)&255}function s(q,U,W,p){const it=q.substring(0,U),K=q.substring(U+W);return it+p+K}let n,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function f(q,U){if(++d>30){pt("Load test font never loaded."),U();return}if(c.font="30px "+q,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(f.bind(null,q,U))}const b="lt".concat(Date.now()).concat(this.loadTestFontId++);let w=this._loadTestFont;w=s(w,976,b.length,b);const E=16,T=1482184792;let M=i(w,E);for(n=0,o=b.length-3;n<o;n+=4)M=M-T+i(b,n)|0;n<b.length&&(M=M-T+i(b+"XXX",n)|0),w=s(w,E,4,Oy(M));const k="url(data:font/opentype;base64,".concat(btoa(w),");"),j='@font-face {font-family:"'.concat(b,'";src:').concat(k,"}");this.insertRule(j);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const q of[t.loadedName,b]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=q,F.append(U)}this._document.body.append(F),f(b,()=>{F.remove(),e.complete()})}}Aa=new WeakMap;class eA{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=Tm(this.data),e="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let i;if(!this.cssFontInfo)i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");else{let n="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(n+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(n,"src:").concat(e,"}")}return(s=this._inspectFont)==null||s.call(this,this,e),i}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(n){pt('getPathGenerator - ignoring character: "'.concat(n,'".'))}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(n,o){};const s=[];for(let n=0,o=i.length;n<o;)switch(i[n++]){case Yi.BEZIER_CURVE_TO:{const[l,c,d,f,b,w]=i.slice(n,n+6);s.push(C=>C.bezierCurveTo(l,c,d,f,b,w)),n+=6}break;case Yi.MOVE_TO:{const[l,c]=i.slice(n,n+2);s.push(d=>d.moveTo(l,c)),n+=2}break;case Yi.LINE_TO:{const[l,c]=i.slice(n,n+2);s.push(d=>d.lineTo(l,c)),n+=2}break;case Yi.QUADRATIC_CURVE_TO:{const[l,c,d,f]=i.slice(n,n+4);s.push(b=>b.quadraticCurveTo(l,c,d,f)),n+=4}break;case Yi.RESTORE:s.push(l=>l.restore());break;case Yi.SAVE:s.push(l=>l.save());break;case Yi.SCALE:Qt(s.length===2,"Scale command is only valid at the third position.");break;case Yi.TRANSFORM:{const[l,c,d,f,b,w]=i.slice(n,n+6);s.push(C=>C.transform(l,c,d,f,b,w)),n+=6}break;case Yi.TRANSLATE:{const[l,c]=i.slice(n,n+2);s.push(d=>d.translate(l,c)),n+=2}break}return this.compiledGlyphs[e]=function(o,l){s[0](o),s[1](o),o.scale(l,-l);for(let c=2,d=s.length;c<d;c++)s[c](o)}}}if(me){var vp=Promise.withResolvers(),Zo=null;(async()=>{const t=await No(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await No(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await No(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await No(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let n,o;return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:n,path2d:o}))})().then(t=>{Zo=t,vp.resolve()},t=>{pt("loadPackages: ".concat(t)),Zo=new Map,vp.resolve()})}class zi{static get promise(){return vp.promise}static get(t){return Zo==null?void 0:Zo.get(t)}}const rb=function(m){return zi.get("fs").promises.readFile(m).then(e=>new Uint8Array(e))};class iA extends hf{}class sA extends cf{_createCanvas(t,e){return zi.get("canvas").createCanvas(t,e)}}class nA extends uf{_fetchData(t,e){return rb(t).then(i=>({cMapData:i,compressionType:e}))}}class rA extends df{_fetchData(t){return rb(t)}}const _e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yp(m,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),m.clip(s)}class Sc{constructor(){this.constructor===Sc&&Rt("Cannot initialize BaseShadingPattern.")}getPattern(){Rt("Abstract method `getPattern` called.")}}class aA extends Sc{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let n;if(s===_e.STROKE||s===_e.FILL){const o=e.current.getClippedPathBoundingBox(s,Ot(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=e.cachedCanvases.getCanvas("pattern",l,c,!0),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),i=J.transform(i,[1,0,0,1,o[0],o[1]]),f.transform(...e.baseTransform),this.matrix&&f.transform(...this.matrix),yp(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),n=t.createPattern(d.canvas,"no-repeat");const b=new DOMMatrix(i);n.setTransform(b)}else yp(t,this._bbox),n=this._createGradient(t);return n}}function qf(m,t,e,i,s,n,o,l){const c=t.coords,d=t.colors,f=m.data,b=m.width*4;let w;c[e+1]>c[i+1]&&(w=e,e=i,i=w,w=n,n=o,o=w),c[i+1]>c[s+1]&&(w=i,i=s,s=w,w=o,o=l,l=w),c[e+1]>c[i+1]&&(w=e,e=i,i=w,w=n,n=o,o=w);const C=(c[e]+t.offsetX)*t.scaleX,E=(c[e+1]+t.offsetY)*t.scaleY,T=(c[i]+t.offsetX)*t.scaleX,M=(c[i+1]+t.offsetY)*t.scaleY,k=(c[s]+t.offsetX)*t.scaleX,j=(c[s+1]+t.offsetY)*t.scaleY;if(E>=j)return;const F=d[n],q=d[n+1],U=d[n+2],W=d[o],p=d[o+1],it=d[o+2],K=d[l],bt=d[l+1],rt=d[l+2],Ft=Math.round(E),et=Math.round(j);let St,Dt,ee,tt,dt,ei,pn,Wi;for(let ue=Ft;ue<=et;ue++){if(ue<M){const Ht=ue<E?0:(E-ue)/(E-M);St=C-(C-T)*Ht,Dt=F-(F-W)*Ht,ee=q-(q-p)*Ht,tt=U-(U-it)*Ht}else{let Ht;ue>j?Ht=1:M===j?Ht=0:Ht=(M-ue)/(M-j),St=T-(T-k)*Ht,Dt=W-(W-K)*Ht,ee=p-(p-bt)*Ht,tt=it-(it-rt)*Ht}let qt;ue<E?qt=0:ue>j?qt=1:qt=(E-ue)/(E-j),dt=C-(C-k)*qt,ei=F-(F-K)*qt,pn=q-(q-bt)*qt,Wi=U-(U-rt)*qt;const Ps=Math.round(Math.min(St,dt)),Br=Math.round(Math.max(St,dt));let ze=b*ue+Ps*4;for(let Ht=Ps;Ht<=Br;Ht++)qt=(St-Ht)/(St-dt),qt<0?qt=0:qt>1&&(qt=1),f[ze++]=Dt-(Dt-ei)*qt|0,f[ze++]=ee-(ee-pn)*qt|0,f[ze++]=tt-(tt-Wi)*qt|0,f[ze++]=255}}function oA(m,t,e){const i=t.coords,s=t.colors;let n,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,d=l-1;for(n=0;n<c;n++){let f=n*l;for(let b=0;b<d;b++,f++)qf(m,e,i[f],i[f+1],i[f+l],s[f],s[f+1],s[f+l]),qf(m,e,i[f+l+1],i[f+1],i[f+l],s[f+l+1],s[f+1],s[f+l])}break;case"triangles":for(n=0,o=i.length;n<o;n+=3)qf(m,e,i[n],i[n+1],i[n+2],s[n],s[n+1],s[n+2]);break;default:throw new Error("illegal figure")}}class lA extends Sc{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-c,b=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(f*t[1]*1.1)),3e3),C=d/b,E=f/w,T={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/C,scaleY:1/E},M=b+2*2,k=w+2*2,j=i.getCanvas("mesh",M,k,!1),F=j.context,q=F.createImageData(b,w);if(e){const W=q.data;for(let p=0,it=W.length;p<it;p+=4)W[p]=e[0],W[p+1]=e[1],W[p+2]=e[2],W[p+3]=255}for(const W of this._figures)oA(q,W,T);return F.putImageData(q,2,2),{canvas:j.canvas,offsetX:l-2*C,offsetY:c-2*E,scaleX:C,scaleY:E}}getPattern(t,e,i,s){yp(t,this._bbox);let n;if(s===_e.SHADING)n=J.singularValueDecompose2dScale(Ot(t));else if(n=J.singularValueDecompose2dScale(e.baseTransform),this.matrix){const l=J.singularValueDecompose2dScale(this.matrix);n=[n[0]*l[0],n[1]*l[1]]}const o=this._createMeshCanvas(n,s===_e.SHADING?null:this._background,e.cachedCanvases);return s!==_e.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class hA extends Sc{getPattern(){return"hotpink"}}function cA(m){switch(m[0]){case"RadialAxial":return new aA(m);case"Mesh":return new lA(m);case"Dummy":return new hA}throw new Error("Unknown IR type: ".concat(m[0]))}const hm={COLORED:1,UNCOLORED:2},Zu=class Zu{constructor(t,e,i,s,n){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,n=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;af("TilingType: "+l);const f=i[0],b=i[1],w=i[2],C=i[3],E=J.singularValueDecompose2dScale(this.matrix),T=J.singularValueDecompose2dScale(this.baseTransform),M=[E[0]*T[0],E[1]*T[1]],k=this.getSizeAndScale(s,this.ctx.canvas.width,M[0]),j=this.getSizeAndScale(n,this.ctx.canvas.height,M[1]),F=t.cachedCanvases.getCanvas("pattern",k.size,j.size,!0),q=F.context,U=d.createCanvasGraphics(q);U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,o,c);let W=f,p=b,it=w,K=C;return f<0&&(W=0,it+=Math.abs(f)),b<0&&(p=0,K+=Math.abs(b)),q.translate(-(k.scale*W),-(j.scale*p)),U.transform(k.scale,0,0,j.scale,0,0),q.save(),this.clipBbox(U,W,p,it,K),U.baseTransform=Ot(U.ctx),U.executeOperatorList(e),U.endDrawing(),{canvas:F.canvas,scaleX:k.scale,scaleY:j.scale,offsetX:W,offsetY:p}}getSizeAndScale(t,e,i){t=Math.abs(t);const s=Math.max(Zu.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=s?n=s:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,s,n){const o=s-e,l=n-i;t.ctx.rect(e,i,o,l),t.current.updateRectMinMax(Ot(t.ctx),[e,i,s,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case hm.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,n.fillColor=o.fillStyle,n.strokeColor=o.strokeStyle;break;case hm.UNCOLORED:const l=J.makeHexColor(i[0],i[1],i[2]);s.fillStyle=l,s.strokeStyle=l,n.fillColor=l,n.strokeColor=l;break;default:throw new Ny("Unsupported paint type: ".concat(e))}}getPattern(t,e,i,s){let n=i;s!==_e.SHADING&&(n=J.transform(n,e.baseTransform),this.matrix&&(n=J.transform(n,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(n);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};ut(Zu,"MAX_PATTERN_SIZE",3e3);let Ap=Zu;function uA({src:m,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:n=4294967295,inverseDecode:o=!1}){const l=Pe.isLittleEndian?4278190080:255,[c,d]=o?[n,l]:[l,n],f=i>>3,b=i&7,w=m.length;e=new Uint32Array(e.buffer);let C=0;for(let E=0;E<s;E++){for(const M=t+f;t<M;t++){const k=t<w?m[t]:255;e[C++]=k&128?d:c,e[C++]=k&64?d:c,e[C++]=k&32?d:c,e[C++]=k&16?d:c,e[C++]=k&8?d:c,e[C++]=k&4?d:c,e[C++]=k&2?d:c,e[C++]=k&1?d:c}if(b===0)continue;const T=t<w?m[t++]:255;for(let M=0;M<b;M++)e[C++]=T&1<<7-M?d:c}return{srcPos:t,destPos:C}}const cm=16,um=100,dA=15,dm=10,fm=1e3,Re=16;function fA(m,t){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){t.save(),this.__originalSave()},m.restore=function(){t.restore(),this.__originalRestore()},m.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},m.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},m.transform=function(i,s,n,o,l,c){t.transform(i,s,n,o,l,c),this.__originalTransform(i,s,n,o,l,c)},m.setTransform=function(i,s,n,o,l,c){t.setTransform(i,s,n,o,l,c),this.__originalSetTransform(i,s,n,o,l,c)},m.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},m.rotate=function(i){t.rotate(i),this.__originalRotate(i)},m.clip=function(i){t.clip(i),this.__originalClip(i)},m.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},m.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},m.bezierCurveTo=function(e,i,s,n,o,l){t.bezierCurveTo(e,i,s,n,o,l),this.__originalBezierCurveTo(e,i,s,n,o,l)},m.rect=function(e,i,s,n){t.rect(e,i,s,n),this.__originalRect(e,i,s,n)},m.closePath=function(){t.closePath(),this.__originalClosePath()},m.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class pA{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function jc(m,t,e,i,s,n,o,l,c,d){const[f,b,w,C,E,T]=Ot(m);if(b===0&&w===0){const j=o*f+E,F=Math.round(j),q=l*C+T,U=Math.round(q),W=(o+c)*f+E,p=Math.abs(Math.round(W)-F)||1,it=(l+d)*C+T,K=Math.abs(Math.round(it)-U)||1;return m.setTransform(Math.sign(f),0,0,Math.sign(C),F,U),m.drawImage(t,e,i,s,n,0,0,p,K),m.setTransform(f,b,w,C,E,T),[p,K]}if(f===0&&C===0){const j=l*w+E,F=Math.round(j),q=o*b+T,U=Math.round(q),W=(l+d)*w+E,p=Math.abs(Math.round(W)-F)||1,it=(o+c)*b+T,K=Math.abs(Math.round(it)-U)||1;return m.setTransform(0,Math.sign(b),Math.sign(w),0,F,U),m.drawImage(t,e,i,s,n,0,0,K,p),m.setTransform(f,b,w,C,E,T),[K,p]}m.drawImage(t,e,i,s,n,o,l,c,d);const M=Math.hypot(f,b),k=Math.hypot(w,C);return[M*c,k*d]}function gA(m){const{width:t,height:e}=m;if(t>fm||e>fm)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=t+1;let o=new Uint8Array(n*(e+1)),l,c,d;const f=t+7&-8;let b=new Uint8Array(f*e),w=0;for(const k of m.data){let j=128;for(;j>0;)b[w++]=k&j?0:255,j>>=1}let C=0;for(w=0,b[w]!==0&&(o[0]=1,++C),c=1;c<t;c++)b[w]!==b[w+1]&&(o[c]=b[w]?2:1,++C),w++;for(b[w]!==0&&(o[c]=2,++C),l=1;l<e;l++){w=l*f,d=l*n,b[w-f]!==b[w]&&(o[d]=b[w]?1:8,++C);let k=(b[w]?4:0)+(b[w-f]?8:0);for(c=1;c<t;c++)k=(k>>2)+(b[w+1]?4:0)+(b[w-f+1]?8:0),s[k]&&(o[d+c]=s[k],++C),w++;if(b[w-f]!==b[w]&&(o[d+c]=b[w]?2:4,++C),C>i)return null}for(w=f*(e-1),d=l*n,b[w]!==0&&(o[d]=8,++C),c=1;c<t;c++)b[w]!==b[w+1]&&(o[d+c]=b[w]?4:8,++C),w++;if(b[w]!==0&&(o[d+c]=4,++C),C>i)return null;const E=new Int32Array([0,n,-1,0,-n,0,0,0,1]),T=new Path2D;for(l=0;C&&l<=e;l++){let k=l*n;const j=k+t;for(;k<j&&!o[k];)k++;if(k===j)continue;T.moveTo(k%n,l);const F=k;let q=o[k];do{const U=E[q];do k+=U;while(!o[k]);const W=o[k];W!==5&&W!==10?(q=W,o[k]=0):(q=W&51*q>>4,o[k]&=q>>2|q<<2),T.lineTo(k%n,k/n|0),o[k]||--C}while(F!==k);--l}return b=null,o=null,function(k){k.save(),k.scale(1/t,-1/e),k.translate(0,-e),k.fill(T),k.beginPath(),k.restore()}}class pm{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Sm,this.textMatrixScale=1,this.fontMatrix=Wf,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=fe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=J.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=J.applyTransform(e,t),s=J.applyTransform(e.slice(2),t),n=J.applyTransform([e[0],e[3]],t),o=J.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],n[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],n[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],n[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],n[1],o[1])}updateScalingPathMinMax(t,e){J.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,n,o,l,c,d,f){const b=J.bezierBoundingBox(e,i,s,n,o,l,c,d,f);f||this.updateRectMinMax(t,b)}getPathBoundingBox(t=_e.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===_e.STROKE){e||Rt("Stroke bounding box must include transform.");const s=J.singularValueDecompose2dScale(e),n=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=n,i[1]-=o,i[2]+=n,i[3]+=o}return i}updateClipFromPath(){const t=J.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=_e.FILL,e=null){return J.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function gm(m,t){if(typeof ImageData<"u"&&t instanceof ImageData){m.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%Re,n=(e-s)/Re,o=s===0?n:n+1,l=m.createImageData(i,Re);let c=0,d;const f=t.data,b=l.data;let w,C,E,T;if(t.kind===Uc.GRAYSCALE_1BPP){const M=f.byteLength,k=new Uint32Array(b.buffer,0,b.byteLength>>2),j=k.length,F=i+7>>3,q=4294967295,U=Pe.isLittleEndian?4278190080:255;for(w=0;w<o;w++){for(E=w<n?Re:s,d=0,C=0;C<E;C++){const W=M-c;let p=0;const it=W>F?i:W*8-7,K=it&-8;let bt=0,rt=0;for(;p<K;p+=8)rt=f[c++],k[d++]=rt&128?q:U,k[d++]=rt&64?q:U,k[d++]=rt&32?q:U,k[d++]=rt&16?q:U,k[d++]=rt&8?q:U,k[d++]=rt&4?q:U,k[d++]=rt&2?q:U,k[d++]=rt&1?q:U;for(;p<it;p++)bt===0&&(rt=f[c++],bt=128),k[d++]=rt&bt?q:U,bt>>=1}for(;d<j;)k[d++]=0;m.putImageData(l,0,w*Re)}}else if(t.kind===Uc.RGBA_32BPP){for(C=0,T=i*Re*4,w=0;w<n;w++)b.set(f.subarray(c,c+T)),c+=T,m.putImageData(l,0,C),C+=Re;w<o&&(T=i*s*4,b.set(f.subarray(c,c+T)),m.putImageData(l,0,C))}else if(t.kind===Uc.RGB_24BPP)for(E=Re,T=i*E,w=0;w<o;w++){for(w>=n&&(E=s,T=i*E),d=0,C=T;C--;)b[d++]=f[c++],b[d++]=f[c++],b[d++]=f[c++],b[d++]=255;m.putImageData(l,0,w*Re)}else throw new Error("bad image kind: ".concat(t.kind))}function mm(m,t){if(t.bitmap){m.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%Re,n=(e-s)/Re,o=s===0?n:n+1,l=m.createImageData(i,Re);let c=0;const d=t.data,f=l.data;for(let b=0;b<o;b++){const w=b<n?Re:s;({srcPos:c}=uA({src:d,srcPos:c,dest:f,width:i,height:w,nonBlackColor:0})),m.putImageData(l,0,b*Re)}}function Io(m,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)m[i]!==void 0&&(t[i]=m[i]);m.setLineDash!==void 0&&(t.setLineDash(m.getLineDash()),t.lineDashOffset=m.lineDashOffset)}function qc(m){if(m.strokeStyle=m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0),!me){const{filter:t}=m;t!=="none"&&t!==""&&(m.filter="none")}}function bm(m,t){if(t)return!0;const e=J.singularValueDecompose2dScale(m);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*dn.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const mA=["butt","round","square"],bA=["miter","round","bevel"],vA={},vm={};var Yl,wp,Kl,_p;const Ag=class Ag{constructor(t,e,i,s,n,{optionalContentConfig:o,markedContentStack:l=null},c,d){v(this,Yl);v(this,Kl);this.ctx=t,this.current=new pm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new pA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const n=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,n,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",n,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),qc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(t,e,i,s){const n=t.argsArray,o=t.fnArray;let l=e||0;const c=n.length;if(c===l)return l;const d=c-l>dm&&typeof i=="function",f=d?Date.now()+dA:0;let b=0;const w=this.commonObjs,C=this.objs;let E;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,i),l;if(E=o[l],E!==ri.dependency)this[E].apply(this,n[l]);else for(const T of n[l]){const M=T.startsWith("g_")?w:C;if(!M.has(T))return M.get(T,i),l}if(l++,l===c)return l;if(d&&++b>dm){if(Date.now()>f)return i(),l;b=0}}}endDrawing(){S(this,Yl,wp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,Kl,_p).call(this)}_scaleImage(t,e){const i=t.width,s=t.height;let n=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=s,d="prescale1",f,b;for(;n>2&&l>1||o>2&&c>1;){let w=l,C=c;n>2&&l>1&&(w=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),n/=l/w),o>2&&c>1&&(C=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/C),f=this.cachedCanvases.getCanvas(d,w,C),b=f.context,b.clearRect(0,0,w,C),b.drawImage(t,0,0,l,c,0,0,w,C),t=f.canvas,l=w,c=C,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,n=this.current.fillColor,o=this.current.patternFill,l=Ot(e);let c,d,f,b;if((t.bitmap||t.data)&&t.count>1){const it=t.bitmap||t.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),n]),c=this._cachedBitmapsMap.get(it),c||(c=new Map,this._cachedBitmapsMap.set(it,c));const K=c.get(d);if(K&&!o){const bt=Math.round(Math.min(l[0],l[2])+l[4]),rt=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:K,offsetX:bt,offsetY:rt}}f=K}f||(b=this.cachedCanvases.getCanvas("maskCanvas",i,s),mm(b.context,t));let w=J.transform(l,[1/i,0,0,-1/s,0,0]);w=J.transform(w,[1,0,0,1,0,-s]);const[C,E,T,M]=J.getAxialAlignedBoundingBox([0,0,i,s],w),k=Math.round(T-C)||1,j=Math.round(M-E)||1,F=this.cachedCanvases.getCanvas("fillCanvas",k,j),q=F.context,U=C,W=E;q.translate(-U,-W),q.transform(...w),f||(f=this._scaleImage(b.canvas,Ki(q)),f=f.img,c&&o&&c.set(d,f)),q.imageSmoothingEnabled=bm(Ot(q),t.interpolate),jc(q,f,0,0,f.width,f.height,0,0,i,s),q.globalCompositeOperation="source-in";const p=J.transform(Ki(q),[1,0,0,1,-U,-W]);return q.fillStyle=o?n.getPattern(e,this,p,_e.FILL):n,q.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,F.canvas)),{canvas:F.canvas,offsetX:Math.round(U),offsetY:Math.round(W)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=mA[t]}setLineJoin(t){this.ctx.lineJoin=bA[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const n=this.ctx;n.setTransform(...Ot(this.suspendedCtx)),Io(this.suspendedCtx,n),fA(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Io(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],o=s[1],l=s[2]-n,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,n,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,o,l,c,d,f,b){let w=t.canvas,C=c-f,E=d-b;if(o){if(C<0||E<0||C+i>w.width||E+s>w.height){const M=this.cachedCanvases.getCanvas("maskExtension",i,s),k=M.context;k.drawImage(w,-C,-E),o.some(j=>j!==0)&&(k.globalCompositeOperation="destination-atop",k.fillStyle=J.makeHexColor(...o),k.fillRect(0,0,i,s),k.globalCompositeOperation="source-over"),w=M.canvas,C=E=0}else if(o.some(M=>M!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(C,E,i,s),t.clip(M),t.globalCompositeOperation="destination-atop",t.fillStyle=J.makeHexColor(...o),t.fillRect(C,E,i,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),n==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):n==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const T=new Path2D;T.rect(c,d,i,s),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(w,C,E,i,s,c,d,i,s),e.restore()}save(){this.inSMaskMode?(Io(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Io(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,n,o){this.ctx.transform(t,e,i,s,n,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,n=this.current;let o=n.x,l=n.y,c,d;const f=Ot(s),b=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,w=b?i.slice(0):null;for(let C=0,E=0,T=t.length;C<T;C++)switch(t[C]|0){case ri.rectangle:o=e[E++],l=e[E++];const M=e[E++],k=e[E++],j=o+M,F=l+k;s.moveTo(o,l),M===0||k===0?s.lineTo(j,F):(s.lineTo(j,l),s.lineTo(j,F),s.lineTo(o,F)),b||n.updateRectMinMax(f,[o,l,j,F]),s.closePath();break;case ri.moveTo:o=e[E++],l=e[E++],s.moveTo(o,l),b||n.updatePathMinMax(f,o,l);break;case ri.lineTo:o=e[E++],l=e[E++],s.lineTo(o,l),b||n.updatePathMinMax(f,o,l);break;case ri.curveTo:c=o,d=l,o=e[E+4],l=e[E+5],s.bezierCurveTo(e[E],e[E+1],e[E+2],e[E+3],o,l),n.updateCurvePathMinMax(f,c,d,e[E],e[E+1],e[E+2],e[E+3],o,l,w),E+=6;break;case ri.curveTo2:c=o,d=l,s.bezierCurveTo(o,l,e[E],e[E+1],e[E+2],e[E+3]),n.updateCurvePathMinMax(f,c,d,o,l,e[E],e[E+1],e[E+2],e[E+3],w),o=e[E+2],l=e[E+3],E+=4;break;case ri.curveTo3:c=o,d=l,o=e[E+2],l=e[E+3],s.bezierCurveTo(e[E],e[E+1],o,l,o,l),n.updateCurvePathMinMax(f,c,d,e[E],e[E+1],o,l,o,l,w),E+=4;break;case ri.closePath:s.closePath();break}b&&n.updateScalingPathMinMax(f,w),n.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Ki(e),_e.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let n=!1;s&&(e.save(),e.fillStyle=i.getPattern(e,this,Ki(e),_e.FILL),n=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=vA}eoClip(){this.pendingClip=vm}beginText(){this.current.textMatrix=Sm,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var f;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error("Can't find font for ".concat(t));if(s.fontMatrix=i.fontMatrix||Wf,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const n=i.loadedName||"sans-serif",o=((f=i.systemFontInfo)==null?void 0:f.css)||'"'.concat(n,'", ').concat(i.fallbackName);let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let d=e;e<cm?d=cm:e>um&&(d=um),this.current.fontSizeScale=e/d,this.ctx.font="".concat(c," ").concat(l," ").concat(d,"px ").concat(o)}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,n,o){this.current.textMatrix=[t,e,i,s,n,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const n=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,f=c&fe.FILL_STROKE_MASK,b=!!(c&fe.ADD_TO_PATH_FLAG),w=o.patternFill&&!l.missingFile;let C;(l.disableFontFace||b||w)&&(C=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||w?(n.save(),n.translate(e,i),n.beginPath(),C(n,d),s&&n.setTransform(...s),(f===fe.FILL||f===fe.FILL_STROKE)&&n.fill(),(f===fe.STROKE||f===fe.FILL_STROKE)&&n.stroke(),n.restore()):((f===fe.FILL||f===fe.FILL_STROKE)&&n.fillText(t,e,i),(f===fe.STROKE||f===fe.FILL_STROKE)&&n.strokeText(t,e,i)),b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(n),x:e,y:i,fontSize:d,addToPath:C})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return xt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const n=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,d=e.fontDirection,f=e.textHScale*d,b=t.length,w=i.vertical,C=w?1:-1,E=i.defaultVMetrics,T=s*e.fontMatrix[0],M=e.textRenderingMode===fe.FILL&&!i.disableFontFace&&!e.patternFill;n.save(),n.transform(...e.textMatrix),n.translate(e.x,e.y+e.textRise),d>0?n.scale(f,-1):n.scale(f,1);let k;if(e.patternFill){n.save();const W=e.fillColor.getPattern(n,this,Ki(n),_e.FILL);k=Ot(n),n.restore(),n.fillStyle=W}let j=e.lineWidth;const F=e.textMatrixScale;if(F===0||j===0){const W=e.textRenderingMode&fe.FILL_STROKE_MASK;(W===fe.STROKE||W===fe.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=F;if(o!==1&&(n.scale(o,o),j/=o),n.lineWidth=j,i.isInvalidPDFjsFont){const W=[];let p=0;for(const it of t)W.push(it.unicode),p+=it.width;n.fillText(W.join(""),0,0),e.x+=p*T*f,n.restore(),this.compose();return}let q=0,U;for(U=0;U<b;++U){const W=t[U];if(typeof W=="number"){q+=C*W*s/1e3;continue}let p=!1;const it=(W.isSpace?c:0)+l,K=W.fontChar,bt=W.accent;let rt,Ft,et=W.width;if(w){const Dt=W.vmetric||E,ee=-(W.vmetric?Dt[1]:et*.5)*T,tt=Dt[2]*T;et=Dt?-Dt[0]:et,rt=ee/o,Ft=(q+tt)/o}else rt=q/o,Ft=0;if(i.remeasure&&et>0){const Dt=n.measureText(K).width*1e3/s*o;if(et<Dt&&this.isFontSubpixelAAEnabled){const ee=et/Dt;p=!0,n.save(),n.scale(ee,1),rt/=ee}else et!==Dt&&(rt+=(et-Dt)/2e3*s/o)}if(this.contentVisible&&(W.isInFont||i.missingFile)){if(M&&!bt)n.fillText(K,rt,Ft);else if(this.paintChar(K,rt,Ft,k),bt){const Dt=rt+s*bt.offset.x/o,ee=Ft-s*bt.offset.y/o;this.paintChar(bt.fontChar,Dt,ee,k)}}const St=w?et*T-it*d:et*T+it*d;q+=St,p&&n.restore()}w?e.y-=q:e.x+=q*f,n.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,n=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,d=i.wordSpacing,f=i.textHScale*o,b=i.fontMatrix||Wf,w=t.length,C=i.textRenderingMode===fe.INVISIBLE;let E,T,M,k;if(!(C||n===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(f,o),E=0;E<w;++E){if(T=t[E],typeof T=="number"){k=l*T*n/1e3,this.ctx.translate(k,0),i.x+=k*f;continue}const j=(T.isSpace?d:0)+c,F=s.charProcOperatorList[T.operatorListId];if(!F){pt('Type3 character "'.concat(T.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=T,this.save(),e.scale(n,n),e.transform(...b),this.executeOperatorList(F),this.restore()),M=J.applyTransform([T.width,0],b)[0]*n+j,e.translate(M,0),i.x+=M*f}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,n,o){this.ctx.rect(i,s,n-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],s=this.baseTransform||Ot(this.ctx),n={createCanvasGraphics:o=>new Ag(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ap(t,i,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const s=J.makeHexColor(t,e,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,i){const s=J.makeHexColor(t,e,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=cA(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Ki(e),_e.SHADING);const s=Ki(e);if(s){const{width:n,height:o}=e.canvas,[l,c,d,f]=J.getAxialAlignedBoundingBox([0,0,n,o],s);this.ctx.fillRect(l,c,d-l,f-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Rt("Should not call beginInlineImage")}beginImageData(){Rt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ot(this.ctx),e)){const i=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],i,s),this.current.updateRectMinMax(Ot(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||af("TODO: Support non-isolated groups."),t.knockout&&pt("Knockout groups not supported.");const i=Ot(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=J.getAxialAlignedBoundingBox(t.bbox,Ot(e));const n=[0,0,e.canvas.width,e.canvas.height];s=J.intersect(s,n)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),d=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(f,c,d),w=b.context;w.translate(-o,-l),w.transform(...i),t.smask?this.smaskStack.push({canvas:b.canvas,context:w,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),Io(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ot(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const n=J.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,i,s,n){if(S(this,Yl,wp).call(this),qc(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(n&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l;const[c,d]=J.singularValueDecompose2dScale(Ot(this.ctx)),{viewportScale:f}=this,b=Math.ceil(o*this.outputScaleX*f),w=Math.ceil(l*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(b,w);const{canvas:C,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,C),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(c,0,0,-d,0,l*d),qc(this.ctx)}else qc(this.ctx),this.ctx.rect(e[0],e[1],o,l),this.ctx.clip(),this.endPath()}this.current=new pm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,Kl,_p).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=gA(t)),s.compiled)){s.compiled(i);return}const n=this._createMaskCanvas(t),o=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,n,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Ot(l);l.transform(e,i,s,n,0,0);const d=this._createMaskCanvas(t);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let f=0,b=o.length;f<b;f+=2){const w=J.transform(c,[e,i,s,n,o[f],o[f+1]]),[C,E]=J.applyTransform([0,0],w);l.drawImage(d.canvas,C,E)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const n of t){const{data:o,width:l,height:c,transform:d}=n,f=this.cachedCanvases.getCanvas("maskCanvas",l,c),b=f.context;b.save();const w=this.getObject(o,n);mm(b,w),b.globalCompositeOperation="source-in",b.fillStyle=s?i.getPattern(b,this,Ki(e),_e.FILL):i,b.fillRect(0,0,l,c),b.restore(),e.save(),e.transform(...d),e.scale(1,-1),jc(e,f.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const n=this.getObject(t);if(!n){pt("Dependent image isn't ready yet");return}const o=n.width,l=n.height,c=[];for(let d=0,f=s.length;d<f;d+=2)c.push({transform:[e,0,0,i,s[d],s[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(n,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),o=n.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",n.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!me){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/e,-1/i);let n;if(t.bitmap)n=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)n=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,i).context;gm(c,t),n=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(n,Ki(s));s.imageSmoothingEnabled=bm(Ot(s),t.interpolate),jc(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const n=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",n,o).context;gm(c,t),s=this.applyTransferMapsToCanvas(c)}for(const n of e)i.save(),i.transform(...n.transform),i.scale(1,-1),jc(i,s,n.x,n.y,n.w,n.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===vm?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ot(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(e),d=Math.abs(n);if(c===d)if(t===0)o=l=1/c;else{const f=c*t;o=l=f<1?1/f:1}else if(t===0)o=1/c,l=1/d;else{const f=c*t,b=d*t;o=f<1?1/f:1,l=b<1?1/b:1}}else{const c=Math.abs(e*n-i*s),d=Math.hypot(e,i),f=Math.hypot(s,n);if(t===0)o=f/c,l=d/c;else{const b=t*c;o=f>b?f/b:1,l=d>b?d/b:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,n]=this.getScaleForStroking();if(e.lineWidth=i||1,s===1&&n===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(s,n),o.length>0){const l=Math.max(s,n);e.setLineDash(o.map(c=>c/l)),e.lineDashOffset/=l}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Yl=new WeakSet,wp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kl=new WeakSet,_p=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ia=Ag;for(const m in ri)ia.prototype[m]!==void 0&&(ia.prototype[ri[m]]=ia.prototype[m]);var Ql,Jl;class Ls{static get workerPort(){return a(this,Ql)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Ql,t)}static get workerSrc(){return a(this,Jl)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Jl,t)}}Ql=new WeakMap,Jl=new WeakMap,v(Ls,Ql,null),v(Ls,Jl,"");const $c={UNKNOWN:0,DATA:1,ERROR:2},Wt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fe(m){switch(m instanceof Error||typeof m=="object"&&m!==null||Rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new Or(m.message);case"MissingPDFException":return new Nr(m.message);case"PasswordException":return new Vf(m.message,m.code);case"UnexpectedResponseException":return new of(m.message,m.status);case"UnknownErrorException":return new Gf(m.message,m.details);default:return new Gf(m.message,m.toString())}}var td,ab,ed,ob,wa,Qc;class zo{constructor(t,e,i){v(this,td);v(this,ed);v(this,wa);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const n=s.data;if(n.targetName!==this.sourceName)return;if(n.stream){S(this,ed,ob).call(this,n);return}if(n.callback){const l=n.callbackId,c=this.callbackCapabilities[l];if(!c)throw new Error("Cannot resolve callback ".concat(l));if(delete this.callbackCapabilities[l],n.callback===$c.DATA)c.resolve(n.data);else if(n.callback===$c.ERROR)c.reject(Fe(n.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[n.action];if(!o)throw new Error("Unknown action from worker: ".concat(n.action));if(n.callbackId){const l=this.sourceName,c=n.sourceName;new Promise(function(d){d(o(n.data))}).then(function(d){i.postMessage({sourceName:l,targetName:c,callback:$c.DATA,callbackId:n.callbackId,data:d})},function(d){i.postMessage({sourceName:l,targetName:c,callback:$c.ERROR,callbackId:n.callbackId,reason:Fe(d)})});return}if(n.streamId){S(this,td,ab).call(this,n);return}o(n.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error('There is already an actionName called "'.concat(t,'"'));i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){n.reject(o)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[n]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:n,data:e,desiredSize:d.desiredSize},s),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[n].pullCall=f,c.postMessage({sourceName:o,targetName:l,stream:Wt.PULL,streamId:n,desiredSize:d.desiredSize}),f.promise},cancel:d=>{Qt(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[n].cancelCall=f,this.streamControllers[n].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Wt.CANCEL,streamId:n,reason:Fe(d)}),f.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}td=new WeakSet,ab=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(d,f=1,b){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=f,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:Wt.ENQUEUE,streamId:e,chunk:d},b)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:Wt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(d){Qt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:Wt.ERROR,streamId:e,reason:Fe(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise(function(d){d(l(t.data,c))}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:Wt.START_COMPLETE,streamId:e,success:!0})},function(d){n.postMessage({sourceName:i,targetName:s,stream:Wt.START_COMPLETE,streamId:e,reason:Fe(d)})})},ed=new WeakSet,ob=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Wt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Fe(t.reason));break;case Wt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Fe(t.reason));break;case Wt.PULL:if(!l){n.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,new Promise(function(c){var d;c((d=l.onPull)==null?void 0:d.call(l))}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,success:!0})},function(c){n.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,reason:Fe(c)})});break;case Wt.ENQUEUE:if(Qt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Wt.CLOSE:if(Qt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,wa,Qc).call(this,o,e);break;case Wt.ERROR:Qt(o,"error should have stream controller"),o.controller.error(Fe(t.reason)),S(this,wa,Qc).call(this,o,e);break;case Wt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Fe(t.reason)),S(this,wa,Qc).call(this,o,e);break;case Wt.CANCEL:if(!l)break;new Promise(function(c){var d;c((d=l.onCancel)==null?void 0:d.call(l,Fe(t.reason)))}).then(function(){n.postMessage({sourceName:i,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){n.postMessage({sourceName:i,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:e,reason:Fe(c)})}),l.sinkCapability.reject(Fe(t.reason)),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},wa=new WeakSet,Qc=async function(t,e){var i,s,n;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(n=t.cancelCall)==null?void 0:n.promise]),delete this.streamControllers[e]};var Vn,Zl;class yA{constructor({parsedData:t,rawData:e}){v(this,Vn,void 0);v(this,Zl,void 0);x(this,Vn,t),x(this,Zl,e)}getRaw(){return a(this,Zl)}get(t){var e;return(e=a(this,Vn).get(t))!=null?e:null}getAll(){return lg(a(this,Vn))}has(t){return a(this,Vn).has(t)}}Vn=new WeakMap,Zl=new WeakMap;const Ns=Symbol("INTERNAL");var th,eh,ih,_a;class AA{constructor(t,{name:e,intent:i,usage:s}){v(this,th,!1);v(this,eh,!1);v(this,ih,!1);v(this,_a,!0);x(this,th,!!(t&ti.DISPLAY)),x(this,eh,!!(t&ti.PRINT)),this.name=e,this.intent=i,this.usage=s}get visible(){if(a(this,ih))return a(this,_a);if(!a(this,_a))return!1;const{print:t,view:e}=this.usage;return a(this,th)?(e==null?void 0:e.viewState)!=="OFF":a(this,eh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ns&&Rt("Internal method `_setVisible` called."),x(this,ih,i),x(this,_a,e)}}th=new WeakMap,eh=new WeakMap,ih=new WeakMap,_a=new WeakMap;var Gs,Lt,Ea,xa,sh,Ep;class wA{constructor(t,e=ti.DISPLAY){v(this,sh);v(this,Gs,null);v(this,Lt,new Map);v(this,Ea,null);v(this,xa,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,xa,t.order);for(const i of t.groups)a(this,Lt).set(i.id,new AA(e,i));if(t.baseState==="OFF")for(const i of a(this,Lt).values())i._setVisible(Ns,!1);for(const i of t.on)a(this,Lt).get(i)._setVisible(Ns,!0);for(const i of t.off)a(this,Lt).get(i)._setVisible(Ns,!1);x(this,Ea,this.getHash())}}isVisible(t){if(a(this,Lt).size===0)return!0;if(!t)return af("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Lt).has(t.id)?a(this,Lt).get(t.id).visible:(pt("Optional content group not found: ".concat(t.id)),!0);if(t.type==="OCMD"){if(t.expression)return S(this,sh,Ep).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Lt).has(e))return pt("Optional content group not found: ".concat(e)),!0;if(a(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Lt).has(e))return pt("Optional content group not found: ".concat(e)),!0;if(!a(this,Lt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Lt).has(e))return pt("Optional content group not found: ".concat(e)),!0;if(!a(this,Lt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Lt).has(e))return pt("Optional content group not found: ".concat(e)),!0;if(a(this,Lt).get(e).visible)return!1}return!0}return pt("Unknown optional content policy ".concat(t.policy,".")),!0}return pt("Unknown group type ".concat(t.type,".")),!0}setVisibility(t,e=!0){const i=a(this,Lt).get(t);if(!i){pt("Optional content group not found: ".concat(t));return}i._setVisible(Ns,!!e,!0),x(this,Gs,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const n=a(this,Lt).get(s);if(n)switch(i){case"ON":n._setVisible(Ns,!0);break;case"OFF":n._setVisible(Ns,!1);break;case"Toggle":n._setVisible(Ns,!n.visible);break}}x(this,Gs,null)}get hasInitialVisibility(){return a(this,Ea)===null||this.getHash()===a(this,Ea)}getOrder(){return a(this,Lt).size?a(this,xa)?a(this,xa).slice():[...a(this,Lt).keys()]:null}getGroups(){return a(this,Lt).size>0?lg(a(this,Lt)):null}getGroup(t){return a(this,Lt).get(t)||null}getHash(){if(a(this,Gs)!==null)return a(this,Gs);const t=new ib;for(const[e,i]of a(this,Lt))t.update("".concat(e,":").concat(i.visible));return x(this,Gs,t.hexdigest())}}Gs=new WeakMap,Lt=new WeakMap,Ea=new WeakMap,xa=new WeakMap,sh=new WeakSet,Ep=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const n=t[s];let o;if(Array.isArray(n))o=S(this,sh,Ep).call(this,n);else if(a(this,Lt).has(n))o=a(this,Lt).get(n).visible;else return pt("Optional content group not found: ".concat(n)),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class _A{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:n,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(n==null?void 0:n.length)>0){const c=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),t.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(n){return n._begin!==t?!1:(n._enqueue(i),!0)});Qt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}_onProgress(t){var e,i,s,n;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(n=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||n.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new EA(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new xA(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class EA{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=fg(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class xA{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function SA(m){let t=!0,e=i("filename\\*","i").exec(m);if(e){e=e[1];let f=l(e);return f=unescape(f),f=c(f),f=d(f),n(f)}if(e=o(m),e){const f=d(e);return n(f)}if(e=i("filename","i").exec(m),e){e=e[1];let f=l(e);return f=d(f),n(f)}function i(f,b){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function s(f,b){if(f){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const w=new TextDecoder(f,{fatal:!0}),C=lf(b);b=w.decode(C),t=!1}catch(w){}}return b}function n(f){return t&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),t&&(f=s("iso-8859-1",f))),f}function o(f){const b=[];let w;const C=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=C.exec(f))!==null;){let[,T,M,k]=w;if(T=parseInt(T,10),T in b){if(T===0)break;continue}b[T]=[M,k]}const E=[];for(let T=0;T<b.length&&T in b;++T){let[M,k]=b[T];k=l(k),M&&(k=unescape(k),T===0&&(k=c(k))),E.push(k)}return E.join("")}function l(f){if(f.startsWith('"')){const b=f.slice(1).split('\\"');for(let w=0;w<b.length;++w){const C=b[w].indexOf('"');C!==-1&&(b[w]=b[w].slice(0,C),b.length=w+1),b[w]=b[w].replaceAll(/\\(.)/g,"$1")}f=b.join('"')}return f}function c(f){const b=f.indexOf("'");if(b===-1)return f;const w=f.slice(0,b),E=f.slice(b+1).replace(/^[^']*'/,"");return s(w,E)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,w,C,E){if(C==="q"||C==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,M){return String.fromCharCode(parseInt(M,16))}),s(w,E);try{E=atob(E)}catch(T){}return s(w,E)})}return""}function mg({getResponseHeader:m,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(m("Content-Length"),10);return!Number.isInteger(n)||(s.suggestedLength=n,n<=2*e)||i||!t||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function bg(m){const t=m("Content-Disposition");if(t){let e=SA(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(i){}if(fg(e))return e}return null}function pf(m,t){return m===404||m===0&&t.startsWith("file:")?new Nr('Missing PDF "'+t+'".'):new of("Unexpected server response (".concat(m,') while retrieving PDF "').concat(t,'".'),m)}function lb(m){return m===200||m===206}function hb(m,t,e){return{method:"GET",headers:m,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function cb(m){const t=new Headers;for(const e in m){const i=m[e];i!==void 0&&t.append(e,i)}return t}function ub(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:(pt("getArrayBuffer - unexpected data format: ".concat(m)),new Uint8Array(m).buffer)}class ym{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return Qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new CA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new TA(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class CA{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=cb(this._stream.httpHeaders);const i=e.url;fetch(i,hb(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!lb(s.status))throw pf(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const n=c=>s.headers.get(c),{allowRangeRequests:o,suggestedLength:l}=mg({getResponseHeader:n,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=bg(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Or("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ub(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class TA{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=cb(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(e,"-").concat(i-1));const n=s.url;fetch(n,hb(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!lb(o.status))throw pf(o.status,n);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:ub(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const $f=200,zf=206;function kA(m){const t=m.response;return typeof t!="string"?t:lf(t).buffer}class LA{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const n in i)s[n]=i[n];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const o=this.httpHeaders[n];o!==void 0&&e.setRequestHeader(n,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),s.expectedStatus=zf):s.expectedStatus=$f,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){var c,d,f;const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,s.status);return}const n=s.status||$f;if(!(n===$f&&i.expectedStatus===zf)&&n!==i.expectedStatus){(d=i.onError)==null||d.call(i,s.status);return}const l=kA(s);if(n===zf){const b=s.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(b);i.onDone({begin:parseInt(w[1],10),chunk:l})}else l?i.onDone({begin:0,chunk:l}):(f=i.onError)==null||f.call(i,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class RA{constructor(t){this._source=t,this._manager=new LA(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PA(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new MA(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class PA{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=o=>e.getResponseHeader(o),{allowRangeRequests:s,suggestedLength:n}=mg({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=bg(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=pf(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class MA{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=pf(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const db=/^file:\/\/\/[a-zA-Z]:\//;function DA(m){const t=zi.get("url"),e=t.parse(m);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(m)?t.parse("file:///".concat(m)):(e.host||(e.protocol="file:"),e)}class IA{constructor(t){this.source=t,this.url=DA(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t,e;return(e=(t=this._fullRequestReader)==null?void 0:t._loaded)!=null?e:0}getFullReader(){return Qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new OA(this):new FA(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new HA(this,t,e):new NA(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class fb{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Or("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pb{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function vu(m,t){return{protocol:m.protocol,auth:m.auth,host:m.hostname,port:m.port,path:m.path,method:"GET",headers:t}}class FA extends fb{constructor(t){super(t);const e=i=>{if(i.statusCode===404){const l=new Nr('Missing PDF "'.concat(this._url,'".'));this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:n,suggestedLength:o}=mg({getResponseHeader:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=o||this._contentLength,this._filename=bg(s)};if(this._request=null,this._url.protocol==="http:"){const i=zi.get("http");this._request=i.request(vu(this._url,t.httpHeaders),e)}else{const i=zi.get("https");this._request=i.request(vu(this._url,t.httpHeaders),e)}this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class NA extends pb{constructor(t,e,i){super(t),this._httpHeaders={};for(const n in t.httpHeaders){const o=t.httpHeaders[n];o!==void 0&&(this._httpHeaders[n]=o)}this._httpHeaders.Range="bytes=".concat(e,"-").concat(i-1);const s=n=>{if(n.statusCode===404){const o=new Nr('Missing PDF "'.concat(this._url,'".'));this._storedError=o;return}this._setReadableStream(n)};if(this._request=null,this._url.protocol==="http:"){const n=zi.get("http");this._request=n.request(vu(this._url,this._httpHeaders),s)}else{const n=zi.get("https");this._request=n.request(vu(this._url,this._httpHeaders),s)}this._request.on("error",n=>{this._storedError=n}),this._request.end()}}class OA extends fb{constructor(t){super(t);let e=decodeURIComponent(this._url.path);db.test(this._url.href)&&(e=e.replace(/^\//,""));const i=zi.get("fs");i.promises.lstat(e).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Nr('Missing PDF "'.concat(e,'".'))),this._storedError=s,this._headersCapability.reject(s)})}}class HA extends pb{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);db.test(this._url.href)&&(s=s.replace(/^\//,""));const n=zi.get("fs");this._setReadableStream(n.createReadStream(s,{start:e,end:i-1}))}}const BA=1e5,Te=30,jA=.8;var Em,Xs,Le,nh,rh,Gn,ds,ah,oh,Xn,Sa,Ca,Ys,Ta,lh,ka,Yn,hh,ch,Kn,Qn,La,id,gb,sd,mb,uh,xp,Ra,Jc,nd,bb;const Ye=class Ye{constructor({textContentSource:t,container:e,viewport:i}){v(this,id);v(this,sd);v(this,uh);v(this,Xs,Promise.withResolvers());v(this,Le,null);v(this,nh,!1);v(this,rh,!!((Em=globalThis.FontInspector)!=null&&Em.enabled));v(this,Gn,null);v(this,ds,null);v(this,ah,0);v(this,oh,0);v(this,Xn,null);v(this,Sa,null);v(this,Ca,0);v(this,Ys,0);v(this,Ta,Object.create(null));v(this,lh,[]);v(this,ka,null);v(this,Yn,[]);v(this,hh,new WeakMap);v(this,ch,null);if(t instanceof ReadableStream)x(this,ka,t);else if(typeof t=="object")x(this,ka,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Le,x(this,Sa,e)),x(this,Ys,i.scale*(globalThis.devicePixelRatio||1)),x(this,Ca,i.rotation),x(this,ds,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:n,pageX:o,pageY:l}=i.rawDims;x(this,ch,[1,0,0,-1,-o,l+n]),x(this,oh,s),x(this,ah,n),Dr(e,i),a(this,Xs).promise.catch(()=>{}).then(()=>{a(Ye,La).delete(this),x(this,ds,null),x(this,Ta,null)})}render(){const t=()=>{a(this,Xn).read().then(({value:e,done:i})=>{var s;if(i){a(this,Xs).resolve();return}(s=a(this,Gn))!=null||x(this,Gn,e.lang),Object.assign(a(this,Ta),e.styles),S(this,id,gb).call(this,e.items),t()},a(this,Xs).reject)};return x(this,Xn,a(this,ka).getReader()),a(Ye,La).add(this),t(),a(this,Xs).promise}update({viewport:t,onBefore:e=null}){var n;const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==a(this,Ca)&&(e==null||e(),x(this,Ca,s),Dr(a(this,Sa),{rotation:s})),i!==a(this,Ys)){e==null||e(),x(this,Ys,i);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:S(n=Ye,Ra,Jc).call(n,a(this,Gn))};for(const l of a(this,Yn))o.properties=a(this,hh).get(l),o.div=l,S(this,uh,xp).call(this,o)}}cancel(){var e;const t=new Or("TextLayer task cancelled.");(e=a(this,Xn))==null||e.cancel(t).catch(()=>{}),x(this,Xn,null),a(this,Xs).reject(t)}get textDivs(){return a(this,Yn)}get textContentItemsStr(){return a(this,lh)}static cleanup(){if(!(a(this,La).size>0)){a(this,Kn).clear();for(const{canvas:t}of a(this,Qn).values())t.remove();a(this,Qn).clear()}}};Xs=new WeakMap,Le=new WeakMap,nh=new WeakMap,rh=new WeakMap,Gn=new WeakMap,ds=new WeakMap,ah=new WeakMap,oh=new WeakMap,Xn=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,Ys=new WeakMap,Ta=new WeakMap,lh=new WeakMap,ka=new WeakMap,Yn=new WeakMap,hh=new WeakMap,ch=new WeakMap,Kn=new WeakMap,Qn=new WeakMap,La=new WeakMap,id=new WeakSet,gb=function(t){var s,n;if(a(this,nh))return;(n=a(this,ds)).ctx||(n.ctx=S(s=Ye,Ra,Jc).call(s,a(this,Gn)));const e=a(this,Yn),i=a(this,lh);for(const o of t){if(e.length>BA){pt("Ignoring additional textDivs for performance reasons."),x(this,nh,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Le);x(this,Le,document.createElement("span")),a(this,Le).classList.add("markedContent"),o.id!==null&&a(this,Le).setAttribute("id","".concat(o.id)),l.append(a(this,Le))}else o.type==="endMarkedContent"&&x(this,Le,a(this,Le).parentNode);continue}i.push(o.str),S(this,sd,mb).call(this,o)}},sd=new WeakSet,mb=function(t){var T;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Yn).push(e);const s=J.transform(a(this,ch),t.transform);let n=Math.atan2(s[1],s[0]);const o=a(this,Ta)[t.fontName];o.vertical&&(n+=Math.PI/2);const l=a(this,rh)&&o.fontSubstitution||o.fontFamily,c=Math.hypot(s[2],s[3]),d=c*S(T=Ye,nd,bb).call(T,l,a(this,Gn));let f,b;n===0?(f=s[4],b=s[5]-d):(f=s[4]+d*Math.sin(n),b=s[5]-d*Math.cos(n));const w="calc(var(--scale-factor)*",C=e.style;a(this,Le)===a(this,Sa)?(C.left="".concat((100*f/a(this,oh)).toFixed(2),"%"),C.top="".concat((100*b/a(this,ah)).toFixed(2),"%")):(C.left="".concat(w).concat(f.toFixed(2),"px)"),C.top="".concat(w).concat(b.toFixed(2),"px)")),C.fontSize="".concat(w).concat(c.toFixed(2),"px)"),C.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,rh)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),n!==0&&(i.angle=n*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const M=Math.abs(t.transform[0]),k=Math.abs(t.transform[3]);M!==k&&Math.max(M,k)/Math.min(M,k)>1.5&&(E=!0)}if(E&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,hh).set(e,i),a(this,ds).div=e,a(this,ds).properties=i,S(this,uh,xp).call(this,a(this,ds)),i.hasText&&a(this,Le).append(e),i.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),a(this,Le).append(M)}},uh=new WeakSet,xp=function(t){const{div:e,properties:i,ctx:s,prevFontSize:n,prevFontFamily:o}=t,{style:l}=e;let c="";if(i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=l,{canvasWidth:f,fontSize:b}=i;(n!==b||o!==d)&&(s.font="".concat(b*a(this,Ys),"px ").concat(d),t.prevFontSize=b,t.prevFontFamily=d);const{width:w}=s.measureText(e.textContent);w>0&&(c="scaleX(".concat(f*a(this,Ys)/w,")"))}i.angle!==0&&(c="rotate(".concat(i.angle,"deg) ").concat(c)),c.length>0&&(l.transform=c)},Ra=new WeakSet,Jc=function(t=null){let e=a(this,Qn).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1}),a(this,Qn).set(t,e)}return e},nd=new WeakSet,bb=function(t,e){const i=a(this,Kn).get(t);if(i)return i;const s=S(this,Ra,Jc).call(this,e),n=s.font;s.canvas.width=s.canvas.height=Te,s.font="".concat(Te,"px ").concat(t);const o=s.measureText("");let l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(l){const b=l/(l+c);return a(this,Kn).set(t,b),s.canvas.width=s.canvas.height=0,s.font=n,b}s.strokeStyle="red",s.clearRect(0,0,Te,Te),s.strokeText("g",0,0);let d=s.getImageData(0,0,Te,Te).data;c=0;for(let b=d.length-1-3;b>=0;b-=4)if(d[b]>0){c=Math.ceil(b/4/Te);break}s.clearRect(0,0,Te,Te),s.strokeText("A",0,Te),d=s.getImageData(0,0,Te,Te).data,l=0;for(let b=0,w=d.length;b<w;b+=4)if(d[b]>0){l=Te-Math.floor(b/4/Te);break}s.canvas.width=s.canvas.height=0,s.font=n;const f=l?l/(l+c):jA;return a(this,Kn).set(t,f),f},v(Ye,Ra),v(Ye,nd),v(Ye,Kn,new Map),v(Ye,Qn,new Map),v(Ye,La,new Set);let wo=Ye;function qA(){Mm("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:m,container:t,viewport:e,...i}=arguments[0],s=Object.keys(i);s.length>0&&pt("Ignoring `renderTextLayer` parameters: "+s.join(", "));const n=new wo({textContentSource:m,container:t,viewport:e}),{textDivs:o,textContentItemsStr:l}=n;return{promise:n.render(),textDivs:o,textContentItemsStr:l}}function $A(){Mm("`updateTextLayer`, please use `TextLayer` instead.")}class el{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(n){var c;if(!n)return;let o=null;const l=n.name;if(l==="#text")o=n.value;else if(el.shouldBuildText(l))(c=n==null?void 0:n.attributes)!=null&&c.textContent?o=n.attributes.textContent:n.value&&(o=n.value);else return;if(o!==null&&e.push({str:o}),!!n.children)for(const d of n.children)s(d)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const zA=65536,WA=100,UA=5e3,VA=me?sA:Wy,GA=me?nA:Rm,XA=me?iA:zy,YA=me?rA:Pm;function KA(m){var Ps,Br;if(typeof m=="string"||m instanceof URL?m={url:m}:(m instanceof ArrayBuffer||ArrayBuffer.isView(m))&&(m={data:m}),typeof m!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new Sp,{docId:e}=t,i=m.url?QA(m.url):null,s=m.data?JA(m.data):null,n=m.httpHeaders||null,o=m.withCredentials===!0,l=(Ps=m.password)!=null?Ps:null,c=m.range instanceof vb?m.range:null,d=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:zA;let f=m.worker instanceof sa?m.worker:null;const b=m.verbosity,w=typeof m.docBaseUrl=="string"&&!dg(m.docBaseUrl)?m.docBaseUrl:null,C=typeof m.cMapUrl=="string"?m.cMapUrl:null,E=m.cMapPacked!==!1,T=m.CMapReaderFactory||GA,M=typeof m.standardFontDataUrl=="string"?m.standardFontDataUrl:null,k=m.StandardFontDataFactory||YA,j=m.stopAtErrors!==!0,F=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,q=m.isEvalSupported!==!1,U=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!me,W=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,p=typeof m.disableFontFace=="boolean"?m.disableFontFace:me,it=m.fontExtraProperties===!0,K=m.enableXfa===!0,bt=m.ownerDocument||globalThis.document,rt=m.disableRange===!0,Ft=m.disableStream===!0,et=m.disableAutoFetch===!0,St=m.pdfBug===!0,Dt=c?c.length:(Br=m.length)!=null?Br:NaN,ee=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!me&&!p,tt=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:T===Rm&&k===Pm&&C&&M&&jo(C,document.baseURI)&&jo(M,document.baseURI),dt=m.canvasFactory||new VA({ownerDocument:bt}),ei=m.filterFactory||new XA({docId:e,ownerDocument:bt}),pn=null;My(b);const Wi={canvasFactory:dt,filterFactory:ei};if(tt||(Wi.cMapReaderFactory=new T({baseUrl:C,isCompressed:E}),Wi.standardFontDataFactory=new k({baseUrl:M})),!f){const ze={verbosity:b,port:Ls.workerPort};f=ze.port?sa.fromPort(ze):new sa(ze),t._worker=f}const ue={docId:e,apiVersion:"4.3.136",data:s,password:l,disableAutoFetch:et,rangeChunkSize:d,length:Dt,docBaseUrl:w,enableXfa:K,evaluatorOptions:{maxImageSize:F,disableFontFace:p,ignoreErrors:j,isEvalSupported:q,isOffscreenCanvasSupported:U,canvasMaxAreaInBytes:W,fontExtraProperties:it,useSystemFonts:ee,cMapUrl:tt?C:null,standardFontDataUrl:tt?M:null}},qt={disableFontFace:p,fontExtraProperties:it,ownerDocument:bt,pdfBug:St,styleElement:pn,loadingParams:{disableAutoFetch:et,enableXfa:K}};return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ze=f.messageHandler.sendWithPromise("GetDocRequest",ue,s?[s.buffer]:null);let Ht;return c?Ht=new _A(c,{disableRange:rt,disableStream:Ft}):s||(Ht=(We=>me?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&jo(We.url)?new ym(We):new IA(We):jo(We.url)?new ym(We):new RA(We))({url:i,length:Dt,httpHeaders:n,withCredentials:o,rangeChunkSize:d,disableRange:rt,disableStream:Ft})),ze.then(Tc=>{if(t.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const We=new zo(e,Tc,f.port),De=new i0(We,t,Ht,qt,Wi);t._transport=De,We.send("Ready",null)})}).catch(t._capability.reject),t}function QA(m){if(m instanceof URL)return m.href;try{return new URL(m,window.location).href}catch(t){if(me&&typeof m=="string")return m}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function JA(m){if(me&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return lf(m);if(m instanceof ArrayBuffer||ArrayBuffer.isView(m)||typeof m=="object"&&!isNaN(m==null?void 0:m.length))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Am(m){return typeof m=="object"&&Number.isInteger(m==null?void 0:m.num)&&m.num>=0&&Number.isInteger(m==null?void 0:m.gen)&&m.gen>=0}var rd;const ad=class ad{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat(Ie(ad,rd)._++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};rd=new WeakMap,v(ad,rd,0);let Sp=ad;class vb{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ZA{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ks,fs,Qs,Jr,Pa,Zc;class t0{constructor(t,e,i,s=!1){v(this,Qs);v(this,Pa);v(this,Ks,null);v(this,fs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new am:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new yb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}={}){return new Ec({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=Hs.ENABLE,transform:n=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:f=null}){var F,q;(F=this._stats)==null||F.time("Overall");const b=this._transport.getRenderingIntent(i,s,f),{renderingIntent:w,cacheKey:C}=b;x(this,fs,!1),S(this,Pa,Zc).call(this),l||(l=this._transport.getOptionalContentConfig(w));let E=this._intentStates.get(C);E||(E=Object.create(null),this._intentStates.set(C,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const T=!!(w&ti.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(q=this._stats)==null||q.time("Page Request"),this._pumpOperatorList(b));const M=U=>{var W;E.renderTasks.delete(k),(this._maybeCleanupAfterRender||T)&&x(this,fs,!0),S(this,Qs,Jr).call(this,!T),U?(k.capability.reject(U),this._abortOperatorList({intentState:E,reason:U instanceof Error?U:new Error(U)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(W=globalThis.Stats)!=null&&W.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Tp({callback:M,params:{canvasContext:t,viewport:e,transform:n,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:d});(E.renderTasks||(E.renderTasks=new Set)).add(k);const j=k.task;return Promise.all([E.displayReadyCapability.promise,l]).then(([U,W])=>{var p;if(this.destroyed){M();return}if((p=this._stats)==null||p.time("Rendering"),!(W.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:U,optionalContentConfig:W}),k.operatorListChanged()}).catch(M),j}getOperatorList({intent:t="display",annotationMode:e=Hs.ENABLE,printAnnotationStorage:i=null}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const n=this._transport.getRenderingIntent(t,e,i,!0);let o=this._intentStates.get(n.cacheKey);o||(o=Object.create(null),this._intentStates.set(n.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(n)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>el.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function n(){o.read().then(function({value:c,done:d}){var f;if(d){i(l);return}(f=l.lang)!=null||(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),n()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};n()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),x(this,fs,!1),S(this,Pa,Zc).call(this),Promise.all(t)}cleanup(t=!1){x(this,fs,!0);const e=S(this,Qs,Jr).call(this,!1);return t&&e&&this._stats&&(this._stats=new am),e}_startRenderPage(t,e){var s,n;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(n=i.displayReadyCapability)==null||n.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&S(this,Qs,Jr).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i}){const{map:s,transfer:n}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s},n).getReader(),c=this._intentStates.get(e);c.streamReader=l;const d=()=>{l.read().then(({value:f,done:b})=>{if(b){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),d())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const b of c.renderTasks)b.operatorListChanged();S(this,Qs,Jr).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof ug){let s=WA;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Or(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,n]of this._intentStates)if(n===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ks=new WeakMap,fs=new WeakMap,Qs=new WeakSet,Jr=function(t=!1){if(S(this,Pa,Zc).call(this),!a(this,fs)||this.destroyed)return!1;if(t)return x(this,Ks,setTimeout(()=>{x(this,Ks,null),S(this,Qs,Jr).call(this,!1)},UA)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,fs,!1),!0},Pa=new WeakSet,Zc=function(){a(this,Ks)&&(clearTimeout(a(this,Ks)),x(this,Ks,null))};var Jn,od;class e0{constructor(){v(this,Jn,new Set);v(this,od,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,od).then(()=>{for(const s of a(this,Jn))s.call(this,i)})}addEventListener(t,e){a(this,Jn).add(e)}removeEventListener(t,e){a(this,Jn).delete(e)}terminate(){a(this,Jn).clear()}}Jn=new WeakMap,od=new WeakMap;const es={isWorkerDisabled:!1,fakeWorkerId:0};me&&(es.isWorkerDisabled=!0,Ls.workerSrc||(Ls.workerSrc="./pdf.worker.mjs")),es.isSameOrigin=function(m,t){let e;try{if(e=new URL(m),!e.origin||e.origin==="null")return!1}catch(s){return!1}const i=new URL(t,e);return e.origin===i.origin},es.createCDNWrapper=function(m){const t='await import("'.concat(m,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Zn,Ma,tu;const Ne=class Ne{constructor({name:t=null,port:e=null,verbosity:i=Dy()}={}){var s;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=a(Ne,Zn))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(Ne,Zn)||x(Ne,Zn,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return me?Promise.all([zi.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new zo("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!es.isWorkerDisabled&&!a(Ne,Ma,tu)){let{workerSrc:t}=Ne;try{es.isSameOrigin(window.location.href,t)||(t=es.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new zo("main","worker",e),s=()=>{e.removeEventListener("error",n),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||s()};e.addEventListener("error",n),i.on("test",l=>{if(e.removeEventListener("error",n),this.destroyed){s();return}l?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())}),i.on("ready",l=>{if(e.removeEventListener("error",n),this.destroyed){s();return}try{o()}catch(c){this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch(e){af("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){es.isWorkerDisabled||(pt("Setting up fake worker."),es.isWorkerDisabled=!0),Ne._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new e0;this._port=e;const i="fake".concat(es.fakeWorkerId++),s=new zo(i+"_worker",i,e);t.setup(s,e);const n=new zo(i,i+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=a(Ne,Zn))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,Zn))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ne(t)}static get workerSrc(){if(Ls.workerSrc)return Ls.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Ma,tu)?a(this,Ma,tu):(await No(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Zn=new WeakMap,Ma=new WeakSet,tu=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch(e){return null}},v(Ne,Ma),v(Ne,Zn,void 0);let sa=Ne;var ps,Mi,Da,Ia,Di,tr,Wo;class i0{constructor(t,e,i,s,n){v(this,tr);v(this,ps,new Map);v(this,Mi,new Map);v(this,Da,new Map);v(this,Ia,new Map);v(this,Di,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new yb,this.fontLoader=new tA({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return xt(this,"annotationStorage",new gg)}getRenderingIntent(t,e=Hs.ENABLE,i=null,s=!1){let n=ti.DISPLAY,o=bp;switch(t){case"any":n=ti.ANY;break;case"display":break;case"print":n=ti.PRINT;break;default:pt("getRenderingIntent - invalid intent: ".concat(t))}switch(e){case Hs.DISABLE:n+=ti.ANNOTATIONS_DISABLE;break;case Hs.ENABLE:break;case Hs.ENABLE_FORMS:n+=ti.ANNOTATIONS_FORMS;break;case Hs.ENABLE_STORAGE:n+=ti.ANNOTATIONS_STORAGE,o=(n&ti.PRINT&&i instanceof nb?i:this.annotationStorage).serializable;break;default:pt("getRenderingIntent - invalid annotationMode: ".concat(e))}return s&&(n+=ti.OPLIST),{renderingIntent:n,cacheKey:"".concat(n,"_").concat(o.hash),annotationStorageSerializable:o}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,Di))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,Mi).values())t.push(s._destroy());a(this,Mi).clear(),a(this,Da).clear(),a(this,Ia).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),a(this,ps).clear(),this.filterFactory.destroy(),wo.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Or("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{Qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=n=>{this._lastProgress={loaded:n.loaded,total:n.total}},s.onPull=()=>{this._fullReader.read().then(function({value:n,done:o}){if(o){s.close();return}Qt(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(n),1,[n])}).catch(n=>{s.error(n)})},s.onCancel=n=>{this._fullReader.cancel(n),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",i=>{const s=Promise.withResolvers(),n=this._fullReader;return n.headersReady.then(()=>{var o;(!n.isStreamingSupported||!n.isRangeSupported)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),n.onProgress=l=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})},s.reject),s.promise}),t.on("GetRangeReader",(i,s)=>{Qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(i.begin,i.end);if(!n){s.close();return}s.onPull=()=>{n.read().then(function({value:o,done:l}){if(l){s.close();return}Qt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{n.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new ZA(i,this))}),t.on("DocException",function(i){let s;switch(i.name){case"PasswordException":s=new Vf(i.message,i.code);break;case"InvalidPDFException":s=new Cm(i.message);break;case"MissingPDFException":s=new Nr(i.message);break;case"UnexpectedResponseException":s=new of(i.message,i.status);break;case"UnknownErrorException":s=new Gf(i.message,i.details);break;default:Rt("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",i=>{if(x(this,Di,Promise.withResolvers()),e.onPassword){const s=n=>{n instanceof Error?a(this,Di).reject(n):a(this,Di).resolve({password:n})};try{e.onPassword(s,i.code)}catch(n){a(this,Di).reject(n)}}else a(this,Di).reject(new Vf(i.message,i.code));return a(this,Di).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Mi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,n])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:d}=this._params;if("error"in n){const C=n.error;pt("Error during font loading: ".concat(C)),this.commonObjs.resolve(i,C);break}const f=d&&((o=globalThis.FontInspector)!=null&&o.enabled)?(C,E)=>globalThis.FontInspector.fontAdded(C,E):null,b=new eA(n,{disableFontFace:l,inspectFont:f});this.fontLoader.bind(b).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&b.data&&(b.data=null),this.commonObjs.resolve(i,b)});break;case"CopyLocalImage":const{imageRef:w}=n;Qt(w,"The imageRef must be defined.");for(const C of a(this,Mi).values())for(const[,E]of C.objs)if((E==null?void 0:E.ref)===w)return E.dataLen?(this.commonObjs.resolve(i,structuredClone(E)),E.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,n);break;default:throw new Error("Got unknown common object type ".concat(s))}return null}),t.on("obj",([i,s,n,o])=>{var c;if(this.destroyed)return;const l=a(this,Mi).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(n){case"Image":l.objs.resolve(i,o),(o==null?void 0:o.dataLen)>ky&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(i,o);break;default:throw new Error("Got unknown object type ".concat(n))}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i,s;this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:(s=(i=this._fullReader)==null?void 0:i.filename)!=null?s:null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Da).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&a(this,Ia).set(n.refStr,t);const o=new t0(e,n,this,this._params.pdfBug);return a(this,Mi).set(e,o),o});return a(this,Da).set(e,s),s}getPageIndex(t){return Am(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,tr,Wo).call(this,"GetFieldObjects")}hasJSActions(){return S(this,tr,Wo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,tr,Wo).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,tr,Wo).call(this,"GetOptionalContentConfig").then(e=>new wA(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,ps).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var n,o,l,c;return{info:s[0],metadata:s[1]?new yA(s[1]):null,contentDispositionFilename:(o=(n=this._fullReader)==null?void 0:n.filename)!=null?o:null,contentLength:(c=(l=this._fullReader)==null?void 0:l.contentLength)!=null?c:null}});return a(this,ps).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Mi).values())if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,ps).clear(),this.filterFactory.destroy(!0),wo.cleanup()}}cachedPageNumber(t){var i;if(!Am(t))return null;const e=t.gen===0?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);return(i=a(this,Ia).get(e))!=null?i:null}}ps=new WeakMap,Mi=new WeakMap,Da=new WeakMap,Ia=new WeakMap,Di=new WeakMap,tr=new WeakSet,Wo=function(t,e=null){const i=a(this,ps).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return a(this,ps).set(t,s),s};const zc=Symbol("INITIAL_DATA");var ci,dh,Cp;class yb{constructor(){v(this,dh);v(this,ci,Object.create(null))}get(t,e=null){if(e){const s=S(this,dh,Cp).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=a(this,ci)[t];if(!i||i.data===zc)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return i.data}has(t){const e=a(this,ci)[t];return!!e&&e.data!==zc}resolve(t,e=null){const i=S(this,dh,Cp).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,ci)){const{data:i}=a(this,ci)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}x(this,ci,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,ci)){const{data:e}=a(this,ci)[t];e!==zc&&(yield[t,e])}}}ci=new WeakMap,dh=new WeakSet,Cp=function(t){var e;return(e=a(this,ci))[t]||(e[t]={...Promise.withResolvers(),data:zc})};var Js;class s0{constructor(t){v(this,Js,null);x(this,Js,t),this.onContinue=null}get promise(){return a(this,Js).capability.promise}cancel(t=0){a(this,Js).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Js).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Js);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Js=new WeakMap;var er;const xn=class xn{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:n,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:b=!1,pageColors:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=b,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s0(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(xn,er).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(xn,er).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:n,background:o}=this.params;this.gfx=new ia(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:n,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(xn,er).delete(this._canvas),this.callback(t||new ug("Rendering cancelled, page ".concat(this._pageIndex+1),e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(xn,er).delete(this._canvas),this.callback())))}};er=new WeakMap,v(xn,er,new WeakSet);let Tp=xn;const n0="4.3.136",r0="0cec64437";function wm(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function Fo(m){return Math.max(0,Math.min(255,255*m))}class _m{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Fo(t),[t,t,t]}static G_HTML([t]){const e=wm(t);return"#".concat(e).concat(e).concat(e)}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Fo)}static RGB_HTML(t){return"#".concat(t.map(wm).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Fo(1-Math.min(1,t+s)),Fo(1-Math.min(1,i+s)),Fo(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,n=1-e,o=1-i,l=Math.min(s,n,o);return["CMYK",s,n,o,l]}}class Ab{static setupStorage(t,e,i,s,n){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),n==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),n==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),n==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:n}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name="".concat(o.name,"-").concat(s));for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&t.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,d)}l&&n.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var b,w;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,n=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:n,linkService:i});const l=n!=="richText",c=t.div;if(c.append(o),t.viewport){const C="matrix(".concat(t.viewport.transform.join(","),")");c.style.transform=C}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const C=document.createTextNode(s.value);o.append(C),l&&el.shouldBuildText(s.name)&&d.push(C)}return{textDivs:d}}const f=[[s,-1,o]];for(;f.length>0;){const[C,E,T]=f.at(-1);if(E+1===C.children.length){f.pop();continue}const M=C.children[++f.at(-1)[1]];if(M===null)continue;const{name:k}=M;if(k==="#text"){const F=document.createTextNode(M.value);d.push(F),T.append(F);continue}const j=(b=M==null?void 0:M.attributes)!=null&&b.xmlns?document.createElementNS(M.attributes.xmlns,k):document.createElement(k);if(T.append(j),M.attributes&&this.setAttributes({html:j,element:M,storage:e,intent:n,linkService:i}),((w=M.children)==null?void 0:w.length)>0)f.push([M,-1,j]);else if(M.value){const F=document.createTextNode(M.value);l&&el.shouldBuildText(k)&&d.push(F),j.append(F)}}for(const C of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))C.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e="matrix(".concat(t.viewport.transform.join(","),")");t.div.style.transform=e,t.div.hidden=!1}}const Cc=1e3,a0=9,Fr=new WeakSet;function Rs(m){return{width:m[2]-m[0],height:m[3]-m[1]}}class o0{static create(t){switch(t.data.annotationType){case Vt.LINK:return new wb(t);case Vt.TEXT:return new l0(t);case Vt.WIDGET:switch(t.data.fieldType){case"Tx":return new h0(t);case"Btn":return t.data.radioButton?new xb(t):t.data.checkBox?new u0(t):new d0(t);case"Ch":return new f0(t);case"Sig":return new c0(t)}return new Hr(t);case Vt.POPUP:return new Lp(t);case Vt.FREETEXT:return new Lb(t);case Vt.LINE:return new g0(t);case Vt.SQUARE:return new m0(t);case Vt.CIRCLE:return new b0(t);case Vt.POLYLINE:return new Rb(t);case Vt.CARET:return new y0(t);case Vt.INK:return new Pb(t);case Vt.POLYGON:return new v0(t);case Vt.HIGHLIGHT:return new A0(t);case Vt.UNDERLINE:return new w0(t);case Vt.SQUIGGLY:return new _0(t);case Vt.STRIKEOUT:return new E0(t);case Vt.STAMP:return new Mb(t);case Vt.FILEATTACHMENT:return new x0(t);default:return new zt(t)}}}var ir,Fa,Na,fh,kp;const wg=class wg{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){v(this,fh);v(this,ir,null);v(this,Fa,!1);v(this,Na,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get hasPopupData(){return wg._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,ir)||x(this,ir,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&S(this,fh,kp).call(this,e),(i=a(this,Na))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,ir)&&(S(this,fh,kp).call(this,a(this,ir).rect),(t=a(this,Na))==null||t.popup.resetEdited(),x(this,ir,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),this instanceof Hr||(n.tabIndex=Cc);const{style:o}=n;if(o.zIndex=this.parent.zIndex++,e.popupRef&&n.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof Lp){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,n),n}const{width:l,height:c}=Rs(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth="".concat(e.borderStyle.width,"px");const T=e.borderStyle.horizontalCornerRadius,M=e.borderStyle.verticalCornerRadius;if(T>0||M>0){const j="calc(".concat(T,"px * var(--scale-factor)) / calc(").concat(M,"px * var(--scale-factor))");o.borderRadius=j}else if(this instanceof xb){const j="calc(".concat(l,"px * var(--scale-factor)) / calc(").concat(c,"px * var(--scale-factor))");o.borderRadius=j}switch(e.borderStyle.style){case Do.SOLID:o.borderStyle="solid";break;case Do.DASHED:o.borderStyle="dashed";break;case Do.BEVELED:pt("Unimplemented border style: beveled");break;case Do.INSET:pt("Unimplemented border style: inset");break;case Do.UNDERLINE:o.borderBottomStyle="solid";break}const k=e.borderColor||null;k?(x(this,Fa,!0),o.borderColor=J.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):o.borderWidth=0}const d=J.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:b,pageX:w,pageY:C}=s.rawDims;o.left="".concat(100*(d[0]-w)/f,"%"),o.top="".concat(100*(d[1]-C)/b,"%");const{rotation:E}=e;return e.hasOwnCanvas||E===0?(o.width="".concat(100*l/f,"%"),o.height="".concat(100*c/b,"%")):this.setRotation(E,n),n}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:n,height:o}=Rs(this.data.rect);let l,c;t%180===0?(l=100*n/i,c=100*o/s):(l=100*o/i,c=100*n/s),e.style.width="".concat(l,"%"),e.style.height="".concat(c,"%"),e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const n=s.detail[e],o=n[0],l=n.slice(1);s.target.style[i]=_m["".concat(o,"_HTML")](l),this.annotationStorage.setValue(this.data.id,{[i]:_m["".concat(o,"_rgb")](l)})};return xt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const n=t[s]||i[s];n==null||n(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const o=i[s];if(o){const l={detail:{[s]:n},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect;if(t.length===1){const[,{x:T,y:M},{x:k,y:j}]=t[0];if(s===T&&n===M&&e===k&&i===j)return}const{style:o}=this.container;let l;if(a(this,Fa)){const{borderColor:T,borderWidth:M}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(T,'" stroke-width="').concat(M,'">')],this.container.classList.add("hasBorder")}const c=s-e,d=n-i,{svgFactory:f}=this,b=f.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);const w=f.createElement("defs");b.append(w);const C=f.createElement("clipPath"),E="clippath_".concat(this.data.id);C.setAttribute("id",E),C.setAttribute("clipPathUnits","objectBoundingBox"),w.append(C);for(const[,{x:T,y:M},{x:k,y:j}]of t){const F=f.createElement("rect"),q=(k-e)/c,U=(n-M)/d,W=(T-k)/c,p=(M-j)/d;F.setAttribute("x",q),F.setAttribute("y",U),F.setAttribute("width",W),F.setAttribute("height",p),C.append(F),l==null||l.push('<rect vector-effect="non-scaling-stroke" x="'.concat(q,'" y="').concat(U,'" width="').concat(W,'" height="').concat(p,'"/>'))}a(this,Fa)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(b),this.container.style.clipPath="url(#".concat(E,")")}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=x(this,Na,new Lp({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){Rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:n,id:o,exportValues:l}of s){if(n===-1||o===e)continue;const c=typeof l=="string"?l:null,d=document.querySelector('[data-element-id="'.concat(o,'"]'));if(d&&!Fr.has(d)){pt("_getElementsByName - element not allowed: ".concat(o));continue}i.push({id:o,exportValue:c,domElement:d})}return i}for(const s of document.getElementsByName(t)){const{exportValue:n}=s,o=s.getAttribute("data-element-id");o!==e&&Fr.has(s)&&i.push({id:o,exportValue:n,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ir=new WeakMap,Fa=new WeakMap,Na=new WeakMap,fh=new WeakSet,kp=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t);const{width:d,height:f}=Rs(t);e.left="".concat(100*(t[0]-l)/n,"%"),e.top="".concat(100*(o-t[3]+c)/o,"%"),s===0?(e.width="".concat(100*d/n,"%"),e.height="".concat(100*f/o,"%")):this.setRotation(s)};let zt=wg;var gs,An,ld,_b,hd,Eb;class wb extends zt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});v(this,gs);v(this,ld);v(this,hd);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let n=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),n=!0):e.action?(this._bindNamedAction(s,e.action),n=!0):e.attachment?(S(this,ld,_b).call(this,s,e.attachment,e.attachmentDest),n=!0):e.setOCGState?(S(this,hd,Eb).call(this,s,e.setOCGState),n=!0):e.dest?(this._bindLink(s,e.dest),n=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),n=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(s,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,gs,An).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),S(this,gs,An).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(i.actions)){const o=s.get(n);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:n}}),!1})}e.onclick||(e.onclick=()=>!1),S(this,gs,An).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),S(this,gs,An).call(this),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var b;s==null||s();const{fields:n,refs:o,include:l}=i,c=[];if(n.length!==0||o.length!==0){const w=new Set(o);for(const C of n){const E=this._fieldObjects[C]||[];for(const{id:T}of E)w.add(T)}for(const C of Object.values(this._fieldObjects))for(const E of C)w.has(E.id)===l&&c.push(E)}else for(const w of Object.values(this._fieldObjects))c.push(...w);const d=this.annotationStorage,f=[];for(const w of c){const{id:C}=w;switch(f.push(C),w.type){case"text":{const T=w.defaultValue||"";d.setValue(C,{value:T});break}case"checkbox":case"radiobutton":{const T=w.defaultValue===w.exportValues;d.setValue(C,{value:T});break}case"combobox":case"listbox":{const T=w.defaultValue||"";d.setValue(C,{value:T});break}default:continue}const E=document.querySelector('[data-element-id="'.concat(C,'"]'));if(E){if(!Fr.has(E)){pt("_bindResetFormAction - element not allowed: ".concat(C));continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}gs=new WeakSet,An=function(){this.container.setAttribute("data-internal-link","")},ld=new WeakSet,_b=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var n;return(n=this.downloadManager)==null||n.openOrDownloadData(i.content,i.filename,s),!1},S(this,gs,An).call(this)},hd=new WeakSet,Eb=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),S(this,gs,An).call(this)};class l0 extends zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Hr extends zt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}n&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(o)}}))})}_setEventListeners(t,e,i,s){var n,o,l;for(const[c,d]of i)(d==="Action"||(n=this.data.actions)!=null&&n[d])&&((d==="Focus"||d==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,d,s),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":J.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||a0,n=t.style;let o;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(d/(Hf*s))||1,b=d/f;o=Math.min(s,c(b/Hf))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(d/Hf))}n.fontSize="calc(".concat(o,"px * var(--scale-factor))"),n.color=J.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(n.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class h0 extends Hr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),n.setValue(o.id,{[s]:i})}render(){var s,n;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join("\n"))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const f={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=d!=null?d:l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",d!=null?d:l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Fr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Cc,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),f.formattedValue=null}),i.addEventListener("resetform",w=>{var E;const C=(E=this.data.defaultFieldValue)!=null?E:"";i.value=f.userValue=C,f.formattedValue=null});let b=w=>{const{formattedValue:C}=f;C!=null&&(w.target.value=C),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",C=>{var T;if(f.focused)return;const{target:E}=C;f.userValue&&(E.value=f.userValue),f.lastCommittedValue=E.value,f.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(f.focused=!0)}),i.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const E={value(T){var M;f.userValue=(M=T.detail.value)!=null?M:"",t.setValue(e,{value:f.userValue.toString()}),T.target.value=f.userValue},formattedValue(T){const{formattedValue:M}=T.detail;f.formattedValue=M,M!=null&&T.target!==document.activeElement&&(T.target.value=M),t.setValue(e,{formattedValue:M})},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var F;const{charLimit:M}=T.detail,{target:k}=T;if(M===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",M);let j=f.userValue;!j||j.length<=M||(j=j.slice(0,M),k.value=f.userValue=j,t.setValue(e,{value:j}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(E,C)}),i.addEventListener("keydown",C=>{var M;f.commitKey=1;let E=-1;if(C.key==="Escape"?E=0:C.key==="Enter"&&!this.data.multiLine?E=2:C.key==="Tab"&&(f.commitKey=3),E===-1)return;const{value:T}=C.target;f.lastCommittedValue!==T&&(f.lastCommittedValue=T,f.userValue=T,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:E,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const w=b;b=null,i.addEventListener("blur",C=>{var T,M;if(!f.focused||!C.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(f.focused=!1);const{value:E}=C.target;f.userValue=E,f.lastCommittedValue!==E&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:f.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),w(C)}),(n=this.data.actions)!=null&&n.Keystroke&&i.addEventListener("beforeinput",C=>{var U;f.lastCommittedValue=null;const{data:E,target:T}=C,{value:M,selectionStart:k,selectionEnd:j}=T;let F=k,q=j;switch(C.inputType){case"deleteWordBackward":{const W=M.substring(0,k).match(/\w*[^\w]*$/);W&&(F-=W[0].length);break}case"deleteWordForward":{const W=M.substring(k).match(/^[^\w]*\w*/);W&&(q+=W[0].length);break}case"deleteContentBackward":k===j&&(F-=1);break;case"deleteContentForward":k===j&&(q+=1);break}C.preventDefault(),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,change:E||"",willCommit:!1,selStart:F,selEnd:q}})}),this._setEventListeners(i,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(b&&i.addEventListener("blur",b),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing="calc(".concat(C,"px * var(--scale-factor) - 1ch)")}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class c0 extends Hr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class u0 extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return Fr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=Cc,n.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,i)){const f=c&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}t.setValue(i,{value:c})}),n.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class xb extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const n=document.createElement("input");if(Fr.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=Cc,n.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,i))t.setValue(d.id,{value:!1});t.setValue(i,{value:c})}),n.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;n.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const f=o===d.detail.value;for(const b of this._getElementsByName(d.target.name)){const w=f&&b.id===i;b.domElement&&(b.domElement.checked=w),t.setValue(b.id,{value:w})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class d0 extends wb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class f0 extends Hr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Fr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Cc;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const b=this.data.defaultFieldValue;for(const w of s.options)w.selected=w.value===b});for(const f of this.data.options){const b=document.createElement("option");b.textContent=f.displayValue,b.value=f.exportValue,i.value.includes(f.exportValue)&&(b.setAttribute("selected",!0),n=!1),s.append(b)}let o=null;if(n){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),o=()=>{f.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=f=>{const b=f?"value":"textContent",{options:w,multiple:C}=s;return C?Array.prototype.filter.call(w,E=>E.selected).map(E=>E[b]):w.selectedIndex===-1?null:w[w.selectedIndex][b]};let c=l(!1);const d=f=>{const b=f.target.options;return Array.prototype.map.call(b,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const b={value(w){o==null||o();const C=w.detail.value,E=new Set(Array.isArray(C)?C:[C]);for(const T of s.options)T.selected=E.has(T.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(w){s.multiple=!0},remove(w){const C=s.options,E=w.detail.remove;C[E].selected=!1,s.remove(E),C.length>0&&Array.prototype.findIndex.call(C,M=>M.selected)===-1&&(C[0].selected=!0),t.setValue(e,{value:l(!0),items:d(w)}),c=l(!1)},clear(w){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(w){const{index:C,displayValue:E,exportValue:T}=w.detail.insert,M=s.children[C],k=document.createElement("option");k.textContent=E,k.value=T,M?M.before(k):s.append(k),t.setValue(e,{value:l(!0),items:d(w)}),c=l(!1)},items(w){const{items:C}=w.detail;for(;s.length!==0;)s.remove(0);for(const E of C){const{displayValue:T,exportValue:M}=E,k=document.createElement("option");k.textContent=T,k.value=M,s.append(k)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:d(w)}),c=l(!1)},indices(w){const C=new Set(w.detail.indices);for(const E of w.target.options)E.selected=C.has(E.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(b,f)}),s.addEventListener("input",f=>{var C;const b=l(!0),w=l(!1);t.setValue(e,{value:b}),f.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:w,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Lp extends zt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:zt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new p0({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>"".concat(km).concat(i)).join(",")),this.container}}var Oa,cd,ud,Ha,sr,jt,ms,nr,ph,gh,Ba,bs,ui,vs,mh,ys,bh,rr,ar,ja,eu,vh,Rp,dd,Sb,fd,Cb,pd,Tb,gd,kb,qa,iu,$a,su,yh,Pp;class p0{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:n,contentsObj:o,richText:l,parent:c,rect:d,parentRect:f,open:b}){v(this,ja);v(this,vh);v(this,dd);v(this,fd);v(this,pd);v(this,gd);v(this,qa);v(this,$a);v(this,yh);v(this,Oa,S(this,pd,Tb).bind(this));v(this,cd,S(this,yh,Pp).bind(this));v(this,ud,S(this,$a,su).bind(this));v(this,Ha,S(this,qa,iu).bind(this));v(this,sr,null);v(this,jt,null);v(this,ms,null);v(this,nr,null);v(this,ph,null);v(this,gh,null);v(this,Ba,null);v(this,bs,!1);v(this,ui,null);v(this,vs,null);v(this,mh,null);v(this,ys,null);v(this,bh,null);v(this,rr,null);v(this,ar,!1);var w;x(this,jt,t),x(this,bh,s),x(this,ms,o),x(this,ys,l),x(this,gh,c),x(this,sr,e),x(this,mh,d),x(this,Ba,f),x(this,ph,i),x(this,nr,Dm.toDateObject(n)),this.trigger=i.flatMap(C=>C.getElementsToTriggerPopup());for(const C of this.trigger)C.addEventListener("click",a(this,Ha)),C.addEventListener("mouseenter",a(this,ud)),C.addEventListener("mouseleave",a(this,cd)),C.classList.add("popupTriggerArea");for(const C of i)(w=C.container)==null||w.addEventListener("keydown",a(this,Oa));a(this,jt).hidden=!0,b&&S(this,qa,iu).call(this)}render(){if(a(this,ui))return;const t=x(this,ui,document.createElement("div"));if(t.className="popup",a(this,sr)){const n=t.style.outlineColor=J.makeHexColor(...a(this,sr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor="color-mix(in srgb, ".concat(n," 30%, white)"):t.style.backgroundColor=J.makeHexColor(...a(this,sr).map(l=>Math.floor(.7*(255-l)+l)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,bh),t.append(e),a(this,nr)){const n=document.createElement("span");n.classList.add("popupDate"),n.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),n.setAttribute("data-l10n-args",JSON.stringify({date:a(this,nr).toLocaleDateString(),time:a(this,nr).toLocaleTimeString()})),e.append(n)}const s=a(this,ja,eu);if(s)Ab.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const n=this._formatContents(a(this,ms));t.append(n)}a(this,jt).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let n=0,o=s.length;n<o;++n){const l=s[n];i.append(document.createTextNode(l)),n<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,rr)||x(this,rr,{contentsObj:a(this,ms),richText:a(this,ys)}),t&&x(this,vs,null),e&&(x(this,ys,S(this,fd,Cb).call(this,e)),x(this,ms,null)),(i=a(this,ui))==null||i.remove(),x(this,ui,null)}resetEdited(){var t;a(this,rr)&&({contentsObj:Ie(this,ms)._,richText:Ie(this,ys)._}=a(this,rr),x(this,rr,null),(t=a(this,ui))==null||t.remove(),x(this,ui,null),x(this,vs,null))}forceHide(){x(this,ar,this.isVisible),a(this,ar)&&(a(this,jt).hidden=!0)}maybeShow(){a(this,ar)&&(a(this,ui)||S(this,$a,su).call(this),x(this,ar,!1),a(this,jt).hidden=!1)}get isVisible(){return a(this,jt).hidden===!1}}Oa=new WeakMap,cd=new WeakMap,ud=new WeakMap,Ha=new WeakMap,sr=new WeakMap,jt=new WeakMap,ms=new WeakMap,nr=new WeakMap,ph=new WeakMap,gh=new WeakMap,Ba=new WeakMap,bs=new WeakMap,ui=new WeakMap,vs=new WeakMap,mh=new WeakMap,ys=new WeakMap,bh=new WeakMap,rr=new WeakMap,ar=new WeakMap,ja=new WeakSet,eu=function(){const t=a(this,ys),e=a(this,ms);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,ys).html||null},vh=new WeakSet,Rp=function(){var t,e,i;return((i=(e=(t=a(this,ja,eu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},dd=new WeakSet,Sb=function(){var t,e,i;return((i=(e=(t=a(this,ja,eu))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},fd=new WeakSet,Cb=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,dd,Sb),fontSize:a(this,vh,Rp)?"calc(".concat(a(this,vh,Rp),"px * var(--scale-factor))"):""}};for(const n of t.split("\n"))e.push({name:"span",value:n,attributes:s});return i},pd=new WeakSet,Tb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,bs))&&S(this,qa,iu).call(this)},gd=new WeakSet,kb=function(){if(a(this,vs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=a(this,gh);let o=!!a(this,Ba),l=o?a(this,Ba):a(this,mh);for(const E of a(this,ph))if(!l||J.intersect(E.data.rect,l)!==null){l=E.data.rect,o=!0;break}const c=J.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),f=o?l[2]-l[0]+5:0,b=c[0]+f,w=c[1];x(this,vs,[100*(b-s)/e,100*(w-n)/i]);const{style:C}=a(this,jt);C.left="".concat(a(this,vs)[0],"%"),C.top="".concat(a(this,vs)[1],"%")},qa=new WeakSet,iu=function(){x(this,bs,!a(this,bs)),a(this,bs)?(S(this,$a,su).call(this),a(this,jt).addEventListener("click",a(this,Ha)),a(this,jt).addEventListener("keydown",a(this,Oa))):(S(this,yh,Pp).call(this),a(this,jt).removeEventListener("click",a(this,Ha)),a(this,jt).removeEventListener("keydown",a(this,Oa)))},$a=new WeakSet,su=function(){a(this,ui)||this.render(),this.isVisible?a(this,bs)&&a(this,jt).classList.add("focused"):(S(this,gd,kb).call(this),a(this,jt).hidden=!1,a(this,jt).style.zIndex=parseInt(a(this,jt).style.zIndex)+1e3)},yh=new WeakSet,Pp=function(){a(this,jt).classList.remove("focused"),!(a(this,bs)||!this.isVisible)&&(a(this,jt).hidden=!0,a(this,jt).style.zIndex=parseInt(a(this,jt).style.zIndex)-1e3)};class Lb extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Ah;class g0 extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});v(this,Ah,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:s}=Rs(e.rect),n=this.svgFactory.create(i,s,!0),o=x(this,Ah,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ah=new WeakMap;var wh;class m0 extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});v(this,wh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:s}=Rs(e.rect),n=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=x(this,wh,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),n.append(l),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,wh)}addHighlightArea(){this.container.classList.add("highlightArea")}}wh=new WeakMap;var _h;class b0 extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});v(this,_h,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:s}=Rs(e.rect),n=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=x(this,_h,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),n.append(l),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,_h)}addHighlightArea(){this.container.classList.add("highlightArea")}}_h=new WeakMap;var Eh;class Rb extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});v(this,Eh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:i,height:s}=Rs(e.rect),n=this.svgFactory.create(i,s,!0);let o=[];for(const c of e.vertices){const d=c.x-e.rect[0],f=e.rect[3]-c.y;o.push(d+","+f)}o=o.join(" ");const l=x(this,Eh,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),n.append(l),this.container.append(n),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Eh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Eh=new WeakMap;class v0 extends Rb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class y0 extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var xh;class Pb extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});v(this,xh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=wt.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:i,height:s}=Rs(e.rect),n=this.svgFactory.create(i,s,!0);for(const o of e.inkLists){let l=[];for(const d of o){const f=d.x-e.rect[0],b=e.rect[3]-d.y;l.push("".concat(f,",").concat(b))}l=l.join(" ");const c=this.svgFactory.createElement(this.svgElementName);a(this,xh).push(c),c.setAttribute("points",l),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),n.append(c)}return this.container.append(n),this.container}getElementsToTriggerPopup(){return a(this,xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}xh=new WeakMap;class A0 extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class w0 extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _0 extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class E0 extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Mb extends zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Sh,Ch,Mp;class x0 extends zt{constructor(e){var s;super(e,{isRenderable:!0});v(this,Ch);v(this,Sh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(i.name)?"paperclip":"pushpin",".svg"),i.fillAlpha&&i.fillAlpha<1&&(s.style="filter: opacity(".concat(Math.round(i.fillAlpha*100),"%);"))),s.addEventListener("dblclick",S(this,Ch,Mp).bind(this)),x(this,Sh,s);const{isMac:n}=Pe.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(n?o.metaKey:o.ctrlKey)&&S(this,Ch,Mp).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,Sh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sh=new WeakMap,Ch=new WeakSet,Mp=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Th,or,za,md,Db,kh,Dp;class S0{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:n,viewport:o}){v(this,md);v(this,kh);v(this,Th,null);v(this,or,null);v(this,za,new Map);this.div=t,x(this,Th,e),x(this,or,i),this.page=n,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(t){var o;const{annotations:e}=t,i=this.div;Dr(i,this.viewport);const s=new Map,n={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new cg,annotationStorage:t.annotationStorage||new gg,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Vt.POPUP;if(c){const b=s.get(l.id);if(!b)continue;n.elements=b}else{const{width:b,height:w}=Rs(l.rect);if(b<=0||w<=0)continue}n.data=l;const d=o0.create(n);if(!d.isRenderable)continue;if(!c&&l.popupRef){const b=s.get(l.popupRef);b?b.push(d):s.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),S(this,md,Db).call(this,f,l.id),d.annotationEditorType>0&&(a(this,za).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}S(this,kh,Dp).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Dr(e,{rotation:t.rotation}),S(this,kh,Dp).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,za).values())}getEditableAnnotation(t){return a(this,za).get(t)}}Th=new WeakMap,or=new WeakMap,za=new WeakMap,md=new WeakSet,Db=function(t,e){var s;const i=t.firstChild||t;i.id="".concat(km).concat(e),this.div.append(t),(s=a(this,Th))==null||s.moveElementInDOM(this.div,t,i,!1)},kh=new WeakSet,Dp=function(){if(!a(this,or))return;const t=this.div;for(const[e,i]of a(this,or)){const s=t.querySelector('[data-annotation-id="'.concat(e,'"]'));if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?n.nodeName==="CANVAS"?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i)}a(this,or).clear()};const Wc=/\r\n?|\n/g;var Lh,Rh,Ph,Mh,Dh,di,He,Ih,Be,Wa,bd,Ib,vd,Fb,yd,Nb,Ua,nu,Va,ru,Ga,au,Ad,Ob,Fh,Fp,wd,Hb;const Mt=class Mt extends kt{constructor(e){super({...e,name:"freeTextEditor"});v(this,bd);v(this,vd);v(this,yd);v(this,Ua);v(this,Ga);v(this,Ad);v(this,wd);v(this,Lh,this.editorDivBlur.bind(this));v(this,Rh,this.editorDivFocus.bind(this));v(this,Ph,this.editorDivInput.bind(this));v(this,Mh,this.editorDivKeydown.bind(this));v(this,Dh,this.editorDivPaste.bind(this));v(this,di,void 0);v(this,He,"");v(this,Ih,"".concat(this.id,"-editor"));v(this,Be,void 0);v(this,Wa,null);x(this,di,e.color||Mt._defaultColor||kt._defaultLineColor),x(this,Be,e.fontSize||Mt._defaultFontSize)}static get _keyboardManager(){const e=Mt.prototype,i=o=>o.isEmpty(),s=Ir.TRANSLATE_SMALL,n=Ir.TRANSLATE_BIG;return xt(this,"_keyboardManager",new xc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:i}]]))}static initialize(e,i){kt.initialize(e,i,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ct.FREETEXT_SIZE:Mt._defaultFontSize=i;break;case ct.FREETEXT_COLOR:Mt._defaultColor=i;break}}updateParams(e,i){switch(e){case ct.FREETEXT_SIZE:S(this,bd,Ib).call(this,i);break;case ct.FREETEXT_COLOR:S(this,vd,Fb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,Mt._defaultFontSize],[ct.FREETEXT_COLOR,Mt._defaultColor||kt._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,a(this,Be)],[ct.FREETEXT_COLOR,a(this,di)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Mt._internalPadding*e,-(Mt._internalPadding+a(this,Be))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(wt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,Mh)),this.editorDiv.addEventListener("focus",a(this,Rh)),this.editorDiv.addEventListener("blur",a(this,Lh)),this.editorDiv.addEventListener("input",a(this,Ph)),this.editorDiv.addEventListener("paste",a(this,Dh)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Ih)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,Mh)),this.editorDiv.removeEventListener("focus",a(this,Rh)),this.editorDiv.removeEventListener("blur",a(this,Lh)),this.editorDiv.removeEventListener("input",a(this,Ph)),this.editorDiv.removeEventListener("paste",a(this,Dh)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,He),i=x(this,He,S(this,yd,Nb).call(this).trimEnd());if(e===i)return;const s=n=>{if(x(this,He,n),!n){this.remove();return}S(this,Ga,au).call(this),this._uiManager.rebuild(this),S(this,Ua,nu).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),S(this,Ua,nu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Mt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Ih)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),kt._l10nPromise.get("pdfjs-free-text-default-content").then(n=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",n)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize="calc(".concat(a(this,Be),"px * var(--scale-factor))"),s.color=a(this,di),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),mu(this,this.div,["dblclick","keydown"]),this.width){const[n,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=a(this,Wa);let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[f,b]=this.pageDimensions,[w,C]=this.pageTranslation;let E,T;switch(this.rotation){case 0:E=e+(l[0]-w)/f,T=i+this.height-(l[1]-C)/b;break;case 90:E=e+(l[0]-w)/f,T=i-(l[1]-C)/b,[c,d]=[d,-c];break;case 180:E=e-this.width+(l[0]-w)/f,T=i-(l[1]-C)/b,[c,d]=[-c,-d];break;case 270:E=e+(l[0]-w-this.height*b)/f,T=i+(l[1]-C-this.width*f)/b,[c,d]=[-d,c];break}this.setAt(E*n,T*o,c,d)}else this.setAt(e*n,i*o,this.width*n,this.height*o);S(this,Ga,au).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var E,T,M;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const n=S(E=Mt,Fh,Fp).call(E,i.getData("text")||"").replaceAll(Wc,"\n");if(!n)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!n.includes("\n")){l.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,f=[],b=[];if(c.nodeType===Node.TEXT_NODE){const k=c.parentElement;if(b.push(c.nodeValue.slice(d).replaceAll(Wc,"")),k!==this.editorDiv){let j=f;for(const F of this.editorDiv.childNodes){if(F===k){j=b;continue}j.push(S(T=Mt,Va,ru).call(T,F))}}f.push(c.nodeValue.slice(0,d).replaceAll(Wc,""))}else if(c===this.editorDiv){let k=f,j=0;for(const F of this.editorDiv.childNodes)j++===d&&(k=b),k.push(S(M=Mt,Va,ru).call(M,F))}x(this,He,"".concat(f.join("\n")).concat(n).concat(b.join("\n"))),S(this,Ga,au).call(this);const w=new Range;let C=f.reduce((k,j)=>k+j.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const j=k.nodeValue.length;if(C<=j){w.setStart(k,C),w.setEnd(k,C);break}C-=j}o.removeAllRanges(),o.addRange(w)}get contentDiv(){return this.editorDiv}static deserialize(e,i,s){var l;let n=null;if(e instanceof Lb){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:f,rotation:b,id:w},textContent:C,textPosition:E,parent:{page:{pageNumber:T}}}=e;if(!C||C.length===0)return null;n=e={annotationType:wt.FREETEXT,color:Array.from(d),fontSize:c,value:C.join("\n"),position:E,pageIndex:T-1,rect:f.slice(0),rotation:b,id:w,deleted:!1}}const o=super.deserialize(e,i,s);return x(o,Be,e.fontSize),x(o,di,J.makeHexColor(...e.color)),x(o,He,S(l=Mt,Fh,Fp).call(l,e.value)),o.annotationElementId=e.id||null,x(o,Wa,n),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=Mt._internalPadding*this.parentScale,s=this.getRect(i,i),n=kt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,di)),o={annotationType:wt.FREETEXT,color:n,fontSize:a(this,Be),value:S(this,Ad,Ob).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!S(this,wd,Hb).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize="calc(".concat(a(this,Be),"px * var(--scale-factor))"),s.color=a(this,di),i.replaceChildren();for(const o of a(this,He).split("\n")){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),i.append(l)}const n=Mt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:a(this,He)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Lh=new WeakMap,Rh=new WeakMap,Ph=new WeakMap,Mh=new WeakMap,Dh=new WeakMap,di=new WeakMap,He=new WeakMap,Ih=new WeakMap,Be=new WeakMap,Wa=new WeakMap,bd=new WeakSet,Ib=function(e){const i=n=>{this.editorDiv.style.fontSize="calc(".concat(n,"px * var(--scale-factor))"),this.translate(0,-(n-a(this,Be))*this.parentScale),x(this,Be,n),S(this,Ua,nu).call(this)},s=a(this,Be);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},vd=new WeakSet,Fb=function(e){const i=n=>{x(this,di,this.editorDiv.style.color=n)},s=a(this,di);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yd=new WeakSet,Nb=function(){var i;const e=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)e.push(S(i=Mt,Va,ru).call(i,s));return e.join("\n")},Ua=new WeakSet,nu=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:n,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",n.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Va=new WeakSet,ru=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Wc,"")},Ga=new WeakSet,au=function(){if(this.editorDiv.replaceChildren(),!!a(this,He))for(const e of a(this,He).split("\n")){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},Ad=new WeakSet,Ob=function(){return a(this,He).replaceAll("Â "," ")},Fh=new WeakSet,Fp=function(e){return e.replaceAll(" ","Â ")},wd=new WeakSet,Hb=function(e){const{value:i,fontSize:s,color:n,pageIndex:o}=a(this,Wa);return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((l,c)=>l!==n[c])||e.pageIndex!==o},v(Mt,Va),v(Mt,Fh),ut(Mt,"_freeTextDefaultContent",""),ut(Mt,"_internalPadding",0),ut(Mt,"_defaultColor",null),ut(Mt,"_defaultFontSize",10),ut(Mt,"_type","freetext"),ut(Mt,"_editorType",wt.FREETEXT);let Ip=Mt;var Nh,Zs,fi,_d,Bb,Xa,ou,Ed,jb,xd,qb,Oh,Op;class Np{constructor(t,e=0,i=0,s=!0){v(this,_d);v(this,Xa);v(this,Ed);v(this,xd);v(this,Oh);v(this,Nh,void 0);v(this,Zs,[]);v(this,fi,[]);let n=1/0,o=-1/0,l=1/0,c=-1/0;const f=10**-4;for(const{x:k,y:j,width:F,height:q}of t){const U=Math.floor((k-e)/f)*f,W=Math.ceil((k+F+e)/f)*f,p=Math.floor((j-e)/f)*f,it=Math.ceil((j+q+e)/f)*f,K=[U,p,it,!0],bt=[W,p,it,!1];a(this,Zs).push(K,bt),n=Math.min(n,U),o=Math.max(o,W),l=Math.min(l,p),c=Math.max(c,it)}const b=o-n+2*i,w=c-l+2*i,C=n-i,E=l-i,T=a(this,Zs).at(s?-1:-2),M=[T[0],T[2]];for(const k of a(this,Zs)){const[j,F,q]=k;k[0]=(j-C)/b,k[1]=(F-E)/w,k[2]=(q-E)/w}x(this,Nh,{x:C,y:E,width:b,height:w,lastPoint:M})}getOutlines(){a(this,Zs).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,Zs))e[3]?(t.push(...S(this,Oh,Op).call(this,e)),S(this,Ed,jb).call(this,e)):(S(this,xd,qb).call(this,e),t.push(...S(this,Oh,Op).call(this,e)));return S(this,_d,Bb).call(this,t)}}Nh=new WeakMap,Zs=new WeakMap,fi=new WeakMap,_d=new WeakSet,Bb=function(t){const e=[],i=new Set;for(const o of t){const[l,c,d]=o;e.push([l,c,o],[l,d,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],d=e[o+1][2];c.push(d),d.push(c),i.add(c),i.add(d)}const s=[];let n;for(;i.size>0;){const o=i.values().next().value;let[l,c,d,f,b]=o;i.delete(o);let w=l,C=c;for(n=[l,d],s.push(n);;){let E;if(i.has(f))E=f;else if(i.has(b))E=b;else break;i.delete(E),[l,c,d,f,b]=E,w!==l&&(n.push(w,C,l,C===c?c:d),w=l),C=C===c?d:c}n.push(w,C)}return new C0(s,a(this,Nh))},Xa=new WeakSet,ou=function(t){const e=a(this,fi);let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,o=e[n][0];if(o===t)return n;o<t?i=n+1:s=n-1}return s+1},Ed=new WeakSet,jb=function([,t,e]){const i=S(this,Xa,ou).call(this,t);a(this,fi).splice(i,0,[t,e])},xd=new WeakSet,qb=function([,t,e]){const i=S(this,Xa,ou).call(this,t);for(let s=i;s<a(this,fi).length;s++){const[n,o]=a(this,fi)[s];if(n!==t)break;if(n===t&&o===e){a(this,fi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[n,o]=a(this,fi)[s];if(n!==t)break;if(n===t&&o===e){a(this,fi).splice(s,1);return}}},Oh=new WeakSet,Op=function(t){const[e,i,s]=t,n=[[e,i,s]],o=S(this,Xa,ou).call(this,s);for(let l=0;l<o;l++){const[c,d]=a(this,fi)[l];for(let f=0,b=n.length;f<b;f++){const[,w,C]=n[f];if(!(d<=w||C<=c)){if(w>=c){if(C>d)n[f][1]=d;else{if(b===1)return[];n.splice(f,1),f--,b--}continue}n[f][2]=c,C>d&&n.push([e,d,C])}}}return n};class $b{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Bp}}var Hh,Ya;class C0 extends $b{constructor(e,i){super();v(this,Hh,void 0);v(this,Ya,void 0);x(this,Ya,e),x(this,Hh,i)}toSVGPath(){const e=[];for(const i of a(this,Ya)){let[s,n]=i;e.push("M".concat(s," ").concat(n));for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(e.push("V".concat(c)),n=c):c===n&&(e.push("H".concat(l)),s=l)}e.push("Z")}return e.join(" ")}serialize([e,i,s,n],o){const l=[],c=s-e,d=n-i;for(const f of a(this,Ya)){const b=new Array(f.length);for(let w=0;w<f.length;w+=2)b[w]=e+f[w]*c,b[w+1]=n-f[w+1]*d;l.push(b)}return l}get box(){return a(this,Hh)}}Hh=new WeakMap,Ya=new WeakMap;var Ii,As,Ka,Qa,Fi,yt,lr,hr,Bh,jh,Ja,Za,tn,qh,Sd,Cd,$h,Hp;const Zi=class Zi{constructor({x:t,y:e},i,s,n,o,l=0){v(this,$h);v(this,Ii,void 0);v(this,As,[]);v(this,Ka,void 0);v(this,Qa,void 0);v(this,Fi,[]);v(this,yt,new Float64Array(18));v(this,lr,void 0);v(this,hr,void 0);v(this,Bh,void 0);v(this,jh,void 0);v(this,Ja,void 0);v(this,Za,void 0);v(this,tn,[]);x(this,Ii,i),x(this,Za,n*s),x(this,Qa,o),a(this,yt).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Ka,l),x(this,jh,a(Zi,qh)*s),x(this,Bh,a(Zi,Cd)*s),x(this,Ja,s),a(this,tn).push(t,e)}get free(){return!0}isEmpty(){return isNaN(a(this,yt)[8])}add({x:t,y:e}){var K;x(this,lr,t),x(this,hr,e);const[i,s,n,o]=a(this,Ii);let[l,c,d,f]=a(this,yt).subarray(8,12);const b=t-d,w=e-f,C=Math.hypot(b,w);if(C<a(this,Bh))return!1;const E=C-a(this,jh),T=E/C,M=T*b,k=T*w;let j=l,F=c;l=d,c=f,d+=M,f+=k,(K=a(this,tn))==null||K.push(t,e);const q=-k/E,U=M/E,W=q*a(this,Za),p=U*a(this,Za);return a(this,yt).set(a(this,yt).subarray(2,8),0),a(this,yt).set([d+W,f+p],4),a(this,yt).set(a(this,yt).subarray(14,18),12),a(this,yt).set([d-W,f-p],16),isNaN(a(this,yt)[6])?(a(this,Fi).length===0&&(a(this,yt).set([l+W,c+p],2),a(this,Fi).push(NaN,NaN,NaN,NaN,(l+W-i)/n,(c+p-s)/o),a(this,yt).set([l-W,c-p],14),a(this,As).push(NaN,NaN,NaN,NaN,(l-W-i)/n,(c-p-s)/o)),a(this,yt).set([j,F,l,c,d,f],6),!this.isEmpty()):(a(this,yt).set([j,F,l,c,d,f],6),Math.abs(Math.atan2(F-c,j-l)-Math.atan2(k,M))<Math.PI/2?([l,c,d,f]=a(this,yt).subarray(2,6),a(this,Fi).push(NaN,NaN,NaN,NaN,((l+d)/2-i)/n,((c+f)/2-s)/o),[l,c,j,F]=a(this,yt).subarray(14,18),a(this,As).push(NaN,NaN,NaN,NaN,((j+l)/2-i)/n,((F+c)/2-s)/o),!0):([j,F,l,c,d,f]=a(this,yt).subarray(0,6),a(this,Fi).push(((j+5*l)/6-i)/n,((F+5*c)/6-s)/o,((5*l+d)/6-i)/n,((5*c+f)/6-s)/o,((l+d)/2-i)/n,((c+f)/2-s)/o),[d,f,l,c,j,F]=a(this,yt).subarray(12,18),a(this,As).push(((j+5*l)/6-i)/n,((F+5*c)/6-s)/o,((5*l+d)/6-i)/n,((5*c+f)/6-s)/o,((l+d)/2-i)/n,((c+f)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Fi),e=a(this,As),i=a(this,yt).subarray(4,6),s=a(this,yt).subarray(16,18),[n,o,l,c]=a(this,Ii),[d,f,b,w]=S(this,$h,Hp).call(this);if(isNaN(a(this,yt)[6])&&!this.isEmpty())return"M".concat((a(this,yt)[2]-n)/l," ").concat((a(this,yt)[3]-o)/c," L").concat((a(this,yt)[4]-n)/l," ").concat((a(this,yt)[5]-o)/c," L").concat(d," ").concat(f," L").concat(b," ").concat(w," L").concat((a(this,yt)[16]-n)/l," ").concat((a(this,yt)[17]-o)/c," L").concat((a(this,yt)[14]-n)/l," ").concat((a(this,yt)[15]-o)/c," Z");const C=[];C.push("M".concat(t[4]," ").concat(t[5]));for(let E=6;E<t.length;E+=6)isNaN(t[E])?C.push("L".concat(t[E+4]," ").concat(t[E+5])):C.push("C".concat(t[E]," ").concat(t[E+1]," ").concat(t[E+2]," ").concat(t[E+3]," ").concat(t[E+4]," ").concat(t[E+5]));C.push("L".concat((i[0]-n)/l," ").concat((i[1]-o)/c," L").concat(d," ").concat(f," L").concat(b," ").concat(w," L").concat((s[0]-n)/l," ").concat((s[1]-o)/c));for(let E=e.length-6;E>=6;E-=6)isNaN(e[E])?C.push("L".concat(e[E+4]," ").concat(e[E+5])):C.push("C".concat(e[E]," ").concat(e[E+1]," ").concat(e[E+2]," ").concat(e[E+3]," ").concat(e[E+4]," ").concat(e[E+5]));return C.push("L".concat(e[4]," ").concat(e[5]," Z")),C.join(" ")}getOutlines(){var k,j;const t=a(this,Fi),e=a(this,As),i=a(this,yt),s=i.subarray(4,6),n=i.subarray(16,18),[o,l,c,d]=a(this,Ii),f=new Float64Array(((j=(k=a(this,tn))==null?void 0:k.length)!=null?j:0)+2);for(let F=0,q=f.length-2;F<q;F+=2)f[F]=(a(this,tn)[F]-o)/c,f[F+1]=(a(this,tn)[F+1]-l)/d;f[f.length-2]=(a(this,lr)-o)/c,f[f.length-1]=(a(this,hr)-l)/d;const[b,w,C,E]=S(this,$h,Hp).call(this);if(isNaN(i[6])&&!this.isEmpty()){const F=new Float64Array(36);return F.set([NaN,NaN,NaN,NaN,(i[2]-o)/c,(i[3]-l)/d,NaN,NaN,NaN,NaN,(i[4]-o)/c,(i[5]-l)/d,NaN,NaN,NaN,NaN,b,w,NaN,NaN,NaN,NaN,C,E,NaN,NaN,NaN,NaN,(i[16]-o)/c,(i[17]-l)/d,NaN,NaN,NaN,NaN,(i[14]-o)/c,(i[15]-l)/d],0),new Bp(F,f,a(this,Ii),a(this,Ja),a(this,Ka),a(this,Qa))}const T=new Float64Array(a(this,Fi).length+24+a(this,As).length);let M=t.length;for(let F=0;F<M;F+=2){if(isNaN(t[F])){T[F]=T[F+1]=NaN;continue}T[F]=t[F],T[F+1]=t[F+1]}T.set([NaN,NaN,NaN,NaN,(s[0]-o)/c,(s[1]-l)/d,NaN,NaN,NaN,NaN,b,w,NaN,NaN,NaN,NaN,C,E,NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/d],M),M+=24;for(let F=e.length-6;F>=6;F-=6)for(let q=0;q<6;q+=2){if(isNaN(e[F+q])){T[M]=T[M+1]=NaN,M+=2;continue}T[M]=e[F+q],T[M+1]=e[F+q+1],M+=2}return T.set([NaN,NaN,NaN,NaN,e[4],e[5]],M),new Bp(T,f,a(this,Ii),a(this,Ja),a(this,Ka),a(this,Qa))}};Ii=new WeakMap,As=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,Fi=new WeakMap,yt=new WeakMap,lr=new WeakMap,hr=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Ja=new WeakMap,Za=new WeakMap,tn=new WeakMap,qh=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,$h=new WeakSet,Hp=function(){const t=a(this,yt).subarray(4,6),e=a(this,yt).subarray(16,18),[i,s,n,o]=a(this,Ii);return[(a(this,lr)+(t[0]-e[0])/2-i)/n,(a(this,hr)+(t[1]-e[1])/2-s)/o,(a(this,lr)+(e[0]-t[0])/2-i)/n,(a(this,hr)+(e[1]-t[1])/2-s)/o]},v(Zi,qh,8),v(Zi,Sd,2),v(Zi,Cd,a(Zi,qh)+a(Zi,Sd));let yu=Zi;var to,cr,ws,zh,je,Wh,$t,ur,Uo,dr,Vo,Td,zb;class Bp extends $b{constructor(e,i,s,n,o,l){super();v(this,ur);v(this,dr);v(this,Td);v(this,to,void 0);v(this,cr,null);v(this,ws,void 0);v(this,zh,void 0);v(this,je,void 0);v(this,Wh,void 0);v(this,$t,void 0);x(this,$t,e),x(this,je,i),x(this,to,s),x(this,Wh,n),x(this,ws,o),x(this,zh,l),S(this,Td,zb).call(this,l);const{x:c,y:d,width:f,height:b}=a(this,cr);for(let w=0,C=e.length;w<C;w+=2)e[w]=(e[w]-c)/f,e[w+1]=(e[w+1]-d)/b;for(let w=0,C=i.length;w<C;w+=2)i[w]=(i[w]-c)/f,i[w+1]=(i[w+1]-d)/b}toSVGPath(){const e=["M".concat(a(this,$t)[4]," ").concat(a(this,$t)[5])];for(let i=6,s=a(this,$t).length;i<s;i+=6){if(isNaN(a(this,$t)[i])){e.push("L".concat(a(this,$t)[i+4]," ").concat(a(this,$t)[i+5]));continue}e.push("C".concat(a(this,$t)[i]," ").concat(a(this,$t)[i+1]," ").concat(a(this,$t)[i+2]," ").concat(a(this,$t)[i+3]," ").concat(a(this,$t)[i+4]," ").concat(a(this,$t)[i+5]))}return e.push("Z"),e.join(" ")}serialize([e,i,s,n],o){const l=s-e,c=n-i;let d,f;switch(o){case 0:d=S(this,ur,Uo).call(this,a(this,$t),e,n,l,-c),f=S(this,ur,Uo).call(this,a(this,je),e,n,l,-c);break;case 90:d=S(this,dr,Vo).call(this,a(this,$t),e,i,l,c),f=S(this,dr,Vo).call(this,a(this,je),e,i,l,c);break;case 180:d=S(this,ur,Uo).call(this,a(this,$t),s,i,-l,c),f=S(this,ur,Uo).call(this,a(this,je),s,i,-l,c);break;case 270:d=S(this,dr,Vo).call(this,a(this,$t),s,n,-l,-c),f=S(this,dr,Vo).call(this,a(this,je),s,n,-l,-c);break}return{outline:Array.from(d),points:[Array.from(f)]}}get box(){return a(this,cr)}getNewOutline(e,i){const{x:s,y:n,width:o,height:l}=a(this,cr),[c,d,f,b]=a(this,to),w=o*f,C=l*b,E=s*f+c,T=n*b+d,M=new yu({x:a(this,je)[0]*w+E,y:a(this,je)[1]*C+T},a(this,to),a(this,Wh),e,a(this,zh),i!=null?i:a(this,ws));for(let k=2;k<a(this,je).length;k+=2)M.add({x:a(this,je)[k]*w+E,y:a(this,je)[k+1]*C+T});return M.getOutlines()}}to=new WeakMap,cr=new WeakMap,ws=new WeakMap,zh=new WeakMap,je=new WeakMap,Wh=new WeakMap,$t=new WeakMap,ur=new WeakSet,Uo=function(e,i,s,n,o){const l=new Float64Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=i+e[c]*n,l[c+1]=s+e[c+1]*o;return l},dr=new WeakSet,Vo=function(e,i,s,n,o){const l=new Float64Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=i+e[c+1]*n,l[c+1]=s+e[c]*o;return l},Td=new WeakSet,zb=function(e){const i=a(this,$t);let s=i[4],n=i[5],o=s,l=n,c=s,d=n,f=s,b=n;const w=e?Math.max:Math.min;for(let k=6,j=i.length;k<j;k+=6){if(isNaN(i[k]))o=Math.min(o,i[k+4]),l=Math.min(l,i[k+5]),c=Math.max(c,i[k+4]),d=Math.max(d,i[k+5]),b<i[k+5]?(f=i[k+4],b=i[k+5]):b===i[k+5]&&(f=w(f,i[k+4]));else{const F=J.bezierBoundingBox(s,n,...i.slice(k,k+6));o=Math.min(o,F[0]),l=Math.min(l,F[1]),c=Math.max(c,F[2]),d=Math.max(d,F[3]),b<F[3]?(f=F[2],b=F[3]):b===F[3]&&(f=w(f,F[2]))}s=i[k+4],n=i[k+5]}const C=o-a(this,ws),E=l-a(this,ws),T=c-o+2*a(this,ws),M=d-l+2*a(this,ws);x(this,cr,{x:C,y:E,width:T,height:M,lastPoint:[f,b]})};var Uh,Vh,pi,fr,eo,Xt,Gh,io,Xh,Yh,en,so,Kh,jp,Qh,qp,kd,Wb,_s,wn,Ld,Ub,Ni,Os;const ts=class ts{constructor({editor:t=null,uiManager:e=null}){v(this,Kh);v(this,Qh);v(this,kd);v(this,_s);v(this,Ld);v(this,Ni);v(this,Uh,S(this,kd,Wb).bind(this));v(this,Vh,S(this,Ld,Ub).bind(this));v(this,pi,null);v(this,fr,null);v(this,eo,void 0);v(this,Xt,null);v(this,Gh,!1);v(this,io,!1);v(this,Xh,null);v(this,Yh,void 0);v(this,en,null);v(this,so,void 0);var i;t?(x(this,io,!1),x(this,so,ct.HIGHLIGHT_COLOR),x(this,Xh,t)):(x(this,io,!0),x(this,so,ct.HIGHLIGHT_DEFAULT_COLOR)),x(this,en,(t==null?void 0:t._uiManager)||e),x(this,Yh,a(this,en)._eventBus),x(this,eo,(t==null?void 0:t.color)||((i=a(this,en))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return xt(this,"_keyboardManager",new xc([[["Escape","mac+Escape"],ts.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ts.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ts.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ts.prototype._moveToPrevious],[["Home","mac+Home"],ts.prototype._moveToBeginning],[["End","mac+End"],ts.prototype._moveToEnd]]))}renderButton(){const t=x(this,pi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",S(this,_s,wn).bind(this)),t.addEventListener("keydown",a(this,Uh));const e=x(this,fr,document.createElement("span"));return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=a(this,eo),t.append(e),t}renderMainDropdown(){const t=x(this,Xt,S(this,Kh,jp).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,pi)){S(this,_s,wn).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,Qh,qp).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Ni,Os)){S(this,_s,wn).call(this,t);return}if(t.target===a(this,pi)){(e=a(this,Xt).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Xt))==null?void 0:e.firstChild)||t.target===a(this,pi)){a(this,Ni,Os)&&this._hideDropdownFromKeyboard();return}a(this,Ni,Os)||S(this,_s,wn).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Ni,Os)){S(this,_s,wn).call(this,t);return}(e=a(this,Xt).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Ni,Os)){S(this,_s,wn).call(this,t);return}(e=a(this,Xt).lastChild)==null||e.focus()}hideDropdown(){var t;(t=a(this,Xt))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",a(this,Vh))}_hideDropdownFromKeyboard(){var t;if(!a(this,io)){if(!a(this,Ni,Os)){(t=a(this,Xh))==null||t.unselect();return}this.hideDropdown(),a(this,pi).focus({preventScroll:!0,focusVisible:a(this,Gh)})}}updateColor(t){if(a(this,fr)&&(a(this,fr).style.backgroundColor=t),!a(this,Xt))return;const e=a(this,en).highlightColors.values();for(const i of a(this,Xt).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,pi))==null||t.remove(),x(this,pi,null),x(this,fr,null),(e=a(this,Xt))==null||e.remove(),x(this,Xt,null)}};Uh=new WeakMap,Vh=new WeakMap,pi=new WeakMap,fr=new WeakMap,eo=new WeakMap,Xt=new WeakMap,Gh=new WeakMap,io=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,en=new WeakMap,so=new WeakMap,Kh=new WeakSet,jp=function(){const t=document.createElement("div");t.addEventListener("contextmenu",Me),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,i]of a(this,en).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=e,s.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(e));const n=document.createElement("span");s.append(n),n.className="swatch",n.style.backgroundColor=i,s.setAttribute("aria-selected",i===a(this,eo)),s.addEventListener("click",S(this,Qh,qp).bind(this,i)),t.append(s)}return t.addEventListener("keydown",a(this,Uh)),t},Qh=new WeakSet,qp=function(t,e){e.stopPropagation(),a(this,Yh).dispatch("switchannotationeditorparams",{source:this,type:a(this,so),value:t})},kd=new WeakSet,Wb=function(t){ts._keyboardManager.exec(this,t)},_s=new WeakSet,wn=function(t){if(a(this,Ni,Os)){this.hideDropdown();return}if(x(this,Gh,t.detail===0),window.addEventListener("pointerdown",a(this,Vh)),a(this,Xt)){a(this,Xt).classList.remove("hidden");return}const e=x(this,Xt,S(this,Kh,jp).call(this));a(this,pi).append(e)},Ld=new WeakSet,Ub=function(t){var e;(e=a(this,Xt))!=null&&e.contains(t.target)||this.hideDropdown()},Ni=new WeakSet,Os=function(){return a(this,Xt)&&!a(this,Xt).classList.contains("hidden")};let Au=ts;var no,Jh,sn,pr,ro,Je,Zh,tc,gr,gi,Ae,qe,Rd,ao,mr,Yt,oo,Oi,ec,ic,$p,sc,zp,Pd,Vb,Md,Gb,Dd,Xb,nc,Wp,br,Go,nn,Zr,Id,Yb,lo,lu,vr,Xo,Fd,Kb,Nd,Qb,Od,Jb,Hd,Zb;const Et=class Et extends kt{constructor(e){super({...e,name:"highlightEditor"});v(this,ic);v(this,sc);v(this,Pd);v(this,Md);v(this,Dd);v(this,nc);v(this,br);v(this,Id);v(this,lo);v(this,vr);v(this,Fd);v(this,Nd);v(this,no,null);v(this,Jh,0);v(this,sn,void 0);v(this,pr,null);v(this,ro,null);v(this,Je,null);v(this,Zh,null);v(this,tc,0);v(this,gr,null);v(this,gi,null);v(this,Ae,null);v(this,qe,!1);v(this,Rd,S(this,Id,Yb).bind(this));v(this,ao,null);v(this,mr,void 0);v(this,Yt,null);v(this,oo,"");v(this,Oi,void 0);v(this,ec,"");this.color=e.color||Et._defaultColor,x(this,Oi,e.thickness||Et._defaultThickness),x(this,mr,e.opacity||Et._defaultOpacity),x(this,sn,e.boxes||null),x(this,ec,e.methodOfCreation||""),x(this,oo,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,qe,!0),S(this,sc,zp).call(this,e),S(this,br,Go).call(this)):(x(this,no,e.anchorNode),x(this,Jh,e.anchorOffset),x(this,Zh,e.focusNode),x(this,tc,e.focusOffset),S(this,ic,$p).call(this),S(this,br,Go).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Et.prototype;return xt(this,"_keyboardManager",new xc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,qe)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Oi),methodOfCreation:a(this,ec)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;kt.initialize(e,i),Et._defaultColor||(Et._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ct.HIGHLIGHT_DEFAULT_COLOR:Et._defaultColor=i;break;case ct.HIGHLIGHT_THICKNESS:Et._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,ao)}updateParams(e,i){switch(e){case ct.HIGHLIGHT_COLOR:S(this,Pd,Vb).call(this,i);break;case ct.HIGHLIGHT_THICKNESS:S(this,Md,Gb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_DEFAULT_COLOR,Et._defaultColor],[ct.HIGHLIGHT_THICKNESS,Et._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||Et._defaultColor],[ct.HIGHLIGHT_THICKNESS,a(this,Oi)||Et._defaultThickness],[ct.HIGHLIGHT_FREE,a(this,qe)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,ro,new Au({editor:this})),e.addColorPicker(a(this,ro))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,vr,Xo).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,S(this,vr,Xo).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){S(this,nc,Wp).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,br,Go).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?S(this,nc,Wp).call(this):e&&(S(this,br,Go).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var n,o,l;const{drawLayer:i}=this.parent;let s;a(this,qe)?(e=(e-this.rotation+360)%360,s=S(n=Et,nn,Zr).call(n,a(this,gi).box,e)):s=S(o=Et,nn,Zr).call(o,this,e),i.rotate(a(this,Ae),e),i.rotate(a(this,Yt),e),i.updateBox(a(this,Ae),s),i.updateBox(a(this,Yt),S(l=Et,nn,Zr).call(l,a(this,Je).box,e))}render(){if(this.div)return this.div;const e=super.render();a(this,oo)&&(e.setAttribute("aria-label",a(this,oo)),e.setAttribute("role","mark")),a(this,qe)?e.classList.add("free"):this.div.addEventListener("keydown",a(this,Rd));const i=x(this,gr,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,pr);const[s,n]=this.parentDimensions;return this.setDims(this.width*s,this.height*n),mu(this,a(this,gr),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(a(this,Yt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(a(this,Yt),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,lo,lu).call(this,!0);break;case 1:case 3:S(this,lo,lu).call(this,!1);break}}select(){var e,i;super.select(),a(this,Yt)&&((e=this.parent)==null||e.drawLayer.removeClass(a(this,Yt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(a(this,Yt),"selected"))}unselect(){var e;super.unselect(),a(this,Yt)&&((e=this.parent)==null||e.drawLayer.removeClass(a(this,Yt),"selected"),a(this,qe)||S(this,lo,lu).call(this,!1))}get _mustFixPosition(){return!a(this,qe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(a(this,Ae),e),this.parent.drawLayer.show(a(this,Yt),e))}static startHighlighting(e,i,{target:s,x:n,y:o}){const{x:l,y:c,width:d,height:f}=s.getBoundingClientRect(),b=T=>{S(this,Od,Jb).call(this,e,T)},w={capture:!0,passive:!1},C=T=>{T.preventDefault(),T.stopPropagation()},E=T=>{s.removeEventListener("pointermove",b),window.removeEventListener("blur",E),window.removeEventListener("pointerup",E),window.removeEventListener("pointerdown",C,w),window.removeEventListener("contextmenu",Me),S(this,Hd,Zb).call(this,e,T)};window.addEventListener("blur",E),window.addEventListener("pointerup",E),window.addEventListener("pointerdown",C,w),window.addEventListener("contextmenu",Me),s.addEventListener("pointermove",b),this._freeHighlight=new yu({x:n,y:o},[l,c,d,f],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,i,s){var T;const n=super.deserialize(e,i,s),{rect:[o,l,c,d],color:f,quadPoints:b}=e;n.color=J.makeHexColor(...f),x(n,mr,e.opacity);const[w,C]=n.pageDimensions;n.width=(c-o)/w,n.height=(d-l)/C;const E=x(n,sn,[]);for(let M=0;M<b.length;M+=8)E.push({x:(b[4]-c)/w,y:(d-(1-b[M+5]))/C,width:(b[M+2]-b[M])/w,height:(b[M+5]-b[M+1])/C});return S(T=n,ic,$p).call(T),n}serialize(e=!1){if(this.isEmpty()||e)return null;const i=this.getRect(0,0),s=kt._colorManager.convert(this.color);return{annotationType:wt.HIGHLIGHT,color:s,opacity:a(this,mr),thickness:a(this,Oi),quadPoints:S(this,Fd,Kb).call(this),outlines:S(this,Nd,Qb).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:S(this,vr,Xo).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};no=new WeakMap,Jh=new WeakMap,sn=new WeakMap,pr=new WeakMap,ro=new WeakMap,Je=new WeakMap,Zh=new WeakMap,tc=new WeakMap,gr=new WeakMap,gi=new WeakMap,Ae=new WeakMap,qe=new WeakMap,Rd=new WeakMap,ao=new WeakMap,mr=new WeakMap,Yt=new WeakMap,oo=new WeakMap,Oi=new WeakMap,ec=new WeakMap,ic=new WeakSet,$p=function(){const e=new Np(a(this,sn),.001);x(this,gi,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=a(this,gi).box;const i=new Np(a(this,sn),.0025,.001,this._uiManager.direction==="ltr");x(this,Je,i.getOutlines());const{lastPoint:s}=a(this,Je).box;x(this,ao,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},sc=new WeakSet,zp=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var b,w;if(x(this,gi,e),x(this,Je,e.getNewOutline(a(this,Oi)/2+1.5,.0025)),i>=0)x(this,Ae,i),x(this,pr,s),this.parent.drawLayer.finalizeLine(i,e),x(this,Yt,this.parent.drawLayer.highlightOutline(a(this,Je)));else if(this.parent){const C=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(a(this,Ae),e),this.parent.drawLayer.updateBox(a(this,Ae),S(b=Et,nn,Zr).call(b,a(this,gi).box,(C-this.rotation+360)%360)),this.parent.drawLayer.updateLine(a(this,Yt),a(this,Je)),this.parent.drawLayer.updateBox(a(this,Yt),S(w=Et,nn,Zr).call(w,a(this,Je).box,C))}const{x:o,y:l,width:c,height:d}=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[C,E]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*E/C,this.height=d*C/E;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[C,E]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*E/C,this.height=d*C/E;break}}const{lastPoint:f}=a(this,Je).box;x(this,ao,[(f[0]-o)/c,(f[1]-l)/d])},Pd=new WeakSet,Vb=function(e){const i=n=>{var o,l;this.color=n,(o=this.parent)==null||o.drawLayer.changeColor(a(this,Ae),n),(l=a(this,ro))==null||l.updateColor(n)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Md=new WeakSet,Gb=function(e){const i=a(this,Oi),s=n=>{x(this,Oi,n),S(this,Dd,Xb).call(this,n)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Dd=new WeakSet,Xb=function(e){if(!a(this,qe))return;S(this,sc,zp).call(this,{highlightOutlines:a(this,gi).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},nc=new WeakSet,Wp=function(){a(this,Ae)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Ae)),x(this,Ae,null),this.parent.drawLayer.remove(a(this,Yt)),x(this,Yt,null))},br=new WeakSet,Go=function(e=this.parent){a(this,Ae)===null&&({id:Ie(this,Ae)._,clipPathId:Ie(this,pr)._}=e.drawLayer.highlight(a(this,gi),this.color,a(this,mr)),x(this,Yt,e.drawLayer.highlightOutline(a(this,Je))),a(this,gr)&&(a(this,gr).style.clipPath=a(this,pr)))},nn=new WeakSet,Zr=function({x:e,y:i,width:s,height:n},o){switch(o){case 90:return{x:1-i-n,y:e,width:n,height:s};case 180:return{x:1-e-s,y:1-i-n,width:s,height:n};case 270:return{x:i,y:1-e-s,width:n,height:s}}return{x:e,y:i,width:s,height:n}},Id=new WeakSet,Yb=function(e){Et._keyboardManager.exec(this,e)},lo=new WeakSet,lu=function(e){if(!a(this,no))return;const i=window.getSelection();e?i.setPosition(a(this,no),a(this,Jh)):i.setPosition(a(this,Zh),a(this,tc))},vr=new WeakSet,Xo=function(){return a(this,qe)?this.rotation:0},Fd=new WeakSet,Kb=function(){if(a(this,qe))return null;const[e,i]=this.pageDimensions,s=a(this,sn),n=new Array(s.length*8);let o=0;for(const{x:l,y:c,width:d,height:f}of s){const b=l*e,w=(1-c-f)*i;n[o]=n[o+4]=b,n[o+1]=n[o+3]=w,n[o+2]=n[o+6]=b+d*e,n[o+5]=n[o+7]=w+f*i,o+=8}return n},Nd=new WeakSet,Qb=function(e){return a(this,gi).serialize(e,S(this,vr,Xo).call(this))},Od=new WeakSet,Jb=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Hd=new WeakSet,Zb=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},v(Et,nn),v(Et,Od),v(Et,Hd),ut(Et,"_defaultColor",null),ut(Et,"_defaultOpacity",1),ut(Et,"_defaultThickness",12),ut(Et,"_l10nPromise"),ut(Et,"_type","highlight"),ut(Et,"_editorType",wt.HIGHLIGHT),ut(Et,"_freeHighlightId",-1),ut(Et,"_freeHighlight",null),ut(Et,"_freeHighlightClipId","");let wu=Et;var yr,Ar,rc,ac,oc,wr,Hi,Es,Ze,_r,Er,xr,Sr,Cr,rn,Bd,tv,jd,ev,qd,iv,$d,sv,lc,Vp,zd,nv,hc,Gp,Wd,rv,Ud,av,Vd,ov,Gd,lv,Xd,hv,xs,_n,cc,Xp,ho,hu,co,cu,an,ta,uc,Yp,uo,uu,Yd,cv,dc,Kp,Kd,uv,Qd,dv,fc,Qp,fo,du,Tr,Yo;const Nt=class Nt extends kt{constructor(e){super({...e,name:"inkEditor"});v(this,Bd);v(this,jd);v(this,qd);v(this,$d);v(this,lc);v(this,zd);v(this,hc);v(this,Wd);v(this,Ud);v(this,Vd);v(this,Gd);v(this,Xd);v(this,xs);v(this,cc);v(this,ho);v(this,co);v(this,an);v(this,uc);v(this,uo);v(this,Qd);v(this,fc);v(this,fo);v(this,Tr);v(this,yr,0);v(this,Ar,0);v(this,rc,this.canvasPointermove.bind(this));v(this,ac,this.canvasPointerleave.bind(this));v(this,oc,this.canvasPointerup.bind(this));v(this,wr,this.canvasPointerdown.bind(this));v(this,Hi,null);v(this,Es,new Path2D);v(this,Ze,!1);v(this,_r,!1);v(this,Er,!1);v(this,xr,null);v(this,Sr,0);v(this,Cr,0);v(this,rn,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,i){kt.initialize(e,i)}static updateDefaultParams(e,i){switch(e){case ct.INK_THICKNESS:Nt._defaultThickness=i;break;case ct.INK_COLOR:Nt._defaultColor=i;break;case ct.INK_OPACITY:Nt._defaultOpacity=i/100;break}}updateParams(e,i){switch(e){case ct.INK_THICKNESS:S(this,Bd,tv).call(this,i);break;case ct.INK_COLOR:S(this,jd,ev).call(this,i);break;case ct.INK_OPACITY:S(this,qd,iv).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.INK_THICKNESS,Nt._defaultThickness],[ct.INK_COLOR,Nt._defaultColor||kt._defaultLineColor],[ct.INK_OPACITY,Math.round(Nt._defaultOpacity*100)]]}get propertiesToUpdate(){var e;return[[ct.INK_THICKNESS,this.thickness||Nt._defaultThickness],[ct.INK_COLOR,this.color||Nt._defaultColor||kt._defaultLineColor],[ct.INK_OPACITY,Math.round(100*((e=this.opacity)!=null?e:Nt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(S(this,ho,hu).call(this),S(this,co,cu).call(this)),this.isAttachedToDOM||(this.parent.add(this),S(this,an,ta).call(this)),S(this,Tr,Yo).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,Hi)&&(clearTimeout(a(this,Hi)),x(this,Hi,null)),a(this,xr).disconnect(),x(this,xr,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,i]=this.parentDimensions,s=this.width*e,n=this.height*i;this.setDimensions(s,n)}enableEditMode(){a(this,Ze)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,wr)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,wr)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,Ze)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,Ze,!0),this.div.classList.add("disabled"),S(this,Tr,Yo).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||a(this,Ze)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),S(this,zd,nv).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),S(this,hc,Gp).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),S(this,cc,Xp).call(this,e)}canvasPointerleave(e){S(this,cc,Xp).call(this,e)}get isResizable(){return!this.isEmpty()&&a(this,Ze)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,n,o,l]=S(this,$d,sv).call(this);if(this.setAt(s,n,0,0),this.setDims(o,l),S(this,ho,hu).call(this),this.width){const[c,d]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*d),this.setAt(e*c,i*d,this.width*c,this.height*d),x(this,Er,!0),S(this,an,ta).call(this),this.setDims(this.width*c,this.height*d),S(this,xs,_n).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return S(this,co,cu).call(this),this.div}setDimensions(e,i){const s=Math.round(e),n=Math.round(i);if(a(this,Sr)===s&&a(this,Cr)===n)return;x(this,Sr,s),x(this,Cr,n),this.canvas.style.visibility="hidden";const[o,l]=this.parentDimensions;this.width=e/o,this.height=i/l,this.fixAndSetPosition(),a(this,Ze)&&S(this,uc,Yp).call(this,e,i),S(this,an,ta).call(this),S(this,xs,_n).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,i,s){var M,k,j;if(e instanceof Pb)return null;const n=super.deserialize(e,i,s);n.thickness=e.thickness,n.color=J.makeHexColor(...e.color),n.opacity=e.opacity;const[o,l]=n.pageDimensions,c=n.width*o,d=n.height*l,f=n.parentScale,b=e.thickness/2;x(n,Ze,!0),x(n,Sr,Math.round(c)),x(n,Cr,Math.round(d));const{paths:w,rect:C,rotation:E}=e;for(let{bezier:F}of w){F=S(M=Nt,Kd,uv).call(M,F,C,E);const q=[];n.paths.push(q);let U=f*(F[0]-b),W=f*(F[1]-b);for(let it=2,K=F.length;it<K;it+=6){const bt=f*(F[it]-b),rt=f*(F[it+1]-b),Ft=f*(F[it+2]-b),et=f*(F[it+3]-b),St=f*(F[it+4]-b),Dt=f*(F[it+5]-b);q.push([[U,W],[bt,rt],[Ft,et],[St,Dt]]),U=St,W=Dt}const p=S(this,Yd,cv).call(this,q);n.bezierPath2D.push(p)}const T=S(k=n,fc,Qp).call(k);return x(n,Ar,Math.max(kt.MIN_SIZE,T[2]-T[0])),x(n,yr,Math.max(kt.MIN_SIZE,T[3]-T[1])),S(j=n,uc,Yp).call(j,c,d),n}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),i=kt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:wt.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:S(this,Qd,dv).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};yr=new WeakMap,Ar=new WeakMap,rc=new WeakMap,ac=new WeakMap,oc=new WeakMap,wr=new WeakMap,Hi=new WeakMap,Es=new WeakMap,Ze=new WeakMap,_r=new WeakMap,Er=new WeakMap,xr=new WeakMap,Sr=new WeakMap,Cr=new WeakMap,rn=new WeakMap,Bd=new WeakSet,tv=function(e){const i=n=>{this.thickness=n,S(this,Tr,Yo).call(this)},s=this.thickness;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},jd=new WeakSet,ev=function(e){const i=n=>{this.color=n,S(this,xs,_n).call(this)},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qd=new WeakSet,iv=function(e){const i=n=>{this.opacity=n,S(this,xs,_n).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$d=new WeakSet,sv=function(){const{parentRotation:e,parentDimensions:[i,s]}=this;switch(e){case 90:return[0,s,s,i];case 180:return[i,s,i,s];case 270:return[i,0,s,i];default:return[0,0,i,s]}},lc=new WeakSet,Vp=function(){const{ctx:e,color:i,opacity:s,thickness:n,parentScale:o,scaleFactor:l}=this;e.lineWidth=n*o/l,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(i).concat(Ky(s))},zd=new WeakSet,nv=function(e,i){var s;this.canvas.addEventListener("contextmenu",Me),this.canvas.addEventListener("pointerleave",a(this,ac)),this.canvas.addEventListener("pointermove",a(this,rc)),this.canvas.addEventListener("pointerup",a(this,oc)),this.canvas.removeEventListener("pointerdown",a(this,wr)),this.isEditing=!0,a(this,Er)||(x(this,Er,!0),S(this,an,ta).call(this),this.thickness||(this.thickness=Nt._defaultThickness),this.color||(this.color=Nt._defaultColor||kt._defaultLineColor),(s=this.opacity)!=null||(this.opacity=Nt._defaultOpacity)),this.currentPath.push([e,i]),x(this,_r,!1),S(this,lc,Vp).call(this),x(this,rn,()=>{S(this,Vd,ov).call(this),a(this,rn)&&window.requestAnimationFrame(a(this,rn))}),window.requestAnimationFrame(a(this,rn))},hc=new WeakSet,Gp=function(e,i){const[s,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&i===n)return;const o=this.currentPath;let l=a(this,Es);if(o.push([e,i]),x(this,_r,!0),o.length<=2){l.moveTo(...o[0]),l.lineTo(e,i);return}o.length===3&&(x(this,Es,l=new Path2D),l.moveTo(...o[0])),S(this,Gd,lv).call(this,l,...o.at(-3),...o.at(-2),e,i)},Wd=new WeakSet,rv=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);a(this,Es).lineTo(...e)},Ud=new WeakSet,av=function(e,i){x(this,rn,null),e=Math.min(Math.max(e,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),S(this,hc,Gp).call(this,e,i),S(this,Wd,rv).call(this);let s;if(this.currentPath.length!==1)s=S(this,Xd,hv).call(this);else{const d=[e,i];s=[[d,d.slice(),d.slice(),d]]}const n=a(this,Es),o=this.currentPath;this.currentPath=[],x(this,Es,new Path2D);const l=()=>{this.allRawPaths.push(o),this.paths.push(s),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(S(this,ho,hu).call(this),S(this,co,cu).call(this)),S(this,Tr,Yo).call(this))};this.addCommands({cmd:l,undo:c,mustExec:!0})},Vd=new WeakSet,ov=function(){if(!a(this,_r))return;x(this,_r,!1);const e=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),s=i.map(l=>l[0]),n=i.map(l=>l[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...n)-e,Math.max(...n)+e;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)o.stroke(l);o.stroke(a(this,Es)),o.restore()},Gd=new WeakSet,lv=function(e,i,s,n,o,l,c){const d=(i+n)/2,f=(s+o)/2,b=(n+l)/2,w=(o+c)/2;e.bezierCurveTo(d+2*(n-d)/3,f+2*(o-f)/3,b+2*(n-b)/3,w+2*(o-w)/3,b,w)},Xd=new WeakSet,hv=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const i=[];let s,[n,o]=e[0];for(s=1;s<e.length-2;s++){const[C,E]=e[s],[T,M]=e[s+1],k=(C+T)/2,j=(E+M)/2,F=[n+2*(C-n)/3,o+2*(E-o)/3],q=[k+2*(C-k)/3,j+2*(E-j)/3];i.push([[n,o],F,q,[k,j]]),[n,o]=[k,j]}const[l,c]=e[s],[d,f]=e[s+1],b=[n+2*(l-n)/3,o+2*(c-o)/3],w=[d+2*(l-d)/3,f+2*(c-f)/3];return i.push([[n,o],b,w,[d,f]]),i},xs=new WeakSet,_n=function(){if(this.isEmpty()){S(this,uo,uu).call(this);return}S(this,lc,Vp).call(this);const{canvas:e,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),S(this,uo,uu).call(this);for(const s of this.bezierPath2D)i.stroke(s)},cc=new WeakSet,Xp=function(e){this.canvas.removeEventListener("pointerleave",a(this,ac)),this.canvas.removeEventListener("pointermove",a(this,rc)),this.canvas.removeEventListener("pointerup",a(this,oc)),this.canvas.addEventListener("pointerdown",a(this,wr)),a(this,Hi)&&clearTimeout(a(this,Hi)),x(this,Hi,setTimeout(()=>{x(this,Hi,null),this.canvas.removeEventListener("contextmenu",Me)},10)),S(this,Ud,av).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ho=new WeakSet,hu=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},co=new WeakSet,cu=function(){x(this,xr,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),a(this,xr).observe(this.div)},an=new WeakSet,ta=function(){if(!a(this,Er))return;const[e,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*i),S(this,uo,uu).call(this)},uc=new WeakSet,Yp=function(e,i){const s=S(this,fo,du).call(this),n=(e-s)/a(this,Ar),o=(i-s)/a(this,yr);this.scaleFactor=Math.min(n,o)},uo=new WeakSet,uu=function(){const e=S(this,fo,du).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Yd=new WeakSet,cv=function(e){const i=new Path2D;for(let s=0,n=e.length;s<n;s++){const[o,l,c,d]=e[s];s===0&&i.moveTo(...o),i.bezierCurveTo(l[0],l[1],c[0],c[1],d[0],d[1])}return i},dc=new WeakSet,Kp=function(e,i,s){const[n,o,l,c]=i;switch(s){case 0:for(let d=0,f=e.length;d<f;d+=2)e[d]+=n,e[d+1]=c-e[d+1];break;case 90:for(let d=0,f=e.length;d<f;d+=2){const b=e[d];e[d]=e[d+1]+n,e[d+1]=b+o}break;case 180:for(let d=0,f=e.length;d<f;d+=2)e[d]=l-e[d],e[d+1]+=o;break;case 270:for(let d=0,f=e.length;d<f;d+=2){const b=e[d];e[d]=l-e[d+1],e[d+1]=c-b}break;default:throw new Error("Invalid rotation")}return e},Kd=new WeakSet,uv=function(e,i,s){const[n,o,l,c]=i;switch(s){case 0:for(let d=0,f=e.length;d<f;d+=2)e[d]-=n,e[d+1]=c-e[d+1];break;case 90:for(let d=0,f=e.length;d<f;d+=2){const b=e[d];e[d]=e[d+1]-o,e[d+1]=b-n}break;case 180:for(let d=0,f=e.length;d<f;d+=2)e[d]=l-e[d],e[d+1]-=o;break;case 270:for(let d=0,f=e.length;d<f;d+=2){const b=e[d];e[d]=c-e[d+1],e[d+1]=l-b}break;default:throw new Error("Invalid rotation")}return e},Qd=new WeakSet,dv=function(e,i,s,n){var f,b;const o=[],l=this.thickness/2,c=e*i+l,d=e*s+l;for(const w of this.paths){const C=[],E=[];for(let T=0,M=w.length;T<M;T++){const[k,j,F,q]=w[T];if(k[0]===q[0]&&k[1]===q[1]&&M===1){const et=e*k[0]+c,St=e*k[1]+d;C.push(et,St),E.push(et,St);break}const U=e*k[0]+c,W=e*k[1]+d,p=e*j[0]+c,it=e*j[1]+d,K=e*F[0]+c,bt=e*F[1]+d,rt=e*q[0]+c,Ft=e*q[1]+d;T===0&&(C.push(U,W),E.push(U,W)),C.push(p,it,K,bt,rt,Ft),E.push(p,it),T===M-1&&E.push(rt,Ft)}o.push({bezier:S(f=Nt,dc,Kp).call(f,C,n,this.rotation),points:S(b=Nt,dc,Kp).call(b,E,n,this.rotation)})}return o},fc=new WeakSet,Qp=function(){let e=1/0,i=-1/0,s=1/0,n=-1/0;for(const o of this.paths)for(const[l,c,d,f]of o){const b=J.bezierBoundingBox(...l,...c,...d,...f);e=Math.min(e,b[0]),s=Math.min(s,b[1]),i=Math.max(i,b[2]),n=Math.max(n,b[3])}return[e,s,i,n]},fo=new WeakSet,du=function(){return a(this,Ze)?Math.ceil(this.thickness*this.parentScale):0},Tr=new WeakSet,Yo=function(e=!1){if(this.isEmpty())return;if(!a(this,Ze)){S(this,xs,_n).call(this);return}const i=S(this,fc,Qp).call(this),s=S(this,fo,du).call(this);x(this,Ar,Math.max(kt.MIN_SIZE,i[2]-i[0])),x(this,yr,Math.max(kt.MIN_SIZE,i[3]-i[1]));const n=Math.ceil(s+a(this,Ar)*this.scaleFactor),o=Math.ceil(s+a(this,yr)*this.scaleFactor),[l,c]=this.parentDimensions;this.width=n/l,this.height=o/c,this.setAspectRatio(n,o);const d=this.translationX,f=this.translationY;this.translationX=-i[0],this.translationY=-i[1],S(this,an,ta).call(this),S(this,xs,_n).call(this),x(this,Sr,n),x(this,Cr,o),this.setDims(n,o);const b=e?s/this.scaleFactor/2:0;this.translate(d-this.translationX-b,f-this.translationY-b)},v(Nt,Yd),v(Nt,dc),v(Nt,Kd),ut(Nt,"_defaultColor",null),ut(Nt,"_defaultOpacity",1),ut(Nt,"_defaultThickness",1),ut(Nt,"_type","ink"),ut(Nt,"_editorType",wt.INK);let Up=Nt;var he,ce,on,Ss,ln,po,Bi,kr,ji,mi,pc,Lr,Ko,Rr,Qo,go,fu,gc,Zp,Jd,fv,Zd,pv,mc,tg,mo,pu,tf,gv;const tl=class tl extends kt{constructor(e){super({...e,name:"stampEditor"});v(this,Lr);v(this,Rr);v(this,go);v(this,gc);v(this,Jd);v(this,Zd);v(this,mc);v(this,mo);v(this,tf);v(this,he,null);v(this,ce,null);v(this,on,null);v(this,Ss,null);v(this,ln,null);v(this,po,"");v(this,Bi,null);v(this,kr,null);v(this,ji,null);v(this,mi,!1);v(this,pc,!1);x(this,Ss,e.bitmapUrl),x(this,ln,e.bitmapFile)}static initialize(e,i){kt.initialize(e,i)}static get supportedTypes(){return xt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>"image/".concat(i)))}static get supportedTypesStr(){return xt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(wt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,i;a(this,ce)&&(x(this,he,null),this._uiManager.imageManager.deleteId(a(this,ce)),(e=a(this,Bi))==null||e.remove(),x(this,Bi,null),(i=a(this,kr))==null||i.disconnect(),x(this,kr,null),a(this,ji)&&(clearTimeout(a(this,ji)),x(this,ji,null))),super.remove()}rebuild(){if(!this.parent){a(this,ce)&&S(this,go,fu).call(this);return}super.rebuild(),this.div!==null&&(a(this,ce)&&a(this,Bi)===null&&S(this,go,fu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,on)||a(this,he)||a(this,Ss)||a(this,ln)||a(this,ce))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,he)?S(this,gc,Zp).call(this):S(this,go,fu).call(this),this.width){const[s,n]=this.parentDimensions;this.setAt(e*s,i*n,this.width*s,this.height*n)}return this.div}getImageForAltText(){return a(this,Bi)}static deserialize(e,i,s){if(e instanceof Mb)return null;const n=super.deserialize(e,i,s),{rect:o,bitmapUrl:l,bitmapId:c,isSvg:d,accessibilityData:f}=e;c&&s.imageManager.isValidId(c)?x(n,ce,c):x(n,Ss,l),x(n,mi,d);const[b,w]=n.pageDimensions;return n.width=(o[2]-o[0])/b,n.height=(o[3]-o[1])/w,f&&(n.altTextData=f),n}serialize(e=!1,i=null){if(this.isEmpty())return null;const s={annotationType:wt.STAMP,bitmapId:a(this,ce),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,mi),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=S(this,mo,pu).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:n,altText:o}=this.altTextData;if(!n&&o&&(s.accessibilityData={type:"Figure",alt:o}),i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,mi)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,ce)))i.stamps.set(a(this,ce),{area:l,serialized:s}),s.bitmap=S(this,mo,pu).call(this,!1);else if(a(this,mi)){const c=i.stamps.get(a(this,ce));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,mo,pu).call(this,!1))}return s}};he=new WeakMap,ce=new WeakMap,on=new WeakMap,Ss=new WeakMap,ln=new WeakMap,po=new WeakMap,Bi=new WeakMap,kr=new WeakMap,ji=new WeakMap,mi=new WeakMap,pc=new WeakMap,Lr=new WeakSet,Ko=function(e,i=!1){if(!e){this.remove();return}x(this,he,e.bitmap),i||(x(this,ce,e.id),x(this,mi,e.isSvg)),e.file&&x(this,po,e.file.name),S(this,gc,Zp).call(this)},Rr=new WeakSet,Qo=function(){x(this,on,null),this._uiManager.enableWaiting(!1),a(this,Bi)&&this.div.focus()},go=new WeakSet,fu=function(){if(a(this,ce)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,ce)).then(i=>S(this,Lr,Ko).call(this,i,!0)).finally(()=>S(this,Rr,Qo).call(this));return}if(a(this,Ss)){const i=a(this,Ss);x(this,Ss,null),this._uiManager.enableWaiting(!0),x(this,on,this._uiManager.imageManager.getFromUrl(i).then(s=>S(this,Lr,Ko).call(this,s)).finally(()=>S(this,Rr,Qo).call(this)));return}if(a(this,ln)){const i=a(this,ln);x(this,ln,null),this._uiManager.enableWaiting(!0),x(this,on,this._uiManager.imageManager.getFromFile(i).then(s=>S(this,Lr,Ko).call(this,s)).finally(()=>S(this,Rr,Qo).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=tl.supportedTypesStr,x(this,on,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);S(this,Lr,Ko).call(this,s)}i()}),e.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>S(this,Rr,Qo).call(this))),e.click()},gc=new WeakSet,Zp=function(){const{div:e}=this;let{width:i,height:s}=a(this,he);const[n,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*n,s=this.height*o;else if(i>l*n||s>l*o){const b=Math.min(l*n/i,l*o/s);i*=b,s*=b}const[c,d]=this.parentDimensions;this.setDims(i*c/n,s*d/o),this._uiManager.enableWaiting(!1);const f=x(this,Bi,document.createElement("canvas"));e.append(f),e.hidden=!1,S(this,mc,tg).call(this,i,s),S(this,tf,gv).call(this),a(this,pc)||(this.parent.addUndoableEditor(this),x(this,pc,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,po)&&f.setAttribute("aria-label",a(this,po))},Jd=new WeakSet,fv=function(e,i){var l;const[s,n]=this.parentDimensions;this.width=e/s,this.height=i/n,this.setDims(e,i),(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,ji)!==null&&clearTimeout(a(this,ji)),x(this,ji,setTimeout(()=>{x(this,ji,null),S(this,mc,tg).call(this,e,i)},200))},Zd=new WeakSet,pv=function(e,i){const{width:s,height:n}=a(this,he);let o=s,l=n,c=a(this,he);for(;o>2*e||l>2*i;){const d=o,f=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const b=new OffscreenCanvas(o,l);b.getContext("2d").drawImage(c,0,0,d,f,0,0,o,l),c=b.transferToImageBitmap()}return c},mc=new WeakSet,tg=function(e,i){e=Math.ceil(e),i=Math.ceil(i);const s=a(this,Bi);if(!s||s.width===e&&s.height===i)return;s.width=e,s.height=i;const n=a(this,mi)?a(this,he):S(this,Zd,pv).call(this,e,i);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(e,i).getContext("2d");c.drawImage(n,0,0,n.width,n.height,0,0,e,i),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,e,i).data,width:e,height:i,channels:4}}).then(d=>{const f=(d==null?void 0:d.output)||"";this.parent&&f&&!this.hasAltText()&&(this.altTextData={altText:f,decorative:!1})})}const o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(n,0,0,n.width,n.height,0,0,e,i)},mo=new WeakSet,pu=function(e){if(e){if(a(this,mi)){const n=this._uiManager.imageManager.getSvgUrl(a(this,ce));if(n)return n}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,he),i.getContext("2d").drawImage(a(this,he),0,0),i.toDataURL()}if(a(this,mi)){const[i,s]=this.pageDimensions,n=Math.round(this.width*i*dn.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*dn.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(n,o);return l.getContext("2d").drawImage(a(this,he),0,0,a(this,he).width,a(this,he).height,0,0,n,o),l.transferToImageBitmap()}return structuredClone(a(this,he))},tf=new WeakSet,gv=function(){x(this,kr,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&S(this,Jd,fv).call(this,i.width,i.height)})),a(this,kr).observe(this.div)},ut(tl,"_type","stamp"),ut(tl,"_editorType",wt.STAMP);let Jp=tl;var Pr,bo,qi,Mr,Cs,Ts,ks,$e,hn,vo,yo,we,nt,cn,ef,mv,bc,ig,vc,sg,yc,ng,Ao,gu;const ni=class ni{constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:s,annotationLayer:n,drawLayer:o,textLayer:l,viewport:c,l10n:d}){v(this,ef);v(this,bc);v(this,vc);v(this,yc);v(this,Ao);v(this,Pr,void 0);v(this,bo,!1);v(this,qi,null);v(this,Mr,null);v(this,Cs,null);v(this,Ts,null);v(this,ks,null);v(this,$e,new Map);v(this,hn,!1);v(this,vo,!1);v(this,yo,!1);v(this,we,null);v(this,nt,void 0);const f=[...a(ni,cn).values()];if(!ni._initialized){ni._initialized=!0;for(const b of f)b.initialize(d,t)}t.registerEditorTypes(f),x(this,nt,t),this.pageIndex=e,this.div=i,x(this,Pr,s),x(this,qi,n),this.viewport=c,x(this,we,l),this.drawLayer=o,a(this,nt).addLayer(this)}get isEmpty(){return a(this,$e).size===0}get isInvisible(){return this.isEmpty&&a(this,nt).getMode()===wt.NONE}updateToolbar(t){a(this,nt).updateToolbar(t)}updateMode(t=a(this,nt).getMode()){switch(S(this,Ao,gu).call(this),t){case wt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case wt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(ni,cn).values())e.toggle("".concat(i._type,"Editing"),t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,we))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(a(this,nt).getMode()!==wt.INK)return;if(!t){for(const i of a(this,$e).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){a(this,nt).setEditingState(t)}addCommands(t){a(this,nt).addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,qi))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,$e).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,nt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,qi))return;const e=a(this,qi).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,nt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const s=this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;x(this,yo,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const n of a(this,$e).values())if(n.disableEditing(),!!n.annotationElementId){if(n.serialize()!==null){t.set(n.annotationElementId,n);continue}else e.set(n.annotationElementId,n);(s=this.getEditableAnnotation(n.annotationElementId))==null||s.show(),n.remove()}if(a(this,qi)){const n=a(this,qi).getEditableAnnotations();for(const o of n){const{id:l}=o.data;if(a(this,nt).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,nt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o),c.show(!1)),o.show()}}S(this,Ao,gu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const n of a(ni,cn).values())i.remove("".concat(n._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,yo,!1)}getEditableAnnotation(t){var e;return((e=a(this,qi))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,nt).getActive()!==t&&a(this,nt).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=a(this,we))!=null&&t.div&&!a(this,Ts)&&(x(this,Ts,S(this,ef,mv).bind(this)),a(this,we).div.addEventListener("pointerdown",a(this,Ts)),a(this,we).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,we))!=null&&t.div&&a(this,Ts)&&(a(this,we).div.removeEventListener("pointerdown",a(this,Ts)),x(this,Ts,null),a(this,we).div.classList.remove("highlighting"))}enableClick(){a(this,Cs)||(x(this,Cs,this.pointerdown.bind(this)),x(this,Mr,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",a(this,Cs)),this.div.addEventListener("pointerup",a(this,Mr)))}disableClick(){a(this,Cs)&&(this.div.removeEventListener("pointerdown",a(this,Cs)),this.div.removeEventListener("pointerup",a(this,Mr)),x(this,Cs,null),x(this,Mr,null))}attach(t){a(this,$e).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,nt).isDeletedAnnotationElement(e)&&a(this,nt).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,$e).delete(t.id),(e=a(this,Pr))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,yo)&&t.annotationElementId&&a(this,nt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,nt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,a(this,vo)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,nt).addDeletedAnnotationElement(t.annotationElementId),kt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,nt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),a(this,nt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,ks)&&(t._focusEventsAllowed=!1,x(this,ks,setTimeout(()=>{x(this,ks,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),e.focus())},0))),t._structTreeParentId=(i=a(this,Pr))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,nt).getId()}canCreateNewEmptyEditor(){var t;return(t=a(this,bc,ig))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,nt).updateToolbar(t),a(this,nt).updateMode(t);const{offsetX:i,offsetY:s}=S(this,yc,ng).call(this),n=this.getNextId(),o=S(this,vc,sg).call(this,{parent:this,id:n,x:i,y:s,uiManager:a(this,nt),isCentered:!0,...e});o&&this.add(o)}deserialize(t){var e,i;return((i=a(ni,cn).get((e=t.annotationType)!=null?e:t.annotationEditorType))==null?void 0:i.deserialize(t,this,a(this,nt)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),n=S(this,vc,sg).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,nt),isCentered:e,...i});return n&&this.add(n),n}addNewEditor(){this.createAndAddNewEditor(S(this,yc,ng).call(this),!0)}setSelected(t){a(this,nt).setSelected(t)}toggleSelected(t){a(this,nt).toggleSelected(t)}isSelected(t){return a(this,nt).isSelected(t)}unselect(t){a(this,nt).unselect(t)}pointerup(t){const{isMac:e}=Pe.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,hn)){if(x(this,hn,!1),!a(this,bo)){x(this,bo,!0);return}if(a(this,nt).getMode()===wt.STAMP){a(this,nt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(a(this,nt).getMode()===wt.HIGHLIGHT&&this.enableTextSelection(),a(this,hn)){x(this,hn,!1);return}const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;x(this,hn,!0);const i=a(this,nt).getActive();x(this,bo,!i||i.isEmpty())}findNewParent(t,e,i){const s=a(this,nt).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=a(this,nt).getActive())==null?void 0:t.parent)===this&&(a(this,nt).commitOrRemove(),a(this,nt).setActiveEditor(null)),a(this,ks)&&(clearTimeout(a(this,ks)),x(this,ks,null));for(const i of a(this,$e).values())(e=a(this,Pr))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,$e).clear(),a(this,nt).removeLayer(this)}render({viewport:t}){this.viewport=t,Dr(this.div,t);for(const e of a(this,nt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,nt).commitOrRemove(),S(this,Ao,gu).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Dr(this.div,{rotation:i}),e!==i)for(const s of a(this,$e).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,nt).viewParameters.realScale}};Pr=new WeakMap,bo=new WeakMap,qi=new WeakMap,Mr=new WeakMap,Cs=new WeakMap,Ts=new WeakMap,ks=new WeakMap,$e=new WeakMap,hn=new WeakMap,vo=new WeakMap,yo=new WeakMap,we=new WeakMap,nt=new WeakMap,cn=new WeakMap,ef=new WeakSet,mv=function(t){if(a(this,nt).unselectAll(),t.target===a(this,we).div){const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e)return;a(this,nt).showAllEditors("highlight",!0,!0),a(this,we).div.classList.add("free"),wu.startHighlighting(this,a(this,nt).direction==="ltr",t),a(this,we).div.addEventListener("pointerup",()=>{a(this,we).div.classList.remove("free")},{once:!0}),t.preventDefault()}},bc=new WeakSet,ig=function(){return a(ni,cn).get(a(this,nt).getMode())},vc=new WeakSet,sg=function(t){const e=a(this,bc,ig);return e?new e.prototype.constructor(t):null},yc=new WeakSet,ng=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),n=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+s),d=(n+l)/2-t,f=(o+c)/2-e,[b,w]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:b,offsetY:w}},Ao=new WeakSet,gu=function(){x(this,vo,!0);for(const t of a(this,$e).values())t.isEmpty()&&t.remove();x(this,vo,!1)},ut(ni,"_initialized",!1),v(ni,cn,new Map([Ip,Up,Jp,wu].map(t=>[t._editorType,t])));let eg=ni;var $i,Ac,Kt,un,wc,ag,_c,og,sf,bv;const se=class se{constructor({pageIndex:t}){v(this,_c);v(this,sf);v(this,$i,null);v(this,Ac,0);v(this,Kt,new Map);v(this,un,new Map);this.pageIndex=t}setParent(t){if(!a(this,$i)){x(this,$i,t);return}if(a(this,$i)!==t){if(a(this,Kt).size>0)for(const e of a(this,Kt).values())e.remove(),t.append(e);x(this,$i,t)}}static get _svgFactory(){return xt(this,"_svgFactory",new cg)}highlight(t,e,i,s=!1){const n=Ie(this,Ac)._++,o=S(this,_c,og).call(this,t.box);o.classList.add("highlight"),t.free&&o.classList.add("free");const l=se._svgFactory.createElement("defs");o.append(l);const c=se._svgFactory.createElement("path");l.append(c);const d="path_p".concat(this.pageIndex,"_").concat(n);c.setAttribute("id",d),c.setAttribute("d",t.toSVGPath()),s&&a(this,un).set(n,c);const f=S(this,sf,bv).call(this,l,d),b=se._svgFactory.createElement("use");return o.append(b),o.setAttribute("fill",e),o.setAttribute("fill-opacity",i),b.setAttribute("href","#".concat(d)),a(this,Kt).set(n,o),{id:n,clipPathId:"url(#".concat(f,")")}}highlightOutline(t){const e=Ie(this,Ac)._++,i=S(this,_c,og).call(this,t.box);i.classList.add("highlightOutline");const s=se._svgFactory.createElement("defs");i.append(s);const n=se._svgFactory.createElement("path");s.append(n);const o="path_p".concat(this.pageIndex,"_").concat(e);n.setAttribute("id",o),n.setAttribute("d",t.toSVGPath()),n.setAttribute("vector-effect","non-scaling-stroke");let l;if(t.free){i.classList.add("free");const f=se._svgFactory.createElement("mask");s.append(f),l="mask_p".concat(this.pageIndex,"_").concat(e),f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const b=se._svgFactory.createElement("rect");f.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const w=se._svgFactory.createElement("use");f.append(w),w.setAttribute("href","#".concat(o)),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const c=se._svgFactory.createElement("use");i.append(c),c.setAttribute("href","#".concat(o)),l&&c.setAttribute("mask","url(#".concat(l,")"));const d=c.cloneNode();return i.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),a(this,Kt).set(e,i),e}finalizeLine(t,e){const i=a(this,un).get(t);a(this,un).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){a(this,Kt).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),a(this,un).delete(t)}updatePath(t,e){a(this,un).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var i;S(i=se,wc,ag).call(i,a(this,Kt).get(t),e)}show(t,e){a(this,Kt).get(t).classList.toggle("hidden",!e)}rotate(t,e){a(this,Kt).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){a(this,Kt).get(t).setAttribute("fill",e)}changeOpacity(t,e){a(this,Kt).get(t).setAttribute("fill-opacity",e)}addClass(t,e){a(this,Kt).get(t).classList.add(e)}removeClass(t,e){a(this,Kt).get(t).classList.remove(e)}remove(t){a(this,$i)!==null&&(a(this,Kt).get(t).remove(),a(this,Kt).delete(t))}destroy(){x(this,$i,null);for(const t of a(this,Kt).values())t.remove();a(this,Kt).clear()}};$i=new WeakMap,Ac=new WeakMap,Kt=new WeakMap,un=new WeakMap,wc=new WeakSet,ag=function(t,{x:e=0,y:i=0,width:s=1,height:n=1}={}){const{style:o}=t;o.top="".concat(100*i,"%"),o.left="".concat(100*e,"%"),o.width="".concat(100*s,"%"),o.height="".concat(100*n,"%")},_c=new WeakSet,og=function(t){var i;const e=se._svgFactory.create(1,1,!0);return a(this,$i).append(e),e.setAttribute("aria-hidden",!0),S(i=se,wc,ag).call(i,e,t),e},sf=new WeakSet,bv=function(t,e){const i=se._svgFactory.createElement("clipPath");t.append(i);const s="clip_".concat(e);i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=se._svgFactory.createElement("use");return i.append(n),n.setAttribute("href","#".concat(e)),n.classList.add("clip"),s},v(se,wc);let rg=se;ot.AbortException;ot.AnnotationEditorLayer;ot.AnnotationEditorParamsType;ot.AnnotationEditorType;ot.AnnotationEditorUIManager;ot.AnnotationLayer;ot.AnnotationMode;ot.CMapCompressionType;ot.ColorPicker;ot.DOMSVGFactory;ot.DrawLayer;ot.FeatureTest;var T0=ot.GlobalWorkerOptions;ot.ImageKind;ot.InvalidPDFException;ot.MissingPDFException;ot.OPS;ot.Outliner;ot.PDFDataRangeTransport;ot.PDFDateString;ot.PDFWorker;ot.PasswordResponses;ot.PermissionFlag;ot.PixelsPerInch;ot.RenderingCancelledException;ot.TextLayer;ot.UnexpectedResponseException;ot.Util;ot.VerbosityLevel;ot.XfaLayer;ot.build;ot.createValidAbsoluteUrl;ot.fetchData;var k0=ot.getDocument;ot.getFilenameFromUrl;ot.getPdfFilenameFromUrl;ot.getXfaPageViewport;ot.isDataScheme;ot.isPdfFile;ot.noContextMenu;ot.normalizeUnicode;ot.renderTextLayer;ot.setLayerDimensions;ot.shadow;ot.updateTextLayer;ot.version;const L0="/assets/02-Cn1lhaoR.pdf",vg=m=>(Sy("data-v-d0f04a67"),m=m(),Cy(),m),R0={class:"box"},P0={style:{"margin-right":"15px",display:"flex","flex-direction":"column"}},M0=vg(()=>Sn("span",null,"æ¤ç¼æ¨¡å¼",-1)),D0=vg(()=>Sn("div",{id:"flipbook"},null,-1)),I0=vg(()=>Sn("input",{class:"inputBox"},null,-1)),F0={__name:"Index",setup(m){const t=Bc(!1),e=Bc(!1);T0.workerSrc="/pdf.worker.js";const i=async d=>{if(!document.querySelector("#flipbook"))return;const w=await k0({url:d}).promise,C=document.querySelector("#flipbook");for(let E=0;E<w.numPages;E++){const T=await w.getPage(E+1),M=T.getViewport({scale:.8}),k=document.createElement("div");k.classList.add("page");const j=document.createElement("div");j.classList.add("page-content");const F=document.createElement("canvas");F.width=M.width,F.height=M.height;const q=F.getContext("2d");if(!q)return;const U={canvasContext:q,viewport:M};await T.render(U).promise.then(()=>T.getTextContent()),F.addEventListener("mousedown",W=>{console.log("Mouse down at:",W.offsetX,W.offsetY);let p=document.querySelector(".pageDiv");p.style.cssText="position:absolute;left:".concat(W.offsetX,"px;top:").concat(W.offsetY,"px")}),j.appendChild(F),k.appendChild(j),C.appendChild(k)}},s=Bc([]),n=Bc(1);Ay(async()=>{await i(L0),s.value=document.querySelectorAll("#flipbook .page"),await o()});const o=()=>{nm("#flipbook").turn({autoCenter:!0,height:673,width:952,display:"single",elevation:50,duration:500,gradients:!0,acceleration:!0,page:1,pages:s.value.length,turnCorners:"bl,br,tl,tr,l,r",when:{turning:async function(b,w,C){},turned:function(b,w){n.value=w}}});let d=document.querySelector("#flipbook");const f=document.createElement("div");f.classList.add("eyeProtectLayer"),d.appendChild(f)},l=()=>{let d=document.querySelector(".inputBox").value;console.log(d),nm("#flipbook").turn("page",d)},c=d=>{const f=document.querySelector(".eyeProtectLayer");d==!0?f.style.display="block":f.style.display="none"};return(d,f)=>{const b=wy("el-switch");return _y(),Ey("div",R0,[Sn("div",P0,[Sn("div",null,[M0,xy(),sm(b,{onChange:c,modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=w=>e.value=w)},null,8,["modelValue"])]),sm(b,{modelValue:t.value,"onUpdate:modelValue":f[1]||(f[1]=w=>t.value=w),class:"mb-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#409eff"},"active-text":"æ è®°æ¡£æ¡","inactive-text":"åå§æ¡£æ¡"},null,8,["modelValue"])]),D0,Sn("div",{class:"pageBox"},[I0,Sn("span",{onClick:l},"è·³è½¬")])])}}},H0=yy(F0,[["__scopeId","data-v-d0f04a67"]]);export{H0 as default};
